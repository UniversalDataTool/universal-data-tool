{"version":3,"sources":["components/Theme/index.js","utils/use-electron.js","utils/use-posthog.js","components/CollaborateButton/index.js","components/HeaderPopupBox/index.js","components/DownloadButton/index.js","components/Header/GithubIcon.js","components/HeaderToolbar/index.js","components/StartingPage/templates.js","components/HeaderDrawer/index.js","components/Header/index.js","components/SimpleDialog/index.js","components/CreateFromTemplateDialog/index.js","utils/use-is-desktop.js","components/StartingPage/index.js","components/OHAEditor/default-oha-object.js","utils/get-task-description.js","components/SampleContainer/LinkButton.js","components/SampleContainer/index.js","components/TextClassification/index.js","components/TextEntityRecognition/index.js","utils/ria-format.js","components/ImageSegmentation/index.js","components/ImageClassification/index.js","components/VideoSegmentation/index.js","components/AudioTranscription/index.js","components/DataEntry/index.js","components/BadOHA/index.js","components/EmptySampleContainer/index.js","components/InterfaceIcon/index.js","components/Composite/index.js","components/UniversalDataViewer/index.js","components/OHAEditor/EditableTitleText.js","components/SampleGrid/index.js","components/PasteUrlsDialog/index.js","components/ImportTextSnippetsDialog/index.js","components/ImportPage/cat-images.js","components/ImportFromGoogleDriveDialog/index.js","components/ImportPage/index.js","components/TransformVideoKeyframesDialog/index.js","components/ProgressBar/index.js","components/DownloadURLsDialog/index.js","components/TransformVideoFramesToImagesDialog/index.js","components/TransformPage/index.js","components/SamplesView/index.js","components/ConfigureImageSegmentation/index.js","components/ConfigureImageClassification/index.js","components/ConfigureTextClassification/index.js","components/PaperContainer/index.js","components/ConfigureAudioTranscription/index.jsx","components/ConfigureNLP/index.js","components/ConfigureDataEntry/index.js","components/ConfigureComposite/index.js","components/Configure3D/index.js","components/ConfigureVideoSegmentation/index.js","components/ConfigureInterface/index.js","components/InterfacePage/index.js","components/EditSampleDialog/index.js","components/Stats/index.js","components/Toasts/index.js","components/OHAEditor/index.js","utils/use-time-to-complete-sample.js","components/ErrorToasts/index.js","utils/use-errors.js","utils/file-handlers/use-server/apply-seamless-patch.js","utils/file-handlers/use-server/index.js","utils/file-handlers/use-filesystem.js","utils/file-handlers/use-file-telemetry.js","utils/file-handlers/index.js","utils/file-handlers/use-local-storage.js","utils/from-udt-csv.js","utils/to-udt-csv.js","components/LocalStorageApp/index.js","components/DesktopApp/index.js","App.js","index.js"],"names":["useStyles","makeStyles","container","fontFamily","theme","createMuiTheme","palette","primary","colors","secondary","typography","button","textTransform","children","classes","ThemeProvider","className","window","require","posthogInitialized","isDesktop","Boolean","useElectron","posthog","init","api_host","autocapture","domain","location","origin","capture","people","set","is_desktop","Container","styled","position","marginLeft","borderColor","popupBoxBeforeAndAfter","bottom","left","border","content","height","width","pointerEvents","PopupBox","top","padding","boxSizing","borderRadius","backgroundColor","minHeight","boxShadow","borderBottomColor","borderWidth","fontSize","marginTop","color","opacity","transition","transform","CreateNewButton","Button","justifyContent","marginRight","ExitButton","fileOpen","inSession","onJoinSession","onCreateSession","onLeaveSession","sessionBoxOpen","changeSessionBoxOpen","useState","loadingSession","changeLoadingSession","sessionUrl","changeSessionUrl","useLocalStorage","userName","changeUserName","usePosthog","useEffect","setTimeout","onMouseEnter","onMouseLeave","IconButton","style","undefined","TextField","variant","label","value","onChange","e","target","fullWidth","onClick","InputProps","endAdornment","InputAdornment","disabled","CircularProgress","size","open","StyledButton","display","paddingTop","fontWeight","onDownload","changeOpen","HeaderPopupBox","GitHub","props","SvgIcon","d","headerButton","grow","flexGrow","list","tab","fullHeightTab","mixins","toolbar","breakpoints","down","minWidth","tabWrapper","flexDirection","alignItems","marginBottom","getIcon","t","memo","tabs","currentTab","onChangeTab","additionalButtons","onOpenDrawer","title","isSmall","c","AppBar","Toolbar","packageJSON","version","CollaborateButton","DownloadButton","length","Tabs","newTab","toLowerCase","map","Tab","key","root","wrapper","icon","href","GithubIcon","name","Icon","CropFree","oha","interface","taskData","ImageSearch","type","availableLabels","regionTypesAllowed","imageUrl","Image","OndemandVideoIcon","videoUrl","Edit","description","surveyjs","questions","pdfUrl","TextFormat","overlapAllowed","labels","id","displayName","document","ContactSupport","Audiotrack","audioUrl","Category","fields","fieldName","ThreeDRotation","recentItems","onClickHome","onCloseDrawer","drawerOpen","onOpenFile","onOpenRecentItem","onClickTemplate","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","Drawer","onClose","List","ListItem","ListItemIcon","ListItemText","ListSubheader","textAlign","ri","fileName","templates","template","HeaderContext","createContext","emptyArray","changeDrawerOpen","headerContext","useContext","useMediaQuery","HeaderDrawer","StyledDialogTitle","DialogTitle","grey","borderBottom","paddingBottom","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","borderTop","markdownContent","redOn","red","noActionBar","actions","fullScreen","changeFullScreen","Dialog","Box","maxWidth","lineHeight","source","action","i","blue","text","bigButton","margin","bigIcon","onSelect","SimpleDialog","ContentContainer","overflowY","Content","Title","Subtitle","ActionList","Action","cursor","textDecoration","ActionTitle","ActionText","Actionless","BottomSpacer","onFileDrop","onOpenTemplate","showDownloadLink","onClickOpenSession","useIsDesktop","newVersionAvailable","changeNewVersionAvailable","a","fetch","then","r","json","packageInfo","checkNewVersion","createFromTemplateDialogOpen","changeCreateFromTemplateDialogOpen","useEventCallback","isDragActive","CreateFromTemplateDialog","clicked_template","Header","filter","Grid","xs","item","find","trim","getTaskDescription","taskDataItem","url","replace","linkButtonContainer","linkButton","footer","footerContent","footerBorder","footerCount","allSamplesButton","paddingLeft","sampleIcon","menuButton","buttons","maxHeight","sectionHeader","SampleContainer","hideDescription","defaultHideDescription","onExit","lastSampleExitText","requireCompleteToPressNext","minContentHeight","currentSampleIndex","totalSamples","onChangeSample","taskOutput","changeHideDescription","sampleDrawerOpen","changeSampleDrawerOpen","sm","md","LinkButton","escapeHtml","anchor","range","TextClassification","changeCurrentSampleIndex","initialLabels","l","containerProps","sampleIndex","NLPAnnotator","multipleLabels","multiple","onFinish","result","onSaveTaskOutputItem","simpleSequenceToEntitySequence","simpleSeq","entSeq","charsPassed","seq","push","start","end","TextEntityRecognition","initialSequence","doc","sort","b","nextEntity","entitySequenceToSimpleSeq","entities","getRandomColor","min","max","h","Math","floor","random","concat","toString","rid","split","convertToRIARegionFmt","region","regionType","cls","classification","tags","x","centerX","y","centerY","w","points","p","Error","JSON","stringify","convertFromRIARegionFmt","riaRegion","convertToRIAKeyframes","keyframes","newKeyframes","regions","regionTypeToTool","polygon","point","emptyObj","emptyArr","iface","selectedIndex","isClassification","multipleRegionLabels","labelProps","useMemo","regionClsList","regionTagList","multipleRegions","output","regionMat","images","img","riaRegions","taskDatum","index","td","Array","isArray","src","videoFrameAt","frameTime","convertToRIAImageFmt","datasetName","enabledTools","rt","console","log","selectedImage","taskDescription","brightColors","letters","hashInt","reduce","acc","v","indexOf","ImageContainer","objectFit","Nav","NavItem","NavButton","paddingRight","ButtonsContainer","CheckButton","globalSampleIndex","changeSampleIndex","enlargedLabel","changeEnlargedLabel","currentOutput","changeCurrentOutput","onDone","newOutput","onNext","onPrev","timeout","clearTimeout","onClickLabel","includes","without","allowMultiple","hotkeyMap","backspace","enter","rightarrow","leftarrow","labelKeyMap","nextAvailableLetter","onKeyDown","addEventListener","removeEventListener","Checkbox","checked","videoName","customId","videoTime","videoSrc","audio","phraseBank","initialTranscriptionText","DataEntry","form","defaultAnswers","completeText","answers","explain","Typography","component","BadOHA","Composite","selectedField","changeSelectedField","indexZero","field","InterfaceIcon","UniversalDataViewer","hideHeader","EmptySampleContainer","ImageSegmentation","ImageClassification","VideoSegmentation","AudioTranscription","textField","editing","newValue","changeEditing","listener","SAVE_WAIT","inputProps","preventDefault","stopPropagation","blur","onKeyPress","flexWrap","SampleDiv","userSelect","Sample","completed","selected","onMouseDown","onMouseUp","classNames","n","count","samplesPerPage","changeSamplesPerPage","sampleOffset","changeSampleOffset","useReducer","state","selectRange","changeSelectRange","startSelectRange","moveSelectRange","endSelectRange","checkAndNullifySelectRange","onClickMemo","TablePagination","rowsPerPageOptions","rowsPerPage","page","labelRowsPerPage","onChangePage","newPage","onChangeRowsPerPage","TextArea","onAddSamples","changeContent","s","slice","error","placeholder","UploadHover","emptyFunc","ImportTextSnippetsDialog","reader","FileReader","onload","fileContent","endsWith","readAsText","ExplainText","GoogleDriveScreenshot","credentials","googleScriptLoaded","setGoogleScriptLoaded","pickerApiLoaded","setPickerApiLoaded","oauthToken","setOAuthToken","userSelectedItemsFromDrive","setUserSelectedItemsFromDrive","isPickerOpen","setIsPickerOpen","scriptElement","createElement","async","body","appendChild","remove","googlePickerActionCallback","data","google","picker","PICKED","docs","googleDriveDocument","mimeType","createPicker","view","View","ViewId","Docs","setMimeTypes","PickerBuilder","enableFeature","Feature","NAV_HIDDEN","MULTISELECT_ENABLED","setAppId","app_id","addView","DOCS","setDeveloperKey","developer_key","setCallback","build","setVisible","handleAuthenticationResponse","authenticationResponse","access_token","onAuthApiLoad","gapi","auth","authorize","client_id","onPickerApiLoad","onLoadPicker","load","callback","samples","ButtonBase","MuiButton","DesktopOnlyText","SelectDialogContext","desktopOnly","dialog","Consumer","onChangeDialog","classnames","convertToTaskDataObject","fp","ext","onChangeOHA","selectedDialog","changeDialog","electron","remote","showOpenDialog","properties","canceled","dirPaths","filePaths","dirPath","fs","path","promises","readdir","importedFilePaths","fn","join","setIn","catImages","closeDialog","Provider","AssignmentReturnedIcon","CreateNewFolderIcon","TextFieldsIcon","PetsIcon","FaGoogleDrive","PasteUrlsDialog","ImportFromGoogleDriveDialog","Code","StyledExpansionPanel","ExpansionPanel","StyledExpansionPanelSummary","ExpansionPanelSummary","flatMap","Object","keys","kf","parseInt","immutable","ExpansionPanelDetails","Text","right","Bar","progress","ErrorBox","whiteSpace","downloadFile","urlToDownload","directoryPath","md5","downloadPath","existsSync","Promise","resolve","reject","directory","filename","err","changeProgress","errors","changeErrors","buttonLabel","cancelled","newTaskData","urlKey","startsWith","pathToFile","ProgressBar","getFfmpegTimeCode","ms","cs","ss","mn","padStart","pathToFfmpeg","shell","exec","transformsPerformed","videoPath","imageOutputPath","ffmpegCommand","Icon1","Icon2","CollectionsIcon","GetAppIcon","ImageIcon","TransformVideoKeyframesDialog","DownloadURLsDialog","TransformVideoFramesToImagesDialog","ExpandedRowContainer","borderTopLeftRadius","borderTopRightRadius","ExpandedRowTitle","ExpandedRowCode","ExpandedRow","_output","input","spacing","openSampleInputEditor","openSampleLabelEditor","deleteSample","localStorage","lastSampleTab","changeTabState","changeTab","columns","selector","sortable","knownKeys","Set","has","add","cell","row","raised","ImportPage","newOHA","shouldViewChange","TransformPage","SampleGrid","expandableRowsComponent","expandableRows","dense","pagination","paginationPerPage","paginationRowsPerPageOptions","choices","cellType","noActions","onQuestionChange","questionId","PaperContainer","hasOther","column","NoQuestions","Question","borderLeft","PreviewHeader","anchorEl","useRef","menuOpen","changeMenuOpen","q","defaultValue","multiline","rows","ref","current","MenuItem","Fields","Fragment","f","fieldIndex","expandIcon","newFieldInterface","fieldOrder","ExplanationTextHeader","ExplanationText","GithubLink","Configure3D","rel","NoOptions","TypeButton","Heading","SelectType","currentlySelected","ConfigureInterface","onClickEditJSON","ConfigureImageSegmentation","ConfigureImageClassification","ConfigureComposite","ConfigureDataEntry","ConfigureAudioTranscription","ConfigureNLP","ConfigureTextClassification","ConfigureVideoSegmentation","onClearLabelData","forceUpdate","useUpdate","confirm","has_opted_out_captureing","opt_in_captureing","opt_out_captureing","sampleInput","changeText","changeError","newText","mode","editorProps","$blockScrolling","Infinity","parse","Stat","Label","Value","stats","msgBox","ToastContext","useToasts","addToast","ToastProvider","fullLife","messageType","message","life","msg","toasts","changeToasts","interval","setInterval","clearInterval","Collapse","in","Fade","saveIcon","editIcon","headerTabs","onChangeFileName","initialMode","changeMode","singleSampleOHA","changeSingleSampleOHA","sampleInputEditor","changeSampleInputEditor","jsonText","changeJSONText","ipcRenderer","newTimeToComplete","newSamplesInWindow","samplesInWindow","timeToCompleteSample","useTimeToCompleteSample","changeSampleTimeToComplete","onOpenSettingsPage","onOpenSamplesPage","onOpenLabelPage","on","removeListener","percentComplete","EditableTitleText","InterfacePage","some","SamplesView","annotationStartTime","Date","now","newTaskOutput","splice","relativeIndex","tdi","nextAction","startTime","Stats","duration","EditSampleDialog","newInput","errorBox","addToArray","withoutIn","obj","parentPath","parentObj","getIn","object","patches","patch","op","from","isNaN","updateIn","serverUrl","useLocalCollaborationServer","getJSON","bent","postJSON","patchJSON","hash","o","objectHash","getLatestState","sessionId","encodeURIComponent","res","udt_json","convertToCollaborativeFile","file","udt","response","short_id","lastSyncedVersion","lastSyncedState","cloneDeep","webReturn","saveFile","changeFile","saveAs","saveFileAsync","filePath","showSaveDialog","filters","extensions","newFilePath","writeFile","useFilesystem","changeRecentItems","checkForLatestPatch","hashOfLatestState","latestVersion","changeLog","sampleMatch","match","newFileContent","applySeamlessPatch","latest","makeImmutable","rfc6902","sendPatchIfChanges","useServer","interface_type","last_used_interface_type","dataset_size","numCompleted","samples_completed","percent_completed","openFile","fsFile","handleLoadedFile","csv","JAC","fromCSV","sample","fromUDTCSV","openUrl","decodeURIComponent","history","replaceState","search","makeSession","newFile","samplesObj","sampleKeys","flatten","forEach","k","options","toCSV","empty","randomId","useFileHandler","useErrors","onCreateTemplate","openRecentItem","format","outputName","download","toUDTCSV","sessionName","OHAEditor","newName","StartingPage","ErrorToasts","onOpenWelcomePage","onNewFile","arg0","templateName","saveFileAs","exportToCSV","onOpenFileFromToolbar","App","Theme","DesktopApp","LocalStorageApp","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.96702434.chunk.js","sourcesContent":["import React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\nimport { ThemeProvider } from \"@material-ui/core/styles\"\nimport \"./theme.css\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  container: {\n    fontFamily: '\"Inter\", sans-serif'\n  }\n})\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: colors.blue,\n    secondary: colors.blue\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", sans-serif',\n    button: {\n      textTransform: \"none\"\n    }\n  }\n})\n\nexport default ({ children }: any) => {\n  const classes = useStyles()\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.container}>{children}</div>\n    </ThemeProvider>\n  )\n}\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return window.require(\"electron\")\n  }\n  return null\n}\n","import posthog from \"posthog-js\"\nimport useElectron from \"./use-electron\"\n\nwindow.posthogInitialized = false\nexport default () => {\n  const isDesktop = Boolean(useElectron())\n  if (!window.posthogInitialized) {\n    posthog.init(\"dSrx1PbFd02XsxlLd7qNbeTxKZwwao2sclVmapyYlT4\", {\n      api_host: \"https://posthog.universaldatatool.com\",\n      autocapture: false\n    })\n    const domain = isDesktop ? \"desktop\" : window.location.origin\n    posthog.capture(\"domain\", { domain })\n    posthog.capture(\"is_desktop\", { isDesktop: isDesktop })\n    posthog.people.set({ is_desktop: isDesktop, domain })\n    window.posthogInitialized = true\n  }\n  return posthog\n}\n","// @flow\n\nimport React, { useState, useMemo, useRef, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { createPortal } from \"react-dom\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport PeopleIcon from \"@material-ui/icons/People\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport usePosthog from \"../../utils/use-posthog\"\n\nconst Container = styled(\"div\")({ position: \"relative\", marginLeft: 8 })\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\"\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800]\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800]\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\"\n  }\n})\n\nconst CreateNewButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  color: colors.blue[500],\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7\n  }\n})\nconst ExitButton = styled(Button)({\n  marginTop: 16,\n  justifyContent: \"flex-start\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7,\n    color: colors.red[500]\n  }\n})\n\nexport default ({\n  fileOpen = false,\n  inSession = false,\n  onJoinSession,\n  onCreateSession,\n  onLeaveSession,\n  sessionBoxOpen,\n  changeSessionBoxOpen\n}) => {\n  const [loadingSession, changeLoadingSession] = useState(false)\n  const [sessionUrl, changeSessionUrl] = useState(\"\")\n  const [userName, changeUserName] = useLocalStorage(\"userName\", \"anonymous\")\n  const posthog = usePosthog()\n\n  useEffect(() => {\n    if (loadingSession) {\n      setTimeout(() => {\n        changeLoadingSession(false)\n      }, 10000)\n    }\n  }, [loadingSession])\n\n  return (\n    <Container\n      onMouseEnter={() => changeSessionBoxOpen(true)}\n      onMouseLeave={() => changeSessionBoxOpen(false)}\n    >\n      <IconButton style={{ color: inSession ? colors.blue[500] : undefined }}>\n        <PeopleIcon />\n      </IconButton>\n      <PopupBox className={sessionBoxOpen ? \"\" : \"hidden\"}>\n        <h1>Collaborate</h1>\n        {!inSession ? (\n          <>\n            <h2>Join a Session</h2>\n            <TextField\n              variant=\"outlined\"\n              label=\"URL to Session\"\n              value={sessionUrl}\n              onChange={e => changeSessionUrl(e.target.value)}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      color=\"primary\"\n                      onClick={() => {\n                        posthog.capture(\"join_collaborative_session\")\n                        onJoinSession(sessionUrl)\n                      }}\n                      disabled={!sessionUrl}\n                    >\n                      <ArrowForwardIcon />\n                    </IconButton>\n                  </InputAdornment>\n                )\n              }}\n            />\n            <CreateNewButton\n              fullWidth\n              onClick={() => {\n                posthog.capture(\"create_collaborative_session\")\n                onCreateSession()\n                changeLoadingSession(true)\n              }}\n              disabled={!fileOpen || loadingSession}\n            >\n              {loadingSession ? (\n                <CircularProgress className=\"icon\" size={24} />\n              ) : (\n                <AddBoxTwoTone className=\"icon\" />\n              )}\n              Create New Session\n            </CreateNewButton>\n          </>\n        ) : (\n          <>\n            <TextField\n              style={{ marginTop: 12 }}\n              variant=\"outlined\"\n              label=\"User Name\"\n              value={userName}\n              onChange={e => changeUserName(e.target.value)}\n            />\n            <ExitButton fullWidth onClick={onLeaveSession}>\n              <ExitToAppIcon className=\"icon\" />\n              Leave Session\n            </ExitButton>\n          </>\n        )}\n      </PopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst WIDTH = 300\nconst borderColor = colors.grey[500]\nconst popupBoxBeforeAndAfter = {\n  bottom: \"100%\",\n  left: \"25%\",\n  border: \"solid transparent\",\n  content: '\" \"',\n  height: 0,\n  width: 0,\n  position: \"absolute\",\n  pointerEvents: \"none\"\n}\nconst PopupBox = styled(\"div\")({\n  position: \"absolute\",\n  top: 45,\n  padding: 16,\n  boxSizing: \"border-box\",\n  borderRadius: 4,\n  left: -WIDTH / 4 + 22,\n  backgroundColor: \"#fff\",\n  border: `1px solid ${borderColor}`,\n  width: WIDTH,\n  minHeight: 200,\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\n  \"&:before\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(0,0,0, 0)\",\n    borderBottomColor: borderColor,\n    borderWidth: 12,\n    marginLeft: -12\n  },\n  \"&:after\": {\n    ...popupBoxBeforeAndAfter,\n    borderColor: \"rgba(255,255,255, 0)\",\n    borderBottomColor: \"#fff\",\n    borderWidth: 10,\n    marginLeft: -10\n  },\n  \"& h1\": {\n    fontSize: 18,\n    marginTop: 0,\n    color: colors.blue[800]\n  },\n  \"& h2\": {\n    fontSize: 14,\n    color: colors.grey[800]\n  },\n  opacity: 1,\n  transition: \"opacity 200ms linear, transform 200ms ease\",\n  \"&.hidden\": {\n    opacity: 0,\n    transform: \"translate(0, 10px)\",\n    pointerEvents: \"none\"\n  }\n})\n\nexport default ({ open, children }) => {\n  return <PopupBox className={open ? \"\" : \"hidden\"}>{children}</PopupBox>\n}\n","// @flow\n\nimport React, { useState, useMemo, useRef, useEffect } from \"react\"\nimport { useLocalStorage } from \"react-use\"\nimport { createPortal } from \"react-dom\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Button from \"@material-ui/core/Button\"\nimport TextField from \"@material-ui/core/TextField\"\nimport InputAdornment from \"@material-ui/core/InputAdornment\"\nimport AddBoxTwoTone from \"@material-ui/icons/AddBoxTwoTone\"\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport HeaderPopupBox from \"../HeaderPopupBox\"\n\nconst Container = styled(\"div\")({ position: \"relative\" })\n\nconst StyledButton = styled(Button)({\n  justifyContent: \"flex-start\",\n  \"& .fakeicon\": {\n    display: \"inline\",\n    marginRight: 8,\n    padding: 4,\n    paddingTop: 5,\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: \"#fff\",\n    backgroundColor: colors.grey[700],\n    borderRadius: 4,\n    width: 36,\n    \"&.blue\": {\n      backgroundColor: colors.blue[700]\n    },\n    \"&.green\": {\n      backgroundColor: colors.green[700]\n    }\n  }\n})\n\nexport default ({ onDownload }) => {\n  const [open, changeOpen] = useState(false)\n\n  return (\n    <Container\n      onMouseEnter={() => changeOpen(true)}\n      onMouseLeave={() => changeOpen(false)}\n    >\n      <IconButton>\n        <DownloadIcon />\n      </IconButton>\n      <HeaderPopupBox open={open}>\n        <h1>Download</h1>\n        <StyledButton fullWidth onClick={() => onDownload(\"csv\")}>\n          <div className=\"fakeicon green\">CSV</div>\n          Download CSV\n        </StyledButton>\n        <StyledButton fullWidth onClick={() => onDownload(\"json\")}>\n          <div className=\"fakeicon blue\">JSON</div>\n          Download JSON\n        </StyledButton>\n      </HeaderPopupBox>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport SvgIcon from \"@material-ui/core/SvgIcon\"\n\nfunction GitHub(props: Object) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\n    </SvgIcon>\n  )\n}\n\nexport default GitHub\n","// @flow weak\n\nimport React, { memo } from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport CodeIcon from \"@material-ui/icons/Code\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport StorageIcon from \"@material-ui/icons/Storage\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport CollaborateButton from \"../CollaborateButton\"\nimport DownloadButton from \"../DownloadButton\"\nimport Button from \"@material-ui/core/Button\"\nimport GithubIcon from \"../Header/GithubIcon\"\nimport * as colors from \"@material-ui/core/colors\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport packageJSON from \"../../../package.json\"\n\nconst useStyles = makeStyles(theme => ({\n  headerButton: {\n    marginLeft: 16,\n    color: \"#888\"\n  },\n  grow: { flexGrow: 1 },\n  list: {\n    width: 300\n  },\n  tab: {\n    color: \"#000\",\n    \"& .icon\": {}\n  },\n  fullHeightTab: {\n    ...theme.mixins.toolbar,\n    [theme.breakpoints.down(\"sm\")]: {\n      minWidth: 20\n    }\n  },\n  tabWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    textTransform: \"none\",\n    color: \"#000\",\n    \"&&& svg\": {\n      marginBottom: 0,\n      marginRight: 8,\n      width: 18,\n      height: 18\n    }\n  }\n}))\n\nconst getIcon = (t: string) => {\n  switch (t) {\n    case \"Settings\":\n      return <SettingsIcon className=\"icon\" />\n    case \"Label\":\n      return <BorderColorIcon className=\"icon\" />\n    case \"Samples\":\n      return <StorageIcon className=\"icon\" />\n  }\n}\n\nconst HeaderToolbar = ({\n  tabs,\n  currentTab,\n  onChangeTab,\n  additionalButtons,\n  onOpenDrawer,\n  title = \"Universal Data Tool\",\n  isDesktop,\n  fileOpen,\n  sessionBoxOpen,\n  changeSessionBoxOpen,\n  inSession,\n  onCreateSession,\n  onLeaveSession,\n  onJoinSession,\n  onDownload,\n  isSmall\n}) => {\n  const c = useStyles()\n  return (\n    <AppBar color=\"white\" position=\"static\">\n      <Toolbar variant=\"dense\">\n        {!isDesktop && (\n          <IconButton onClick={onOpenDrawer} className={c.headerButton}>\n            <MenuIcon />\n          </IconButton>\n        )}\n        {fileOpen ? title : \"Universal Data Tool v\" + packageJSON.version}\n        {!isDesktop && (\n          <CollaborateButton\n            sessionBoxOpen={sessionBoxOpen}\n            changeSessionBoxOpen={changeSessionBoxOpen}\n            fileOpen={fileOpen}\n            inSession={inSession}\n            onCreateSession={onCreateSession}\n            onLeaveSession={onLeaveSession}\n            onJoinSession={onJoinSession}\n          />\n        )}\n        {!isDesktop && fileOpen && <DownloadButton onDownload={onDownload} />}\n        <div className={c.grow} />\n        {additionalButtons}\n        {tabs.length > 0 && (\n          <Tabs\n            onChange={(e, newTab) => onChangeTab(newTab.toLowerCase())}\n            value={currentTab}\n          >\n            {tabs.map(t => (\n              <Tab\n                key={t}\n                classes={{ root: c.fullHeightTab, wrapper: c.tabWrapper }}\n                className={c.tab}\n                icon={getIcon(t)}\n                label={isSmall ? \"\" : t}\n                value={t.toLowerCase()}\n              />\n            ))}\n          </Tabs>\n        )}\n        {!isSmall && (\n          <IconButton\n            href=\"https://github.com/openhumanannotation/universal-data-tool\"\n            className={c.headerButton}\n          >\n            <GithubIcon />\n          </IconButton>\n        )}\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default memo(HeaderToolbar)\n","// @flow\n\nimport ImageSearch from \"@material-ui/icons/ImageSearch\"\nimport Image from \"@material-ui/icons/Image\"\nimport CropFree from \"@material-ui/icons/CropFree\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Category from \"@material-ui/icons/Category\"\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport ContactSupport from \"@material-ui/icons/ContactSupport\"\n\nexport default [\n  {\n    name: \"Empty\",\n    Icon: CropFree,\n    oha: {\n      interface: {},\n      taskData: []\n    }\n  },\n  {\n    name: \"Image Segmentation\",\n    Icon: ImageSearch,\n    oha: {\n      interface: {\n        type: \"image_segmentation\",\n        availableLabels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\n          \"bounding-box\",\n          \"polygon\",\n          // \"full-segmentation\",\n          \"point\"\n          // \"pixel-mask\"\n        ]\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\"\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Image Classification\",\n    Icon: Image,\n    oha: {\n      interface: {\n        type: \"image_classification\",\n        availableLabels: [\"valid\", \"invalid\"]\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\"\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Video Segmentation\",\n    Icon: OndemandVideoIcon,\n    oha: {\n      interface: {\n        type: \"video_segmentation\",\n        availableLabels: [\"valid\", \"invalid\"],\n        regionTypesAllowed: [\"bounding-box\", \"polygon\", \"point\"]\n      },\n      taskData: [\n        {\n          videoUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/SampleVideo_1280x720_1mb.mp4\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Data Entry\",\n    Icon: Edit,\n    oha: {\n      interface: {\n        type: \"data_entry\",\n        description: \"# Markdown description here\",\n        surveyjs: {\n          questions: [\n            {\n              type: \"text\",\n              name: \"document_title\",\n              title: \"Title of Document\"\n            }\n          ]\n        }\n      },\n      taskData: [\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1906.01969.pdf\"\n        },\n        {\n          pdfUrl: \"https://arxiv.org/pdf/1908.07069.pdf\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Named Entity Recognition\",\n    Icon: TextFormat,\n    oha: {\n      interface: {\n        type: \"text_entity_recognition\",\n        overlapAllowed: false,\n        labels: [\n          {\n            id: \"food\",\n            displayName: \"Food\",\n            description: \"Edible item.\"\n          },\n          {\n            id: \"hat\",\n            displayName: \"Hat\",\n            description: \"Something worn on the head.\"\n          }\n        ]\n      },\n      taskData: [\n        {\n          document:\n            \"This strainer makes a great hat, I'll wear it while I serve spaghetti!\"\n        },\n        {\n          document: \"Why are all these dumpings covered in butter?!\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Text Classification\",\n    Icon: ContactSupport,\n    oha: {\n      interface: {\n        type: \"text_classification\",\n        labels: [\"positive_sentiment\", \"negative_sentiment\"]\n      },\n      taskData: [\n        {\n          document: \"Wow this is terrible. I hated it.\"\n        },\n        {\n          document: \"This has made me so happy. I love this.\"\n        },\n        {\n          document:\n            \"At first I wasn't sure. Then I thought, oh it's not very good.\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Audio Transcription\",\n    Icon: Audiotrack,\n    oha: {\n      interface: {\n        type: \"audio_transcription\",\n        description: \"# Markdown description here\"\n      },\n      taskData: [\n        {\n          audioUrl: \"https://html5tutorial.info/media/vincent.mp3\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"Composite\",\n    Icon: Category,\n    oha: {\n      description: \"# Markdown description here\",\n      interface: {\n        type: \"composite\",\n        fields: [\n          {\n            fieldName: \"textInfo\",\n            interface: {\n              type: \"data_entry\",\n              surveyjs: {\n                questions: [\n                  {\n                    type: \"text\",\n                    name: \"group_letter\",\n                    title: \"Letter of Group\"\n                  }\n                ]\n              }\n            }\n          },\n          {\n            fieldName: \"segmentation\",\n            interface: {\n              type: \"image_segmentation\",\n              availableLabels: [\"group text\"],\n              regionTypesAllowed: [\"bounding-box\"]\n            }\n          }\n        ]\n      },\n      taskData: [\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\"\n        },\n        {\n          imageUrl:\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\"\n        }\n      ]\n    }\n  },\n  {\n    name: \"3D Bounding Box\",\n    Icon: ThreeDRotation,\n    oha: {\n      interface: {\n        type: \"3d_bounding_box\",\n        description: \"3D Bounding Box\"\n      }\n    }\n  }\n]\n","//@flow weak\n\nimport React, { useCallback } from \"react\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport { useDropzone } from \"react-dropzone\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport { GoMarkGithub } from \"react-icons/go\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport HomeIcon from \"@material-ui/icons/Home\"\nimport { IconContext } from \"react-icons\"\nimport templates from \"../StartingPage/templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport NoteAddIcon from \"@material-ui/icons/NoteAdd\"\n\nconst useStyles = makeStyles({})\n\nexport default ({\n  recentItems,\n  onClickHome,\n  onCloseDrawer,\n  drawerOpen,\n  onOpenFile,\n  onOpenRecentItem,\n  onClickTemplate\n}) => {\n  const c = useStyles()\n\n  const onDrop = useCallback(acceptedFiles => {\n    onOpenFile(acceptedFiles[0])\n  }, [])\n\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n  return (\n    <Drawer open={drawerOpen} onClose={onCloseDrawer}>\n      <List className={c.list}>\n        <ListItem onClick={onClickHome} button>\n          <ListItemIcon>\n            <HomeIcon />\n          </ListItemIcon>\n          <ListItemText>Home</ListItemText>\n        </ListItem>\n        <ListItem {...getRootProps()} button>\n          <ListItemIcon>\n            <NoteAddIcon />\n          </ListItemIcon>\n          <ListItemText>Open File</ListItemText>\n          <input {...getInputProps()} />\n        </ListItem>\n        <ListSubheader>Recent Files</ListSubheader>\n        {recentItems.length === 0 ? (\n          <ListItem>\n            <ListItemText\n              style={{ textAlign: \"center\", color: colors.grey[500] }}\n            >\n              No Recent Items\n            </ListItemText>\n          </ListItem>\n        ) : (\n          recentItems.map(ri => (\n            <ListItem\n              key={ri.fileName}\n              button\n              onClick={() => {\n                onOpenRecentItem(ri)\n              }}\n            >\n              <ListItemIcon>\n                <FileIcon />\n              </ListItemIcon>\n              <ListItemText>{ri.fileName}</ListItemText>\n            </ListItem>\n          ))\n        )}\n        <ListSubheader>Create From Template</ListSubheader>\n        {templates.map(template => (\n          <ListItem\n            key={template.name}\n            button\n            onClick={() => onClickTemplate(template)}\n          >\n            <ListItemIcon>\n              <template.Icon />\n            </ListItemIcon>\n            <ListItemText>{template.name}</ListItemText>\n          </ListItem>\n        ))}\n        <ListSubheader>Explore More</ListSubheader>\n        {/* <ListItem button>\n      <ListItemIcon>\n        <CodeIcon />\n      </ListItemIcon>\n      <ListItemText>Integrate</ListItemText>\n    </ListItem> */}\n        <ListItem\n          button\n          onClick={() => {\n            window.location.href =\n              \"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n          }}\n        >\n          <ListItemIcon>\n            <GoMarkGithub />\n          </ListItemIcon>\n          <ListItemText>Github</ListItemText>\n        </ListItem>\n      </List>\n    </Drawer>\n  )\n}\n","// @flow weak\n\nimport React, { useState, createContext, useContext, useCallback } from \"react\"\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"\n\nimport HeaderToolbar from \"../HeaderToolbar\"\nimport HeaderDrawer from \"../HeaderDrawer\"\n\nexport const HeaderContext = createContext({\n  recentItems: [],\n  onClickTemplate: () => null,\n  onClickHome: () => null,\n  onOpenFile: () => null,\n  onOpenRecentItem: () => null,\n  isDesktop: false,\n  inSession: false,\n  onJoinSession: () => null,\n  onCreateSession: () => null,\n  onLeaveSession: () => null,\n  sessionBoxOpen: false,\n  changeSessionBoxOpen: () => null,\n  fileOpen: false,\n  onDownload: () => null\n})\n\nconst emptyArray = []\n\nexport default ({\n  additionalButtons = emptyArray,\n  title,\n  currentTab,\n  onChangeTab,\n  tabs = emptyArray\n}) => {\n  const [drawerOpen, changeDrawerOpen] = useState(false)\n  let headerContext = useContext(HeaderContext)\n  if (!headerContext.recentItems) headerContext.recentItems = []\n\n  const isSmall = useMediaQuery(\"(max-width: 800px)\")\n\n  const onOpenDrawer = useCallback(() => changeDrawerOpen(true), [])\n  const onCloseDrawer = useCallback(() => changeDrawerOpen(false), [])\n\n  return (\n    <>\n      <HeaderToolbar\n        tabs={tabs}\n        currentTab={currentTab}\n        onChangeTab={onChangeTab}\n        additionalButtons={additionalButtons}\n        onOpenDrawer={onOpenDrawer}\n        isSmall={isSmall}\n        {...headerContext}\n        title={title}\n      />\n      <HeaderDrawer\n        drawerOpen={drawerOpen}\n        onCloseDrawer={onCloseDrawer}\n        onClickHome={headerContext.onClickHome}\n        recentItems={headerContext.recentItems}\n        onOpenFile={headerContext.onOpenFile}\n        onClickTemplate={headerContext.onClickTemplate}\n        onOpenRecentItem={headerContext.onOpenRecentItem}\n      />\n    </>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport CloseIcon from \"@material-ui/icons/Close\"\nimport FullScreenIcon from \"@material-ui/icons/Fullscreen\"\nimport FullScreenExitIcon from \"@material-ui/icons/FullscreenExit\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport { grey, blue, red } from \"@material-ui/core/colors\"\nimport ReactMarkdown from \"react-markdown\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst StyledDialogTitle = styled(DialogTitle)({\n  backgroundColor: grey[100],\n  borderBottom: `1px solid ${grey[300]}`,\n  paddingBottom: 12,\n  boxShadow: \"0px 2px 3px rgba(0,0,0,0.05)\"\n})\nconst StyledDialogContent = styled(DialogContent)({\n  paddingTop: 16\n})\nconst StyledDialogActions = styled(DialogActions)({\n  backgroundColor: grey[100],\n  borderTop: `1px solid ${grey[300]}`\n})\n\nexport default ({\n  open = false,\n  title,\n  children,\n  markdownContent,\n  onClose,\n  red: redOn,\n  noActionBar = false,\n  actions = []\n}) => {\n  const [fullScreen, changeFullScreen] = useState(false)\n  return (\n    <Dialog open={open} onClose={onClose} fullScreen={fullScreen}>\n      <StyledDialogTitle>\n        <Box display=\"flex\" alignItems=\"center\">\n          <span style={{ color: redOn ? red[700] : undefined }}>{title}</span>\n          <div style={{ flexGrow: 1 }} />\n          <IconButton onClick={() => changeFullScreen(!fullScreen)}>\n            {fullScreen ? <FullScreenExitIcon /> : <FullScreenIcon />}\n          </IconButton>\n          <IconButton onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </StyledDialogTitle>\n      <StyledDialogContent>\n        <Box maxWidth=\"90vw\" minWidth={400} lineHeight={1.5}>\n          {markdownContent ? (\n            <ReactMarkdown source={markdownContent} />\n          ) : (\n            children\n          )}\n        </Box>\n      </StyledDialogContent>\n      {!noActionBar && (\n        <StyledDialogActions>\n          <Button onClick={() => onClose()}>\n            <span style={{ color: grey[700], fontWeight: 500 }}>Close</span>\n          </Button>\n          {actions.map((action, i) => (\n            <Button disabled={action.disabled} key={i} onClick={action.onClick}>\n              <span\n                style={{ color: redOn ? red[700] : blue[700], fontWeight: 500 }}\n              >\n                {action.text}\n              </span>\n            </Button>\n          ))}\n        </StyledDialogActions>\n      )}\n    </Dialog>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport templates from \"../StartingPage/templates\"\nimport { grey } from \"@material-ui/core/colors\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nconst useStyles = makeStyles({\n  bigButton: {\n    padding: 10,\n    width: 150,\n    height: 120,\n    border: \"1px solid #ccc\",\n    margin: 10\n  },\n  bigIcon: {\n    width: 48,\n    height: 48\n  }\n})\n\nexport default ({ open, onClose, onSelect }) => {\n  const c = useStyles()\n  return (\n    <SimpleDialog title=\"Create from Template\" open={open} onClose={onClose}>\n      {templates.map(template => (\n        <Button\n          key={template.name}\n          onClick={() => onSelect(template)}\n          className={c.bigButton}\n        >\n          <div>\n            <div>{template.name}</div>\n            <div>\n              <template.Icon className={c.bigIcon} />\n            </div>\n          </div>\n        </Button>\n      ))}\n    </SimpleDialog>\n  )\n}\n","// @flow\n\nexport default () => {\n  if (window.require) {\n    return Boolean(window.require(\"electron\"))\n  }\n  return false\n}\n","// @flow\n\nimport React, { useState, useMemo, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Header from \"../Header\"\nimport Button from \"@material-ui/core/Button\"\nimport Typography from \"@material-ui/core/Typography\"\nimport templates from \"./templates\"\nimport * as colors from \"@material-ui/core/colors\"\nimport VideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\"\nimport TemplateIcon from \"@material-ui/icons/Description\"\nimport { useDropzone } from \"react-dropzone\"\nimport CreateFromTemplateDialog from \"../CreateFromTemplateDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport packageInfo from \"../../../package.json\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles({\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: colors.grey[900],\n    height: \"100vh\"\n  }\n})\n\nconst ContentContainer = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  flexGrow: 1,\n  color: \"#fff\",\n  overflowY: \"scroll\",\n  padding: 100,\n  [theme.breakpoints.down(\"sm\")]: {\n    padding: 50\n  }\n}))\nconst Content = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"calc(100% - 32px)\",\n  marginLeft: 16,\n  maxWidth: 1000\n}))\n\nconst Title = styled(\"div\")({\n  marginTop: 20,\n  fontSize: 36,\n  fontWeight: 600,\n  color: colors.grey[300]\n})\n\nconst Subtitle = styled(\"div\")({\n  fontSize: 18,\n  // fontWeight: \"bold\",\n  marginTop: 8,\n  color: colors.grey[500]\n})\nconst ActionList = styled(\"div\")({ marginTop: 48 })\nconst Action = styled(\"a\")({\n  display: \"block\",\n  color: colors.blue[500],\n  marginTop: 4,\n  cursor: \"pointer\",\n  textDecoration: \"none\"\n})\nconst ActionTitle = styled(\"div\")({\n  // fontWeight: \"bold\",\n  fontSize: 24,\n  marginBottom: 8,\n  color: colors.grey[500]\n})\nconst ActionText = styled(\"div\")({\n  color: colors.grey[300],\n  \"& a\": {\n    cursor: \"pointer\",\n    color: colors.blue[500],\n    textDecoration: \"none\"\n  }\n})\nconst Actionless = styled(\"div\")({\n  color: colors.grey[600],\n  paddingTop: 16\n})\nconst BottomSpacer = styled(\"div\")({ height: 100 })\n\nexport default ({\n  onFileDrop,\n  onOpenTemplate,\n  showDownloadLink = true,\n  recentItems = [],\n  onOpenRecentItem,\n  onClickOpenSession\n}) => {\n  const c = useStyles()\n  const posthog = usePosthog()\n\n  const isDesktop = useIsDesktop()\n  const [newVersionAvailable, changeNewVersionAvailable] = useState(false)\n  useEffect(() => {\n    // if (!isDesktop) return\n    async function checkNewVersion() {\n      const newPackage = await fetch(\n        \"https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/package.json\"\n      ).then(r => r.json())\n      if (newPackage.version !== packageInfo.version) {\n        changeNewVersionAvailable(true)\n      }\n    }\n    checkNewVersion()\n  }, [])\n\n  const [\n    createFromTemplateDialogOpen,\n    changeCreateFromTemplateDialogOpen\n  ] = useState(false)\n  const onDrop = useEventCallback(acceptedFiles => {\n    onFileDrop(acceptedFiles[0])\n  })\n\n  let { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  return (\n    <div className={c.container}>\n      <CreateFromTemplateDialog\n        open={createFromTemplateDialogOpen}\n        onSelect={template => {\n          posthog.capture(\"template_clicked\", {\n            clicked_template: template.name\n          })\n          onOpenTemplate(template)\n        }}\n        onClose={() => changeCreateFromTemplateDialogOpen(false)}\n      />\n      <Header\n        additionalButtons={[\n          newVersionAvailable && (\n            <Button\n              key=\"download-latest\"\n              className={c.headerButton}\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n            >\n              Out of date! Download New Version\n            </Button>\n          ),\n          showDownloadLink && (\n            <Button\n              key=\"download\"\n              href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\n              className={c.headerButton}\n            >\n              Download\n            </Button>\n          )\n        ].filter(Boolean)}\n      />\n      <ContentContainer>\n        <Content>\n          <Grid container>\n            <Grid xs={12} item>\n              <Title>Universal Data Tool</Title>\n              <Subtitle>Open-Source Data Labeling</Subtitle>\n            </Grid>\n            <Grid xs={6} item>\n              <ActionList>\n                <ActionTitle>Start</ActionTitle>\n                <Action\n                  onClick={() => {\n                    posthog.capture(\"template_clicked\", {\n                      clicked_template: \"empty\"\n                    })\n                    onOpenTemplate(templates.find(t => t.name === \"Empty\"))\n                  }}\n                >\n                  New File\n                </Action>\n                <Action\n                  onClick={() => changeCreateFromTemplateDialogOpen(true)}\n                >\n                  Start from Template\n                </Action>\n                <Action {...getRootProps()}>\n                  <input {...getInputProps()} />\n                  Open File\n                </Action>\n                {onClickOpenSession && (\n                  <Action onClick={onClickOpenSession}>\n                    Open Collaborative Session\n                  </Action>\n                )}\n                {/* <Action>Open Folder</Action> */}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Recent</ActionTitle>\n                {recentItems.length === 0 ? (\n                  <Actionless>No Recent Files</Actionless>\n                ) : (\n                  recentItems.map((ri, i) => (\n                    <Action key={i} onClick={() => onOpenRecentItem(ri)}>\n                      {ri.fileName}\n                    </Action>\n                  ))\n                )}\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Help</ActionTitle>\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool/releases\">\n                  Downloading and Installing UDT\n                </Action>\n                <Action href=\"https://dev.to/seveibar/make-bounding-boxes-for-artificial-intelligence-with-udt-1kai\">\n                  Labeling Images\n                </Action>\n                {/* <Action>Custom Data Entry</Action> */}\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool\">\n                  Github Repository\n                </Action>\n                {/* <Action href=\"#\">\n                  How to Collaborate in Real-Time with UDT\n                </Action> */}\n              </ActionList>\n            </Grid>\n            <Grid xs={6} item>\n              <ActionList>\n                <ActionTitle>About</ActionTitle>\n                <ActionText>\n                  The Universal Data Tool (UDT) is an open-source web or\n                  downloadable tool for labeling data for usage in machine\n                  learning or data processing systems.\n                  <br />\n                  <br />\n                  The Universal Data Tool supports Computer Vision, Natural\n                  Language Processing (including Named Entity Recognition and\n                  Audio Transcription) workflows.\n                  <br />\n                  <br />\n                  The UDT uses an{\" \"}\n                  <a href=\"https://github.com/UniversalDataTool/udt-format\">\n                    open-source data format (.udt.json)\n                  </a>{\" \"}\n                  that can be easily read by programs as a ground-truth dataset\n                  for machine learning algorithms.\n                  <br />\n                  <br />\n                </ActionText>\n              </ActionList>\n              <ActionList>\n                <ActionTitle>Instant Try Now</ActionTitle>\n                <ActionText>\n                  <a onClick={() => changeCreateFromTemplateDialogOpen(true)}>\n                    Open a template\n                  </a>{\" \"}\n                  to see how the UDT could work for your data.\n                </ActionText>\n              </ActionList>\n            </Grid>\n            <Grid xs={12} item>\n              <BottomSpacer />\n            </Grid>\n          </Grid>\n        </Content>\n      </ContentContainer>\n    </div>\n  )\n}\n","export default `\n{\n  \"interface\": {\n    \"type\": \"data_entry\",\n    \"description\": \"# Markdown description here\",\n    \"surveyjs\": {\n      \"questions\": [\n        {\n          \"type\": \"text\",\n          \"name\": \"question1\",\n          \"title\": \"Some question title here\"\n        }\n      ]\n    }\n  },\n  \"taskData\": []\n}\n`.trim()\n","export default function getTaskDescription(taskDataItem) {\n  const { description, imageUrl, url, pdfUrl } = taskDataItem\n  if (description) return description\n  if (imageUrl) return `![${imageUrl}](${imageUrl})`\n  if (pdfUrl)\n    return (\n      `[PDF Link](${pdfUrl})` +\n      `<object data=\"${pdfUrl.replace(\n        \"http://\",\n        \"https://\"\n      )}\" type=\"application/pdf\" width=\"100%\" height=\"600px\"></object>`\n    )\n  if (url) return `Use this [Link](${url})`\n  return null\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  linkButtonContainer: {\n    marginLeft: 8,\n    marginRight: 8\n  },\n  linkButton: {\n    textTransform: \"none\",\n    cursor: \"pointer\",\n    textDecoration: \"underline\"\n  }\n})\n\nexport default ({ onClick, text }: { onClick: Function, text: string }) => {\n  const c = useStyles()\n  return (\n    <span className={c.linkButtonContainer}>\n      (\n      <span onClick={onClick} className={c.linkButton}>\n        {text}\n      </span>\n      )\n    </span>\n  )\n}\n","// @flow\n\nimport React, { useState } from \"react\"\nimport { makeStyles } from \"@material-ui/core\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Button from \"@material-ui/core/Button\"\nimport ReactMarkdown from \"react-markdown\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport ScatterPlotIcon from \"@material-ui/icons/ScatterPlot\"\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport LeftIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport InnerCircleIcon from \"@material-ui/icons/RadioButtonChecked\"\nimport CircleIcon from \"@material-ui/icons/RadioButtonUnchecked\"\nimport CheckCircle from \"@material-ui/icons/CheckCircle\"\nimport Typography from \"@material-ui/core/Typography\"\nimport GithubIcon from \"../Header/GithubIcon.js\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Drawer from \"@material-ui/core/Drawer\"\nimport Divider from \"@material-ui/core/Divider\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\nimport LinkButton from \"./LinkButton\"\nimport range from \"lodash/range\"\n\nconst useStyles = makeStyles(theme => ({\n  footer: {\n    backgroundColor: \"#fff\",\n    marginTop: 40\n  },\n  footerContent: {\n    alignItems: \"center\",\n    padding: 20,\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  },\n  footerBorder: {\n    borderTop: \"1px solid #ccc\",\n    marginLeft: 20,\n    marginRight: 20\n  },\n  footerCount: {\n    display: \"inline-flex\"\n  },\n  allSamplesButton: {\n    color: \"#fff\",\n    border: \"1px solid rgba(255,255,255,0.5)\",\n    marginRight: 10,\n    paddingLeft: 8\n  },\n  sampleIcon: {\n    marginRight: 8\n  },\n  menuButton: {\n    marginRight: 8,\n    color: \"#fff\"\n  },\n  grow: {\n    flexGrow: 1\n  },\n  buttons: {\n    \"& > *\": {\n      margin: 4\n    }\n  },\n  description: {\n    padding: 10,\n    \"& img\": {\n      maxWidth: \"calc(100% - 16px)\",\n      marginLeft: 8,\n      marginRight: 8,\n      maxHeight: 600\n    }\n  },\n  sectionHeader: {\n    fontWeight: 700,\n    fontSize: 12,\n    padding: 10,\n    paddingTop: 16,\n    textTransform: \"uppercase\",\n    color: colors.grey[600]\n  },\n  content: {\n    padding: 10\n    // minHeight: \"calc(100vh - 200px)\"\n  }\n}))\n\nexport const SampleContainer = ({\n  hideDescription: defaultHideDescription = false,\n  lastSampleExitText,\n  onExit,\n  requireCompleteToPressNext = false,\n  taskData,\n  minContentHeight,\n  currentSampleIndex,\n  totalSamples,\n  onChangeSample,\n  taskOutput = [],\n  description,\n  children\n}) => {\n  const c = useStyles()\n  const [hideDescription, changeHideDescription] = useState(\n    defaultHideDescription\n  )\n  const [sampleDrawerOpen, changeSampleDrawerOpen] = useState(false)\n  return (\n    <>\n      <Grid container>\n        {!hideDescription && (\n          <Grid item xs={12} sm={12} md={6}>\n            <div className={c.sectionHeader}>\n              Description\n              <LinkButton\n                onClick={() => changeHideDescription(true)}\n                text=\"hide\"\n              />\n            </div>\n            <div className={c.description}>\n              <ReactMarkdown escapeHtml={false} source={description} />\n            </div>\n          </Grid>\n        )}\n        <Grid item xs={12} sm={12} md={hideDescription ? 12 : 6}>\n          <div className={c.sectionHeader}>\n            Sample {currentSampleIndex + 1}/{totalSamples}\n            {hideDescription && (\n              <LinkButton\n                onClick={() => changeHideDescription(false)}\n                text=\"show description\"\n              />\n            )}\n            {totalSamples > 1 && (\n              <LinkButton\n                onClick={() => changeSampleDrawerOpen(true)}\n                text=\"view all\"\n              />\n            )}\n            {onExit && (\n              <LinkButton onClick={() => onExit()} text=\"exit without saving\" />\n            )}\n          </div>\n          <div style={{ minHeight: minContentHeight }} className={c.content}>\n            {children}\n          </div>\n        </Grid>\n        {totalSamples > 1 && (\n          <Grid item xs={12}>\n            <div className={c.footer}>\n              <div className={c.footerBorder} />\n              <div className={c.footerContent}>\n                <Button\n                  onClick={() =>\n                    onChangeSample(\n                      (currentSampleIndex - 1 + totalSamples) % totalSamples\n                    )\n                  }\n                >\n                  <LeftIcon /> Prev Sample\n                </Button>\n                <Button\n                  onClick={() => changeSampleDrawerOpen(true)}\n                  className={c.footerCount}\n                >\n                  {currentSampleIndex + 1} / {totalSamples}\n                </Button>\n                <Button\n                  disabled={\n                    requireCompleteToPressNext &&\n                    !taskOutput[currentSampleIndex]\n                  }\n                  onClick={() =>\n                    onChangeSample((currentSampleIndex + 1) % totalSamples)\n                  }\n                >\n                  {requireCompleteToPressNext && !taskOutput[currentSampleIndex]\n                    ? \"Save to Continue\"\n                    : \"Next Sample\"}\n                  <RightIcon />\n                </Button>\n              </div>\n            </div>\n          </Grid>\n        )}\n      </Grid>\n      <Drawer\n        open={sampleDrawerOpen}\n        anchor=\"left\"\n        onClose={() => changeSampleDrawerOpen(false)}\n      >\n        <List style={{ minWidth: 300 }}>\n          <ListSubheader>Samples</ListSubheader>\n          {range(0, totalSamples).map(i => (\n            <ListItem\n              style={{\n                backgroundColor:\n                  i === currentSampleIndex ? colors.grey[200] : undefined\n              }}\n              button\n              onClick={() => onChangeSample(i)}\n            >\n              <ListItemIcon\n                style={{\n                  color: i === currentSampleIndex ? colors.blue[500] : undefined\n                }}\n              >\n                {taskOutput[i] ? <CheckCircle /> : <CircleIcon />}\n              </ListItemIcon>\n              <ListItemText>Sample {i + 1}</ListItemText>\n            </ListItem>\n          ))}\n        </List>\n      </Drawer>\n    </>\n  )\n}\n\nexport default SampleContainer\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nexport const TextClassification = props => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const initialLabels =\n    props.taskOutput && props.taskOutput[currentSampleIndex]\n      ? [props.taskOutput[currentSampleIndex].label] ||\n        props.taskOutput[currentSampleIndex].labels\n      : undefined\n  let labels = props.interface.labels\n    .map(l =>\n      typeof l === \"string\" ? { id: l, description: l, displayName: l } : l\n    )\n    .map(l => (!l.displayName ? { ...l, displayName: l.id } : l))\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={sampleIndex => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        type=\"label-document\"\n        labels={labels}\n        multipleLabels={props.interface.multiple}\n        document={props.taskData[currentSampleIndex].document}\n        initialLabels={initialLabels}\n        onFinish={result => {\n          if (typeof result === \"string\") result = { label: result }\n          else result = { labels: result }\n          props.onSaveTaskOutputItem(currentSampleIndex, result)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default TextClassification\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nconst simpleSequenceToEntitySequence = simpleSeq => {\n  const entSeq = []\n  let charsPassed = 0\n  for (const seq of simpleSeq) {\n    if (seq.label) {\n      entSeq.push({\n        text: seq.text,\n        label: seq.label,\n        start: charsPassed,\n        end: charsPassed + seq.text.length\n      })\n    }\n    charsPassed += seq.text.length\n  }\n  return entSeq\n}\n\nconst entitySequenceToSimpleSeq = (doc, entSeq) => {\n  if (!entSeq) return undefined\n  const simpleSeq = []\n  entSeq = [...entSeq]\n  entSeq.sort((a, b) => a.start - b.start)\n  let nextEntity = 0\n  for (let i = 0; i < doc.length; i++) {\n    if ((entSeq[nextEntity] || {}).start === i) {\n      simpleSeq.push({\n        text: entSeq[nextEntity].text,\n        label: entSeq[nextEntity].label\n      })\n      i = entSeq[nextEntity].end\n      nextEntity += 1\n    } else {\n      if (simpleSeq.length === 0 || simpleSeq[simpleSeq.length - 1].label) {\n        simpleSeq.push({ text: doc[i] })\n      } else {\n        simpleSeq[simpleSeq.length - 1].text += doc[i]\n      }\n    }\n  }\n  return simpleSeq\n}\n\nexport const TextEntityRecognition = props => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const initialSequence =\n    props.taskOutput && props.taskOutput[currentSampleIndex]\n      ? entitySequenceToSimpleSeq(\n          props.taskData[currentSampleIndex].document,\n          props.taskOutput[currentSampleIndex].entities\n        )\n      : undefined\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={sampleIndex => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={currentSampleIndex}\n        type=\"label-sequence\"\n        document={props.taskData[currentSampleIndex].document}\n        labels={props.interface.labels}\n        initialSequence={initialSequence}\n        onFinish={result => {\n          props.onSaveTaskOutputItem(currentSampleIndex, {\n            entities: simpleSequenceToEntitySequence(result)\n          })\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default TextEntityRecognition\n","// @flow\n\n// RIA = React Image Annotate\n\nexport function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function getRandomColor() {\n  var h = getRandomInt(0, 360)\n  var s = 100\n  var l = 50\n  return \"hsl(\"\n    .concat(h.toString(), \",\")\n    .concat(s.toString(), \"%,\")\n    .concat(l.toString(), \"%)\")\n}\n\nexport const rid = () =>\n  Math.random()\n    .toString()\n    .split(\".\")[1]\n\nexport const convertToRIARegionFmt = region => {\n  switch (region.regionType) {\n    case \"bounding-box\": {\n      return {\n        id: rid(),\n        cls: region.classification,\n        tags: region.labels,\n        color: region.color || getRandomColor(),\n        type: \"box\",\n        x: region.centerX - region.width / 2,\n        y: region.centerY - region.height / 2,\n        w: region.width,\n        h: region.height\n      }\n    }\n    case \"point\": {\n      return {\n        id: rid(),\n        type: \"point\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        x: region.x,\n        y: region.y\n      }\n    }\n    case \"polygon\": {\n      return {\n        id: rid(),\n        type: \"polygon\",\n        tags: region.labels,\n        cls: region.classification,\n        color: region.color || getRandomColor(),\n        open: false,\n        points: region.points.map(p => [p.x, p.y])\n      }\n    }\n    case \"line\":\n    case \"pixel-mask\": {\n      throw new Error(`Unsupported region \"${JSON.stringify(region)}\"`)\n    }\n  }\n}\n\nexport const convertFromRIARegionFmt = riaRegion => {\n  switch (riaRegion.type) {\n    case \"point\": {\n      return {\n        regionType: \"point\",\n        x: riaRegion.x,\n        y: riaRegion.y,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color\n      }\n    }\n    case \"box\": {\n      return {\n        regionType: \"bounding-box\",\n        centerX: riaRegion.x + riaRegion.w / 2,\n        centerY: riaRegion.y + riaRegion.h / 2,\n        width: riaRegion.w,\n        height: riaRegion.h,\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color\n      }\n    }\n    case \"polygon\": {\n      return {\n        regionType: \"polygon\",\n        classification: riaRegion.cls,\n        labels: riaRegion.tags,\n        color: riaRegion.color,\n        points: riaRegion.points.map(([x, y]) => ({ x, y }))\n      }\n    }\n  }\n  throw new Error(`Unsupported riaRegion \"${JSON.stringify(riaRegion)}\"`)\n}\n\nexport const convertToRIAImageFmt = ({\n  title,\n  taskDatum: td,\n  index: i,\n  output\n}) => {\n  td = td || {}\n  const regions = !output\n    ? undefined\n    : Array.isArray(output)\n    ? output.map(convertToRIARegionFmt)\n    : [convertToRIARegionFmt(output)]\n\n  if (td.imageUrl) {\n    return {\n      src: td.imageUrl,\n      name: title || `Sample ${i}`,\n      regions\n    }\n  } else if (td.videoUrl && td.videoFrameAt !== undefined) {\n    return {\n      src: td.videoUrl,\n      frameTime: td.videoFrameAt,\n      name: title || `Sample ${i}`,\n      regions\n    }\n  }\n  throw new Error(`Task Datum not supported \"${JSON.stringify(td)}\"`)\n}\n\nexport const convertToRIAKeyframes = keyframes => {\n  const newKeyframes = {}\n  for (const key in keyframes) {\n    newKeyframes[key] = {\n      regions: keyframes[key].regions.map(convertToRIARegionFmt)\n    }\n  }\n  return newKeyframes\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Annotator from \"react-image-annotate\"\nimport isEqual from \"lodash/isEqual\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  rid,\n  convertFromRIARegionFmt,\n  convertToRIARegionFmt,\n  convertToRIAImageFmt\n} from \"../../utils/ria-format.js\"\n\nconst useStyles = makeStyles({})\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: \"create-polygon\",\n  \"full-segmentation\": \"create-polygon\",\n  point: \"create-point\"\n}\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem\n}) => {\n  const c = useStyles()\n  const [selectedIndex, changeSelectedIndex] = useState(0)\n\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n\n  const labelProps = useMemo(\n    () =>\n      isClassification\n        ? {\n            regionClsList: (iface.availableLabels || []).map(l =>\n              typeof l === \"string\" ? l : l.id\n            )\n          }\n        : {\n            regionTagList: (iface.availableLabels || []).map(l =>\n              typeof l === \"string\" ? l : l.id\n            )\n          },\n    [isClassification]\n  )\n\n  const multipleRegions =\n    iface.multipleRegions || iface.multipleRegions === undefined\n\n  const onExit = useEventCallback(output => {\n    const regionMat = (output.images || [])\n      .map(img => img.regions)\n      .map(riaRegions => (riaRegions || []).map(convertFromRIARegionFmt))\n\n    for (let i = 0; i < regionMat.length; i++) {\n      if (multipleRegions) {\n        onSaveTaskOutputItem(i, regionMat[i])\n      } else {\n        onSaveTaskOutputItem(i, regionMat[i][0])\n      }\n    }\n    if (containerProps.onExit) containerProps.onExit()\n  })\n\n  const images = useMemo(\n    () =>\n      taskData.map((taskDatum, index) =>\n        convertToRIAImageFmt({\n          title: containerProps.datasetName,\n          taskDatum,\n          output: taskOutput[index],\n          index\n        })\n      ),\n    [taskData]\n  )\n\n  const enabledTools = useMemo(\n    () =>\n      [\"select\"].concat(\n        regionTypesAllowed.map(rt => regionTypeToTool[rt]).filter(Boolean)\n      ),\n    [regionTypesAllowed]\n  )\n  console.log({\n    selectedImage: taskData[selectedIndex].imageUrl,\n    taskDescription: iface.description,\n    ...labelProps,\n    enabledTools: enabledTools,\n    images,\n    onExit\n  })\n\n  return (\n    <div style={{ height: \"calc(100vh - 70px)\" }}>\n      <Annotator\n        selectedImage={taskData[selectedIndex].imageUrl}\n        taskDescription={iface.description}\n        {...labelProps}\n        enabledTools={enabledTools}\n        images={images}\n        onExit={onExit}\n      />\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\"\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport without from \"lodash/without\"\n\nconst brightColors = [\n  colors.blue[600],\n  colors.green[600],\n  colors.red[600],\n  colors.deepOrange[600],\n  colors.pink[600],\n  colors.teal[600],\n  colors.deepPurple[600],\n  colors.indigo[600],\n  colors.blue[600],\n  colors.cyan[600],\n  colors.purple[600]\n]\n\nconst letters = \"abcdefghijklmnopqrstuvwxyz1234567890\".split(\"\")\nconst getRandomColor = label => {\n  const hashInt = label.id\n    .split(\"\")\n    .reduce((acc, v, i) => acc + (letters.indexOf(v) + 1), 0)\n  return brightColors[hashInt % brightColors.length]\n}\n\nconst Container = styled(\"div\")({ maxWidth: \"100vw\" })\n\nconst ImageContainer = styled(\"div\")({\n  maxHeight: \"50vh\"\n})\n\nconst Image = styled(\"img\")({\n  display: \"inline-block\",\n  width: \"100%\",\n  height: \"100%\",\n  maxHeight: \"50vh\",\n  objectFit: \"contain\"\n})\n\nconst Nav = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"center\",\n  marginTop: 4\n})\nconst NavItem = styled(\"div\")({\n  backgroundColor: \"#000\",\n  color: \"#fff\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  \"& > span\": {\n    padding: 16\n  }\n})\nconst NavButton = styled(Button)({\n  color: \"#fff\",\n  padding: 8,\n  paddingLeft: 16,\n  paddingRight: 16\n})\n\nconst ButtonsContainer = styled(\"div\")({\n  paddingLeft: 50,\n  paddingRight: 50,\n  marginTop: 8,\n  textAlign: \"center\"\n})\n\nconst CheckButton = styled(Button)({\n  margin: 8,\n  color: \"#fff\",\n  fontSize: 18,\n  paddingRight: 16,\n  transition: \"transform 50ms ease\"\n})\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  sampleIndex: globalSampleIndex,\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem\n}) => {\n  const [sampleIndex, changeSampleIndex] = useState(0)\n  const [enlargedLabel, changeEnlargedLabel] = useState(null)\n  const [currentOutput, changeCurrentOutput] = useState(emptyArr)\n  const labels = useMemo(\n    () =>\n      iface.availableLabels.map(l =>\n        typeof l === \"string\" ? { id: l, description: l } : l\n      ),\n    [iface.availableLabels]\n  )\n\n  const onDone = useEventCallback(newOutput => {\n    if (containerProps.onExit) containerProps.onExit()\n  })\n  const onNext = useEventCallback(newOutput => {\n    onSaveTaskOutputItem(sampleIndex, newOutput || currentOutput)\n    if (sampleIndex !== taskData.length - 1) {\n      changeSampleIndex(sampleIndex + 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-next\")\n    }\n  })\n  const onPrev = useEventCallback(() => {\n    if (sampleIndex > 0) {\n      changeSampleIndex(sampleIndex - 1)\n    } else {\n      if (containerProps.onExit) containerProps.onExit(\"go-to-previous\")\n    }\n  })\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      changeEnlargedLabel(null)\n    }, 100)\n    return () => clearTimeout(timeout)\n  }, [enlargedLabel])\n\n  const onClickLabel = useEventCallback(label => {\n    changeEnlargedLabel(label)\n    let newOutput\n    if ((currentOutput || []).includes(label.id)) {\n      newOutput = without(currentOutput, label.id)\n    } else {\n      if (iface.allowMultiple) {\n        newOutput = currentOutput.concat([label.id])\n      } else {\n        newOutput = [label.id]\n      }\n    }\n\n    changeCurrentOutput(newOutput)\n    if (!iface.allowMultiple && newOutput.length > 0) {\n      onNext(newOutput)\n    }\n  })\n\n  useEffect(() => {\n    let newOutput = (taskOutput || [])[sampleIndex]\n    if (!newOutput) newOutput = []\n    if (typeof newOutput === \"string\") newOutput = [newOutput]\n    changeCurrentOutput(newOutput)\n  }, [sampleIndex, globalSampleIndex])\n\n  const [hotkeyMap, labelKeyMap] = useMemo(() => {\n    const hotkeyMap = {\n      \" \": onNext,\n      backspace: onPrev,\n      enter: onDone,\n      rightarrow: onNext,\n      leftarrow: onPrev\n    }\n    const labelKeyMap = {}\n    for (let label of labels) {\n      const nextAvailableLetter = label.id\n        .split(\"\")\n        .filter(l => letters.includes(l))\n        .find(l => !hotkeyMap[l.toLowerCase()])\n      if (!nextAvailableLetter) continue\n      hotkeyMap[nextAvailableLetter] = () => onClickLabel(label)\n      labelKeyMap[label.id] = nextAvailableLetter\n    }\n    return [hotkeyMap, labelKeyMap]\n  }, [labels])\n\n  useEffect(() => {\n    const onKeyDown = e => {\n      const key = e.key.toLowerCase()\n      if (hotkeyMap[key]) {\n        hotkeyMap[key]()\n      }\n    }\n    window.addEventListener(\"keydown\", onKeyDown)\n    return () => {\n      window.removeEventListener(\"keydown\", onKeyDown)\n    }\n  }, [hotkeyMap])\n\n  return (\n    <Container>\n      <ImageContainer>\n        <Image src={taskData[sampleIndex].imageUrl} />\n      </ImageContainer>\n      <Nav>\n        <NavItem>\n          <NavButton onClick={onPrev}>Prev (backspace)</NavButton>\n        </NavItem>\n        {taskData.length > 1 ? (\n          <NavItem>\n            <span>\n              ({sampleIndex + 1}/{taskData.length})\n            </span>\n          </NavItem>\n        ) : globalSampleIndex !== undefined ? (\n          <NavItem>\n            <span>[{globalSampleIndex}]</span>\n          </NavItem>\n        ) : null}\n        <NavItem>\n          <NavButton onClick={onNext}>Next (space)</NavButton>\n        </NavItem>\n        <NavItem>\n          <NavButton onClick={onDone}>Done (enter)</NavButton>\n        </NavItem>\n      </Nav>\n      <ButtonsContainer>\n        {labels.map(label => (\n          <CheckButton\n            key={label.id}\n            onClick={() => onClickLabel(label)}\n            style={{\n              backgroundColor: getRandomColor(label),\n              transform: enlargedLabel === label ? \"scale(1.1,1.1)\" : undefined\n            }}\n          >\n            <Checkbox\n              style={{ color: \"#fff\" }}\n              checked={currentOutput.includes(label.id)}\n            />\n            {label.id}\n            {labelKeyMap[label.id] ? ` (${labelKeyMap[label.id]})` : \"\"}\n          </CheckButton>\n        ))}\n      </ButtonsContainer>\n    </Container>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useMemo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Annotator from \"react-image-annotate\"\nimport isEqual from \"lodash/isEqual\"\nimport useEventCallback from \"use-event-callback\"\nimport {\n  rid,\n  convertFromRIARegionFmt,\n  convertToRIARegionFmt,\n  convertToRIAKeyframes\n} from \"../../utils/ria-format.js\"\n\nconst useStyles = makeStyles({})\n\nconst regionTypeToTool = {\n  \"bounding-box\": \"create-box\",\n  polygon: \"create-polygon\",\n  \"full-segmentation\": \"create-polygon\",\n  point: \"create-point\"\n}\n\nconst [emptyObj, emptyArr] = [{}, []]\n\nexport default ({\n  interface: iface,\n  taskData = emptyArr,\n  taskOutput = emptyObj,\n  containerProps = emptyObj,\n  onSaveTaskOutputItem\n}) => {\n  const c = useStyles()\n  const [selectedIndex, changeSelectedIndex] = useState(0)\n\n  const { regionTypesAllowed = [\"bounding-box\"] } = iface\n\n  const isClassification = !Boolean(iface.multipleRegionLabels)\n\n  const labelProps = useMemo(\n    () =>\n      isClassification\n        ? {\n            regionClsList: (iface.availableLabels || []).map(l =>\n              typeof l === \"string\" ? l : l.id\n            )\n          }\n        : {\n            regionTagList: (iface.availableLabels || []).map(l =>\n              typeof l === \"string\" ? l : l.id\n            )\n          },\n    [isClassification]\n  )\n\n  const multipleRegions =\n    iface.multipleRegions || iface.multipleRegions === undefined\n\n  const onExit = useEventCallback(output => {\n    const newKeyframes = {}\n    for (const key in output.keyframes) {\n      newKeyframes[key] = {\n        regions: output.keyframes[key].regions.map(convertFromRIARegionFmt)\n      }\n    }\n    onSaveTaskOutputItem(0, { keyframes: newKeyframes })\n    if (containerProps.onExit) containerProps.onExit()\n  })\n\n  const enabledTools = useMemo(\n    () =>\n      [\"select\"].concat(\n        regionTypesAllowed.map(rt => regionTypeToTool[rt]).filter(Boolean)\n      ),\n    [regionTypesAllowed]\n  )\n\n  // TODO fix by adding some way of going to the \"next\" video\n  if (taskData.length > 1) {\n    return \"Video segmentation is currently limited to only a single video per selection\"\n  }\n\n  if (taskData.length === 0) return \"taskData[0] with videoUrl is required\"\n  if (!taskData[0].videoUrl) return \"taskData[0] must have videoUrl\"\n\n  return (\n    <div style={{ height: \"calc(100vh - 70px)\" }}>\n      <Annotator\n        taskDescription={iface.description}\n        {...labelProps}\n        enabledTools={enabledTools}\n        keyframes={convertToRIAKeyframes(\n          ((taskOutput || [])[0] || {}).keyframes\n        )}\n        videoName={taskData[0].customId || \"\"}\n        videoTime={0}\n        videoSrc={taskData[0].videoUrl}\n        onExit={onExit}\n      />\n    </div>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport NLPAnnotator from \"react-nlp-annotate/components/NLPAnnotator\"\n\nexport default props => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={sampleIndex => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <NLPAnnotator\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        type=\"transcribe\"\n        audio={props.taskData[currentSampleIndex].audioUrl}\n        phraseBank={props.phraseBank}\n        initialTranscriptionText={\n          (props.taskOutput || [])[currentSampleIndex] || \"\"\n        }\n        onFinish={result => {\n          props.onSaveTaskOutputItem(currentSampleIndex, result)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n","import React, { useState } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\n\nexport const DataEntry = props => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={sampleIndex => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <Survey\n        key={(props.sampleIndex || 0) + currentSampleIndex}\n        variant=\"flat\"\n        form={\n          props.taskData[currentSampleIndex].surveyjs ||\n          props.interface.surveyjs\n        }\n        defaultAnswers={\n          props.taskOutput && props.taskOutput[currentSampleIndex]\n            ? props.taskOutput[currentSampleIndex]\n            : undefined\n        }\n        completeText=\"Save & Next\"\n        onFinish={answers => {\n          props.onSaveTaskOutputItem(currentSampleIndex, answers)\n          if (props.containerProps.onExit)\n            props.containerProps.onExit(\"go-to-next\")\n        }}\n      />\n    </SampleContainer>\n  )\n}\n\nexport default DataEntry\n","// @flow\n\nimport React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  root: {\n    padding: 50,\n    textAlign: \"center\"\n  },\n  title: {\n    margin: 50\n  },\n  explain: {}\n})\n\nexport default ({ title, description, children }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      <Typography variant=\"h3\" component=\"div\" className={c.title}>\n        {title}\n      </Typography>\n      <Typography variant=\"h5\" component=\"div\" className={c.explain}>\n        {description || children}\n      </Typography>\n    </div>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport BadOHA from \"../BadOHA\"\n\nexport default () => {\n  return (\n    <BadOHA title=\"No Samples to Show\">\n      Make sure that <code>taskData</code> is defined and not empty.\n      <br />\n      <br />\n      Need help setting up? <a href=\"#\">Check out this tutorial.</a>\n    </BadOHA>\n  )\n}\n","import React from \"react\"\n\nimport RemoveRedEye from \"@material-ui/icons/RemoveRedEye\"\nimport TextFormat from \"@material-ui/icons/TextFormat\"\nimport Edit from \"@material-ui/icons/Edit\"\nimport OndemandVideo from \"@material-ui/icons/OndemandVideo\"\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\nimport Help from \"@material-ui/icons/Help\"\nimport ThreeDRotation from '@material-ui/icons/ThreeDRotation';\n\nexport default ({ type, ...props }) => {\n  switch (type) {\n    case \"image_label\":\n    case \"image_segmentation\":\n      return <RemoveRedEye {...props} />\n    case \"audio_transcription\":\n      return <Audiotrack {...props} />\n    case \"data_entry\":\n      return <Edit {...props} />\n    case \"text_entity_recognition\":\n      return <TextFormat {...props} />\n    case \"3d_bounding_box\":\n      return <ThreeDRotation {...props} />\n    default:\n      return <Help {...props} />\n  }\n}\n","import React, { useState } from \"react\"\nimport getTaskDescription from \"../../utils/get-task-description.js\"\nimport SampleContainer from \"../SampleContainer\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport Button from \"@material-ui/core/Button\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport InterfaceIcon from \"../InterfaceIcon\"\nimport KeyboardArrowRightIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport Box from \"@material-ui/core/Box\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\n\nconst Title = styled(\"div\")({\n  fontSize: 18,\n  fontWeight: \"bold\",\n  color: colors.grey[700],\n  borderBottom: `1px solid ${colors.grey[300]}`,\n  paddingBottom: 8,\n  marginBottom: 8,\n  paddingLeft: 8\n})\nconst StyledButton = styled(Button)({\n  display: \"flex\",\n  textAlign: \"left\",\n  justifyContent: \"flex-start\",\n  marginTop: 8\n})\n\nexport const Composite = props => {\n  const [currentSampleIndex, changeCurrentSampleIndex] = useState(0)\n  const {\n    interface: { fields }\n  } = props\n  const [selectedField, changeSelectedField] = useState()\n  const [taskOutput, changeTaskOutput] = useState(props.taskOutput)\n\n  if (selectedField) {\n    return (\n      <UniversalDataViewer\n        oha={{\n          interface: selectedField.interface,\n          taskOutput: [\n            props.taskOutput\n              ? (props.taskOutput[currentSampleIndex] || {})[\n                  selectedField.fieldName\n                ]\n              : null\n          ],\n          taskData: [props.taskData[currentSampleIndex]]\n        }}\n        onSaveTaskOutputItem={(indexZero, output) => {\n          props.onSaveTaskOutputItem(currentSampleIndex, {\n            ...(props.taskOutput ? props.taskOutput[currentSampleIndex] : {}),\n            [selectedField.fieldName]: output\n          })\n          changeSelectedField(null)\n        }}\n      />\n    )\n  }\n\n  console.log(\"taskOutput\", props.taskOutput)\n\n  return (\n    <SampleContainer\n      {...props.containerProps}\n      currentSampleIndex={currentSampleIndex}\n      totalSamples={props.taskData.length}\n      taskOutput={props.taskOutput}\n      description={\n        getTaskDescription(props.taskData[currentSampleIndex]) ||\n        props.interface.description\n      }\n      onChangeSample={sampleIndex => changeCurrentSampleIndex(sampleIndex)}\n    >\n      <Title>Fields</Title>\n      {fields.map((field, index) => (\n        <StyledButton\n          key={field.fieldName}\n          onClick={() => {\n            changeSelectedField({ ...field, index })\n          }}\n          fullWidth\n          variant=\"outlined\"\n        >\n          <InterfaceIcon\n            style={{ color: colors.grey[500], marginRight: 16 }}\n            type={field.interface.type}\n          />\n          {field.fieldName}\n          <Box flexGrow={1} />\n          <Checkbox\n            checked={Boolean(\n              (props.taskOutput\n                ? props.taskOutput[currentSampleIndex] || {}\n                : {})[field.fieldName]\n            )}\n          />\n          <KeyboardArrowRightIcon />\n        </StyledButton>\n      ))}\n      <StyledButton\n        onClick={() => props.containerProps.onExit(\"go-to-next\")}\n        fullWidth\n        variant=\"outlined\"\n      >\n        <KeyboardArrowRightIcon\n          style={{ color: colors.grey[500], marginRight: 16 }}\n        />\n        Next\n        <Box flexGrow={1} />\n        <Box height=\"42px\" />\n        <KeyboardArrowRightIcon />\n      </StyledButton>\n    </SampleContainer>\n  )\n}\n\nexport default Composite\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport TextClassification from \"../TextClassification\"\nimport TextEntityRecognition from \"../TextEntityRecognition\"\nimport ImageSegmentation from \"../ImageSegmentation\"\nimport ImageClassification from \"../ImageClassification\"\nimport VideoSegmentation from \"../VideoSegmentation\"\nimport AudioTranscription from \"../AudioTranscription\"\nimport DataEntry from \"../DataEntry\"\nimport EmptySampleContainer from \"../EmptySampleContainer\"\nimport Composite from \"../Composite\"\nimport BadOHA from \"../BadOHA\"\n\nexport const UniversalDataViewer = ({\n  oha,\n  onExit,\n  hideHeader,\n  hideDescription,\n  datasetName,\n  requireCompleteToPressNext,\n  onSaveTaskOutputItem\n}) => {\n  // TODO type check w/ superstruct against oha\n  const containerProps = useMemo(\n    () => ({\n      hideHeader,\n      hideDescription,\n      datasetName,\n      requireCompleteToPressNext,\n      onExit\n    }),\n    [\n      hideHeader,\n      hideDescription,\n      requireCompleteToPressNext,\n      datasetName,\n      onExit\n    ]\n  )\n\n  if (!oha) {\n    return (\n      <BadOHA\n        title=\"Null OHA\"\n        description=\"Your OHA file isn't defined for some reason.\"\n      />\n    )\n  }\n\n  if (!oha.taskData || oha.taskData.length === 0) {\n    return <EmptySampleContainer />\n  }\n\n  switch (oha.interface.type) {\n    case \"data_entry\":\n      return (\n        <DataEntry\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_classification\":\n      return (\n        <TextClassification\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"text_entity_recognition\":\n      return (\n        <TextEntityRecognition\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"image_segmentation\":\n      return (\n        <ImageSegmentation\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"image_classification\":\n      return (\n        <ImageClassification\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"video_segmentation\":\n      return (\n        <VideoSegmentation\n          containerProps={containerProps}\n          {...oha}\n          onExit={onExit}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n        />\n      )\n    case \"composite\":\n      return (\n        <Composite\n          containerProps={containerProps}\n          {...oha}\n          oha={oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    case \"audio_transcription\":\n      return (\n        <AudioTranscription\n          containerProps={containerProps}\n          {...oha}\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\n          onExit={onExit}\n        />\n      )\n    default:\n      return `\"${oha.interface.type}\" not supported`\n  }\n}\n\nexport default UniversalDataViewer\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  textField: {\n    marginLeft: 8\n  }\n})\n\nconst SAVE_WAIT = 2000\n\nexport default ({ value, onChange }) => {\n  const c = useStyles()\n  const [{ editing, newValue }, changeEditing] = useState({\n    editing: false,\n    newValue: value || \"\"\n  })\n\n  useEffect(() => {\n    changeEditing({ editing, newValue: value })\n  }, [value])\n\n  useEffect(() => {\n    if (!editing) return\n    let listener = e => {\n      if (e.key === \"Enter\") {\n        onChange(newValue)\n        changeEditing({ editing: false })\n      }\n    }\n    window.addEventListener(\"keydown\", listener)\n    return () => {\n      window.removeEventListener(\"keydown\", listener)\n    }\n  }, [editing, newValue])\n\n  useEffect(() => {\n    if (!newValue) return\n    if (editing) {\n      let timeout = setTimeout(\n        () => {\n          onChange(newValue)\n          changeEditing({ editing: false })\n        },\n        value === newValue ? SAVE_WAIT * 5 : SAVE_WAIT\n      )\n\n      return () => clearTimeout(timeout)\n    } else {\n      return () => {}\n    }\n  }, [editing, newValue])\n\n  return (\n    <TextField\n      className={c.textField}\n      label=\"File Name\"\n      variant=\"outlined\"\n      size=\"small\"\n      InputProps={{\n        inputProps: { style: { color: \"#000\" } }\n      }}\n      onKeyDown={e => {\n        if (e.key === \"Enter\") {\n          e.preventDefault()\n          e.stopPropagation()\n          e.target.blur()\n        }\n      }}\n      onKeyPress={e => {\n        e.stopPropagation()\n      }}\n      onChange={e => {\n        changeEditing({\n          editing: true,\n          newValue: e.target.value\n        })\n      }}\n      value={newValue || \"\"}\n    />\n  )\n}\n","// @flow weak\n\nimport React, { memo, useCallback, useReducer, useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport { useLocalStorage } from \"react-use\"\nimport { styled } from \"@material-ui/core/styles\"\nimport range from \"lodash/range\"\nimport * as colors from \"@material-ui/core/colors\"\nimport classNames from \"classnames\"\nimport TablePagination from \"@material-ui/core/TablePagination\"\n\nconst Container = styled(\"div\")({\n  flexWrap: \"wrap\"\n})\nconst SampleDiv = styled(\"div\")({\n  margin: 4,\n  padding: 4,\n  backgroundColor: colors.grey[300],\n  display: \"inline-flex\",\n  fontSize: 11,\n  textAlign: \"center\",\n  justifyContent: \"center\",\n  minWidth: \"3em\",\n  borderRadius: 3,\n  cursor: \"pointer\",\n  userSelect: \"none\",\n  transition: \"box-shadow 200ms ease, transform 200ms ease\",\n  \"&.completed\": {\n    backgroundColor: colors.blue[500],\n    color: \"#fff\"\n  },\n  \"&.selected\": {\n    boxShadow: `0px 0px 2px 1px ${colors.blue[400]}`,\n    transform: \"scale(1.05,1.05)\"\n  }\n})\n\nconst Sample = memo(\n  ({\n    index,\n    onClick,\n    completed,\n    selected,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter\n  }) => {\n    return (\n      <SampleDiv\n        className={classNames({ completed, selected })}\n        onClick={() => onClick(index)}\n        onMouseDown={() => onMouseDown(index)}\n        onMouseUp={() => onMouseUp(index)}\n        onMouseEnter={() => onMouseEnter(index)}\n      >\n        {index}\n      </SampleDiv>\n    )\n  },\n  function(p, n) {\n    return (\n      p.index === n.index &&\n      p.completed === n.completed &&\n      p.selected === n.selected\n    )\n  }\n)\n\nexport default ({ count, completed = [], onClick }) => {\n  const [samplesPerPage, changeSamplesPerPage] = useLocalStorage(\n    \"samplesPerPage\",\n    100\n  )\n  const [sampleOffset, changeSampleOffset] = useLocalStorage(\"sampleOffset\", 0)\n\n  useEffect(() => {\n    if (sampleOffset > count) {\n      changeSampleOffset(0)\n    }\n  }, [])\n\n  const [selectRange, changeSelectRange] = useReducer((state, newValue) => {\n    if (newValue === null) return null\n    if (typeof newValue === \"number\") {\n      if (!state) return null\n      return [Math.min(newValue, state[0]), Math.max(newValue + 1, state[1])]\n    }\n    return newValue\n  }, null)\n\n  const startSelectRange = useCallback(\n    index => changeSelectRange([index, index + 1]),\n    [changeSelectRange]\n  )\n  const moveSelectRange = useCallback(index => changeSelectRange(index), [\n    changeSelectRange\n  ])\n  const endSelectRange = useCallback(() => {}, [changeSelectRange])\n  const checkAndNullifySelectRange = useCallback(\n    e => {\n      if (e.buttons !== 1) {\n        changeSelectRange(null)\n      }\n    },\n    [changeSelectRange]\n  )\n  const onClickMemo = useEventCallback(onClick)\n\n  return (\n    <Container\n      onMouseUp={checkAndNullifySelectRange}\n      onMouseEnter={checkAndNullifySelectRange}\n    >\n      {range(sampleOffset, Math.min(count, sampleOffset + samplesPerPage)).map(\n        i => (\n          <Sample\n            onClick={onClickMemo}\n            key={i}\n            index={i}\n            completed={completed[i]}\n            selected={selectRange && i >= selectRange[0] && i < selectRange[1]}\n            onMouseDown={startSelectRange}\n            onMouseEnter={moveSelectRange}\n            onMouseUp={endSelectRange}\n          />\n        )\n      )}\n      <TablePagination\n        rowsPerPageOptions={[100, 250, 500, 1000, 2000, 10000]}\n        component=\"div\"\n        count={count}\n        rowsPerPage={samplesPerPage}\n        page={Math.floor(sampleOffset / samplesPerPage)}\n        labelRowsPerPage=\"Samples per Page:\"\n        onChangePage={(e, newPage) =>\n          changeSampleOffset(newPage * samplesPerPage)\n        }\n        onChangeRowsPerPage={e => changeSamplesPerPage(+e.target.value)}\n      />\n    </Container>\n  )\n}\n","// @flow weak\nimport React, { useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300\n})\n\nexport default ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n  return (\n    <SimpleDialog\n      title=\"Paste Urls\"\n      open={open}\n      onClose={onClose}\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            onAddSamples(\n              content\n                .split(\"\\n\")\n                .map(l => l.trim())\n                .filter(Boolean)\n                .map(s => {\n                  const extension = s.split(\".\").slice(-1)[0]\n                  switch (extension.toLowerCase()) {\n                    case \"png\":\n                    case \"jpg\":\n                    case \"gif\":\n                    case \"jpeg\":\n                    case \"bmp\": {\n                      return { imageUrl: s }\n                    }\n                    case \"pdf\": {\n                      return { pdfUrl: s }\n                    }\n                    case \"mp3\":\n                    case \"wav\": {\n                      return { audioUrl: s }\n                    }\n                    default: {\n                      // TODO throw error or toast\n                      console.error(\"extension not recognized\")\n                      return null\n                    }\n                  }\n                })\n                .filter(Boolean)\n            )\n          }\n        }\n      ]}\n    >\n      <TextArea\n        onChange={(e, v) => changeContent(e.target.value)}\n        placeholder={\"Paste URLs here\\nOne URL per line\"}\n      />\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { useDropzone } from \"react-dropzone\"\nimport useEventCallback from \"use-event-callback\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst TextArea = styled(\"textarea\")({\n  width: \"100%\",\n  minHeight: 300\n})\n\nconst UploadHover = styled(\"div\")({\n  fontSize: 24,\n  color: colors.grey[600],\n  textAlign: \"center\",\n  padding: 48\n})\n\nconst emptyFunc = () => null\n\nconst ImportTextSnippetsDialog = ({ open, onClose, onAddSamples }) => {\n  const [content, changeContent] = useState(\"\")\n\n  const onDrop = useEventCallback(acceptedFiles => {\n    const { name: fileName } = acceptedFiles[0]\n    const reader = new FileReader()\n    reader.onload = e => {\n      const fileContent = e.target.result\n      if (fileName.endsWith(\"csv\") || fileName.endsWith(\"CSV\")) {\n        changeContent(fileContent.replace(\",\", \"\\n\"))\n      } else {\n        changeContent(fileContent)\n      }\n    }\n    reader.readAsText(acceptedFiles[0])\n  })\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Import Text Snippets\"\n      actions={[\n        {\n          text: \"Add Samples\",\n          onClick: () => {\n            onAddSamples(\n              content\n                .split(\"\\n\")\n                .map(l => l.trim())\n                .filter(Boolean)\n                .map(s => ({ document: s }))\n            )\n          }\n        }\n      ]}\n    >\n      <div {...getRootProps()} onClick={emptyFunc}>\n        <input {...getInputProps()} />\n        {isDragActive ? (\n          <UploadHover>Drop the text or csv file here.</UploadHover>\n        ) : (\n          <TextArea\n            value={content}\n            onChange={(e, v) => changeContent(e.target.value)}\n            placeholder={\n              \"Paste Snippets here\\nOne snippet per line.\\n\\nYou can also drag a text or csv file here.\"\n            }\n          />\n        )}\n      </div>\n    </SimpleDialog>\n  )\n}\n\nexport default ImportTextSnippetsDialog\n","// From: https://github.com/knok/pixabay-cat-images/blob/master/classified-cat-jp-images.txt\n\nexport default `https://cdn.pixabay.com/photo/2017/06/12/19/02/cat-2396473__480.jpg\nhttps://cdn.pixabay.com/photo/2015/06/03/13/13/cats-796437__480.jpg\nhttps://cdn.pixabay.com/photo/2012/11/26/13/58/cat-67345__480.jpg\nhttps://cdn.pixabay.com/photo/2014/09/18/20/17/cat-451377__480.jpg\nhttps://cdn.pixabay.com/photo/2015/01/31/12/36/cat-618470__480.jpg\nhttps://cdn.pixabay.com/photo/2014/07/24/18/40/cat-401124__480.jpg\nhttps://cdn.pixabay.com/photo/2014/04/13/20/49/cat-323262__480.jpg\nhttps://cdn.pixabay.com/photo/2015/02/14/10/16/cat-636172__480.jpg\nhttps://cdn.pixabay.com/photo/2013/10/28/14/30/cat-201855__480.jpg\nhttps://cdn.pixabay.com/photo/2015/04/16/15/21/cat-725793__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/20/13/05/cat-1151519__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/31/21/52/cat-2361787__480.jpg\nhttps://cdn.pixabay.com/photo/2014/10/01/10/46/cat-468232__480.jpg\nhttps://cdn.pixabay.com/photo/2014/04/29/13/19/cat-334383__480.jpg\nhttps://cdn.pixabay.com/photo/2014/01/17/14/53/cat-246933__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/31/21/46/cats-2361762__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/21/22/06/cat-2332444__480.jpg\nhttps://cdn.pixabay.com/photo/2014/03/30/23/35/cat-301720__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/21/22/07/cat-2332451__480.jpg\nhttps://cdn.pixabay.com/photo/2014/08/03/00/51/kitten-408798__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/11/07/27/cat-2303146__480.jpg\nhttps://cdn.pixabay.com/photo/2014/03/30/23/49/cat-301723__480.jpg\nhttps://cdn.pixabay.com/photo/2013/07/18/20/27/cat-165068__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/25/07/40/cat-2342562__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/30/22/27/british-shorthair-2358404__480.jpg\nhttps://cdn.pixabay.com/photo/2012/02/27/16/57/animal-17430__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/06/15/15/cat-2208535__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/18/10/57/cat-2323258__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/18/21/26/cat-1836936__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/19/22/09/cat-2157747__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/21/13/24/red-headed-cat-2248705__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/10/18/52/cat-2219427__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/22/20/54/rest-2335341__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/13/09/46/cat-2309126__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/13/20/53/cat-2310623__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/30/14/14/cat-2188612__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/30/14/57/hunter-2357204__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/12/06/00/cat-2306185__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/23/21/31/cat-2338666__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/03/05/25/cat-2280148__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/08/13/53/cat-2213342__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/22/00/13/cat-2163594__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/13/21/14/british-shorthair-2310671__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/27/09/09/cat-2102418__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/05/16/21/cat-2118990__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/26/15/25/cat-2346301__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/12/11/52/cat-house-physician-2059812__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/14/19/56/british-shorthair-2231188__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/27/08/26/animal-2264818__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/21/16/36/cat-2331692__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/12/19/09/cat-2137810__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/16/18/36/summer-2149911__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/06/19/16/cat-2209109__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/05/10/31/cat-baby-2204590__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/24/17/10/chartreux-2095661__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/13/07/18/cat-2308849__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/18/11/21/cat-2323326__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/06/09/16/cat-2120915__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/23/09/01/cat-2336605__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/21/12/52/animal-1845248__480.jpg\nhttps://cdn.pixabay.com/photo/2017/04/07/18/37/cat-2211609__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/09/15/27/cat-1246659__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/10/14/46/cat-2301015__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/19/10/05/cat-1209067__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/13/09/47/cat-2309127__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/22/07/40/cat-2333413__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/12/01/29/cats-2136245__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/29/10/30/kitten-2353403__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/15/09/59/cat-2314326__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/07/22/49/kitten-1807071__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/13/14/47/cat-2062790__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/16/20/44/cat-1912330__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/06/19/42/cat-1803904__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/15/12/36/cat-1826117__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/27/16/55/cats-1283110__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/30/18/15/cat-1631648__480.jpg\nhttps://cdn.pixabay.com/photo/2017/06/11/11/14/cat-2392058__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/07/14/33/cat-1960537__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/16/10/00/cat-1744750__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/26/14/12/cat-2100306__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/05/21/51/cat-2288326__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/26/15/25/cat-2346303__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/16/19/47/cat-1674990__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/16/10/00/cat-1744749__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/03/09/26/cat-2034833__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/20/05/50/cat-1754702__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/21/11/41/animal-1844835__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/05/18/05/cat-2119283__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/02/18/18/cat-2033451__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/13/19/12/cat-1904907__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/23/15/58/cat-1927512__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/02/41/cat-1898659__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/16/14/40/cat-1598113__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/13/10/34/cat-1514076__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/30/17/27/cat-1941089__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/17/17/16/cat-1398627__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/18/12/29/cat-1678009__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/02/51/cat-1898678__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/23/16/26/cat-2092580__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/06/13/28/cat-1500498__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/18/13/44/cat-1750241__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/19/20/28/cat-2157497__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/14/19/15/cat-2144133__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/19/22/11/cat-2157750__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/11/04/25/cat-1730517__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/23/15/06/cat-2092428__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/29/15/59/small-cat-2185670__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/05/20/08/baby-cat-2119703__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/02/28/cat-1898625__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/13/21/33/cat-1591598__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/10/34/cat-1899127__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/01/13/23/cat-1875282__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/31/19/04/cat-2026479__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/02/45/cat-1898667__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/12/18/34/cat-1589369__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/10/13/00/cat-1897224__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/28/15/23/cat-1865263__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/05/15/58/cats-1716984__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/00/41/cat-1898510__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/13/21/53/cat-1591636__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/00/36/cat-1898497__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/07/22/47/cat-1890583__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/21/18/15/cat-1997911__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/20/20/47/cat-1683387__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/16/12/42/cat-1673924__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/27/10/53/cat-1482258__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/05/20/16/baby-cat-2119755__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/02/55/cat-1898683__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/27/21/31/cat-2180331__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/16/17/25/cat-1674617__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/17/00/53/cat-1675428__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/07/10/03/cat-1805310__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/19/21/04/cat-1403948__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/19/21/18/cat-1403970__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/08/13/10/cat-1504307__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/07/14/36/cat-1805964__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/18/18/42/kittens-1916542__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/27/19/45/animal-1283955__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/12/15/21/cat-1196242__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/24/22/20/cat-1692702__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/07/13/42/nature-1960387__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/24/23/26/cat-1692815__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/11/00/39/cat-1898503__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/23/23/08/cat-1615778__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/18/16/02/natural-1750606__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/11/22/47/cat-2058900__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/23/23/29/cat-1615825__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/17/00/51/cat-1675427__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/18/17/58/cat-1337040__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/02/19/19/cat-1947715__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/12/20/29/cat-1819685__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/29/13/12/cat-1288218__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/13/21/37/cat-1591612__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/12/18/36/cat-1589373__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/16/14/10/cat-1461375__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/13/17/40/pet-1515038__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/25/14/40/cat-1693837__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/13/22/04/cat-1978346__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/16/15/03/cat-1911571__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/17/17/46/cat-1524308__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/29/21/39/cat-2019457__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/11/07/41/cat-1584966__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/24/14/55/cat-1617155__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/15/17/58/cat-1459525__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/16/14/42/cat-1598115__480.jpg\nhttps://cdn.pixabay.com/photo/2017/06/03/19/06/pet-2369442__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/02/00/36/cat-828238__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/18/08/17/cat-2322898__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/04/14/18/cat-2116168__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/06/11/24/cat-1718842__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/09/09/02/cat-1505941__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/23/23/08/cat-1615779__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/10/13/03/cat-1897233__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/01/11/09/cat-1635847__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/31/16/30/cat-2360874__480.jpg\nhttps://cdn.pixabay.com/photo/2017/05/16/21/54/pet-2319130__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/06/15/35/cat-1183083__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/05/18/03/cat-1717252__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/08/17/26/kitten-1083356__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/17/11/35/cat-1144740__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/21/18/54/fear-1533284__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/27/19/21/british-shorthair-2014007__480.jpg\nhttps://cdn.pixabay.com/photo/2015/08/27/21/00/cat-911125__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/01/22/29/cat-1366123__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/06/15/41/cat-1183091__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/12/16/38/cat-1196363__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/22/15/37/cat-2089715__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/24/17/00/chartreux-2095641__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/27/15/11/kitten-1934096__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/05/12/08/white-2118474__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/29/15/59/cat-1288531__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/28/07/11/cat-1547144__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/17/02/29/cat-1096821__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/03/12/26/cat-1074840__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/29/17/21/sleeping-cat-2018788__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/31/15/00/cat-869201__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/28/18/47/cat-864748__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/20/08/36/cat-1754897__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/08/17/38/cat-1578865__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/12/20/32/cats-1040954__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/28/12/16/cat-1166174__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/18/20/07/cat-1678884__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/16/21/57/cat-1046497__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/16/14/48/cat-1598126__480.jpg\nhttps://cdn.pixabay.com/photo/2017/02/16/20/02/cat-2072339__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/08/14/19/cat-1083000__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/15/00/cat-1184916__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/05/19/11/cat-1123124__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/01/19/38/cat-1365643__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/17/14/50/cat-1523929__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/08/01/24/cat-1378520__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/26/20/09/cat-1418261__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/08/17/48/cat-1083393__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/14/19/56/cat-1329622__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/29/07/38/adorable-1868150__480.jpg\nhttps://cdn.pixabay.com/photo/2015/09/08/18/59/cat-930534__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/24/19/56/cat-1159540__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/23/17/32/cat-1275191__480.jpg\nhttps://cdn.pixabay.com/photo/2015/09/20/15/15/cat-948423__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/14/18/43/cat-1329441__480.jpg\nhttps://cdn.pixabay.com/photo/2015/03/18/15/14/cat-679425__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/15/23/24/cat-1910266__480.jpg\nhttps://cdn.pixabay.com/photo/2017/06/15/19/47/cat-2406499__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/15/20/24/cat-1044759__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/25/18/20/cat-1620296__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/06/15/40/cat-1029087__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/07/21/06/cat-1378201__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/26/13/53/cat-1542857__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/03/23/23/cat-1021602__480.jpg\nhttps://cdn.pixabay.com/photo/2015/03/26/09/56/cat-690613__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/14/20/21/kitten-1256216__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/01/19/42/cat-1017455__480.jpg\nhttps://cdn.pixabay.com/photo/2015/10/19/13/09/young-cat-995956__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/14/03/cat-1184747__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/11/12/25/cat-1509583__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/19/09/23/cat-1208988__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/23/00/34/cat-1536107__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/23/12/01/cat-1217434__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/27/10/54/pet-1109666__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/05/18/27/cat-1572896__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/20/04/54/animals-1150920__480.jpg\nhttps://cdn.pixabay.com/photo/2015/04/23/19/57/cat-736561__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/09/17/54/wildcat-1382136__480.jpg\nhttps://cdn.pixabay.com/photo/2015/01/11/16/41/cat-596418__480.jpg\nhttps://cdn.pixabay.com/photo/2015/06/01/23/33/cat-794452__480.jpg\nhttps://cdn.pixabay.com/photo/2015/05/14/11/23/cat-766643__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/07/20/49/cat-1378185__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/12/20/32/kitten-1040955__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/29/14/43/cat-1628424__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/05/01/22/cat-1023576__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/09/16/11/cat-1895171__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/04/10/18/cat-1713960__480.jpg\nhttps://cdn.pixabay.com/photo/2016/11/09/20/34/kittens-1812641__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/29/10/20/cat-1422703__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/08/22/11/cat-1129372__480.jpg\nhttps://cdn.pixabay.com/photo/2014/02/25/17/41/cat-274443__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/28/17/26/cat-1548585__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/10/15/32/black-1320161__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/18/01/47/pet-1264258__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/22/22/52/cat-1409382__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/04/09/57/cat-1371107__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/20/14/49/cat-1607652__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/15/44/cat-1185006__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/04/17/07/cat-1644545__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/07/21/07/cat-1378203__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/26/15/27/cat-1696199__480.jpg\nhttps://cdn.pixabay.com/photo/2014/12/16/15/41/cat-570459__480.jpg\nhttps://cdn.pixabay.com/photo/2015/03/09/07/23/cat-665134__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/06/14/59/cat-1079556__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/04/22/38/cat-1645479__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/10/19/37/cat-1729674__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/23/13/25/cat-1614345__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/19/12/57/cat-1099730__480.jpg\nhttps://cdn.pixabay.com/photo/2015/02/11/12/14/cat-632335__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/02/21/28/cat-1640263__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/31/15/01/cat-869218__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/06/15/14/cat-1079583__480.jpg\nhttps://cdn.pixabay.com/photo/2015/04/13/22/05/cat-721357__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/19/11/14/cat-1466474__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/17/03/27/cat-1397342__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/08/18/05/cat-1034034__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/10/22/58/cat-1584537__480.jpg\nhttps://cdn.pixabay.com/photo/2015/03/09/07/23/young-cat-665133__480.jpg\nhttps://cdn.pixabay.com/photo/2014/11/11/20/50/cat-527418__480.jpg\nhttps://cdn.pixabay.com/photo/2015/10/29/05/40/cat-1011739__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/15/20/27/cat-1044768__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/13/17/55/cat-1091479__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/28/07/31/cat-fishing-in-pool-1547186__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/24/00/43/hangover-1059311__480.jpg\nhttps://cdn.pixabay.com/photo/2015/09/20/17/35/cat-948546__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/03/11/14/cat-1074729__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/01/18/32/black-cat-1636918__480.jpg\nhttps://cdn.pixabay.com/photo/2016/12/03/07/12/cat-1879219__480.jpg\nhttps://cdn.pixabay.com/photo/2015/04/10/08/55/cat-715910__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/13/10/37/cats-1041806__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/01/21/45/cat-1117141__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/07/20/43/cat-1577119__480.jpg\nhttps://cdn.pixabay.com/photo/2015/04/02/06/25/cat-mia-703411__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/03/12/34/cat-1566612__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/20/00/02/cat-1606607__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/29/22/29/cat-866667__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/12/16/21/cat-1196331__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/12/18/01/cat-1040722__480.jpg\nhttps://cdn.pixabay.com/photo/2016/05/13/23/07/cat-1391126__480.jpg\nhttps://cdn.pixabay.com/photo/2015/07/07/01/54/dog-833957__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/05/20/43/cat-1181938__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/19/01/02/cat-1208510__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/15/05/22/cat-1093707__480.jpg\nhttps://cdn.pixabay.com/photo/2015/05/02/22/41/cat-750515__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/17/12/03/cat-1144799__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/24/08/29/hangover-1059663__480.jpg\nhttps://cdn.pixabay.com/photo/2015/08/09/11/39/animal-881447__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/12/18/35/cat-1040771__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/03/20/30/cat-1234968__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/26/13/53/cat-1542856__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/27/13/05/cat-1225500__480.jpg\nhttps://cdn.pixabay.com/photo/2015/05/11/22/23/cat-763213__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/30/16/19/abyssinian-cat-1705659__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/07/01/06/cat-1501706__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/01/20/31/cat-1708291__480.jpg\nhttps://cdn.pixabay.com/photo/2016/08/03/11/48/united-kingdom-shorthair-1566487__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/15/38/cat-1184985__480.jpg\nhttps://cdn.pixabay.com/photo/2015/09/24/17/28/cat-955971__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/09/19/17/cat-1446346__480.jpg\nhttps://cdn.pixabay.com/photo/2017/03/19/10/57/cat-2156185__480.jpg\nhttps://cdn.pixabay.com/photo/2013/10/26/03/39/cat-200954__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/07/21/40/white-1032761__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/12/18/54/cat-1040803__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/26/22/29/domestic-cat-1163352__480.jpg\nhttps://cdn.pixabay.com/photo/2013/11/17/13/11/cat-212028__480.jpg\nhttps://cdn.pixabay.com/photo/2015/10/14/11/25/cat-987528__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/15/14/cat-1184955__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/06/16/09/cat-1079662__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/22/02/59/animal-1534066__480.jpg\nhttps://cdn.pixabay.com/photo/2017/01/06/12/43/cat-1957625__480.jpg\nhttps://cdn.pixabay.com/photo/2016/07/17/21/56/cat-1524846__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/20/21/18/cat-1053885__480.jpg\nhttps://cdn.pixabay.com/photo/2016/06/07/13/03/cat-1441585__480.jpg\nhttps://cdn.pixabay.com/photo/2014/02/28/23/26/cat-277276__480.jpg\nhttps://cdn.pixabay.com/photo/2013/11/05/05/54/cat-205555__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/14/19/51/cat-1329598__480.jpg\nhttps://cdn.pixabay.com/photo/2016/01/06/08/59/cat-1123765__480.jpg\nhttps://cdn.pixabay.com/photo/2015/02/12/20/04/cat-634150__480.jpg\nhttps://cdn.pixabay.com/photo/2016/03/17/19/20/cat-1263659__480.jpg\nhttps://cdn.pixabay.com/photo/2014/09/18/19/19/black-cat-451269__480.jpg\nhttps://cdn.pixabay.com/photo/2014/10/05/19/08/pet-475670__480.jpg\nhttps://cdn.pixabay.com/photo/2016/04/12/20/25/cat-1325335__480.jpg\nhttps://cdn.pixabay.com/photo/2015/10/17/13/46/ice-992542__480.jpg\nhttps://cdn.pixabay.com/photo/2015/02/08/16/30/hangover-628724__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/20/21/30/cat-1053895__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/07/15/24/cat-1184976__480.jpg\nhttps://cdn.pixabay.com/photo/2015/03/04/11/30/british-shorthair-658689__480.jpg\nhttps://cdn.pixabay.com/photo/2016/09/28/06/43/cat-1699876__480.jpg\nhttps://cdn.pixabay.com/photo/2014/05/17/22/46/cat-346604__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/20/22/59/cat-1054032__480.jpg\nhttps://cdn.pixabay.com/photo/2016/10/17/16/21/cat-1748075__480.jpg\nhttps://cdn.pixabay.com/photo/2015/11/15/22/09/red-1044915__480.jpg\nhttps://cdn.pixabay.com/photo/2016/02/24/17/43/pet-1220392__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/22/02/05/cat-1103503__480.jpg\nhttps://cdn.pixabay.com/photo/2015/12/21/03/17/cat-1101995__480.jpg`.split(\"\\n\")\n","import React, {useState, useEffect, useRef} from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Button from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\n\n\nconst ExplainText = styled(\"div\")({\n    marginTop: 8,\n    marginBottom: 8\n})\nconst GoogleDriveScreenshot = styled(\"img\")({\n    width: \"100%\",\n    boxSizing: \"border-box\",\n})\n\n\n// Example for Google OAuth\n// https://developers.google.com/drive/api/v3/picker\n\nconst credentials = {\n    \"web\":{\n        \"client_id\": \"294393711342-h5aqqt3pvn8othepvsmi16iakdhi7m6j.apps.googleusercontent.com\",\n        \"app_id\": \"294393711342\",\n        \"developer_key\": \"AIzaSyCoNoDnfzDBSXpt84Q75LU9UMTzvyLkRhg\"\n    }\n}\n\nconst scope = 'https://www.googleapis.com/auth/drive.readonly'\n\nexport default ({ open, onClose, onAddSamples }) => {\n    const [googleScriptLoaded, setGoogleScriptLoaded] = useState(false)\n    const [pickerApiLoaded, setPickerApiLoaded] = useState(false)\n    const [oauthToken, setOAuthToken] = useState(null)\n    const [userSelectedItemsFromDrive, setUserSelectedItemsFromDrive] = useState([])\n    const [isPickerOpen, setIsPickerOpen] = useState(false)\n\n    useEffect(() => {\n        const scriptElement = document.createElement(\"script\")\n        scriptElement.src = \"https://apis.google.com/js/api.js\"\n        scriptElement.async = true\n\n        scriptElement.onload = () =>{\n            setGoogleScriptLoaded(true)\n        }\n\n        document.body.appendChild(scriptElement)\n        return () => {\n            scriptElement.remove()\n        }\n    }, [])\n\n    const googlePickerActionCallback = (data) =>{\n        if (data.action === window.google.picker.Action.PICKED) {\n            setUserSelectedItemsFromDrive(data.docs.map(googleDriveDocument => ({url: googleDriveDocument.url, mimeType: googleDriveDocument.mimeType, name: googleDriveDocument.name, id: googleDriveDocument.id})))\n            setIsPickerOpen(false)\n        }else if(data.action === \"cancel\"){\n            onClose()\n        }\n    }\n\n    const createPicker = () =>{\n        if(pickerApiLoaded && oauthToken){\n            const view = new window.google.picker.View(window.google.picker.ViewId.Docs)\n            \n            view.setMimeTypes(\n                \"image/png\",\n                \"image/jpeg\",\n                \"image/jpg\",\n                \"image/gif\",\n                \"video/mp4\",\n                \"video/mpeg\"\n            )\n            const picker = new window.google.picker.PickerBuilder()\n                .enableFeature(window.google.picker.Feature.NAV_HIDDEN)\n                .enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED)\n                .setAppId(credentials.web.app_id)\n                .setOAuthToken(oauthToken)\n                .addView(view)\n                .addView(window.google.picker.ViewId.DOCS)\n                .setDeveloperKey(credentials.web.developer_key)\n                .setCallback(googlePickerActionCallback)\n                .build()\n            picker.setVisible(true)\n            setIsPickerOpen(true)\n        }\n    }\n    \n    useEffect(() => {\n        createPicker()\n    }, [pickerApiLoaded, oauthToken])\n\n    const handleAuthenticationResponse = (authenticationResponse) =>{\n        if(authenticationResponse && !authenticationResponse.error){\n            setOAuthToken(authenticationResponse.access_token)\n            createPicker()\n        }\n    }\n\n    const onAuthApiLoad = () =>{\n        window.gapi.auth.authorize(\n            {\n              'client_id': credentials.web.client_id,\n              'scope': scope,\n              'immediate': false\n            },\n            handleAuthenticationResponse\n        )\n    }\n    \n    const onPickerApiLoad = () =>{\n        setPickerApiLoaded(true)\n        createPicker()\n    }\n\n    const onLoadPicker = () =>{\n        if(googleScriptLoaded === true){\n            window.gapi.load('auth', {callback: onAuthApiLoad})\n            window.gapi.load('picker', {'callback': onPickerApiLoad})\n        }\n    }\n    \n    const onAddSamplesClicked = () => {\n        const samples = []\n        for (const item of userSelectedItemsFromDrive) {\n            if (item.mimeType.includes(\"image/\")) {\n                samples.push({ imageUrl: `https://drive.google.com/uc?id=${item.id}` })\n            } else if (item.mimeType.includes(\"video/\")) {\n                samples.push({ videoUrl: `https://drive.google.com/uc?id=${item.id}` })\n            }\n        }\n        onAddSamples(samples)\n    }\n    \n    useEffect(() => {\n        if (open) {\n            onLoadPicker()\n        }\n    }, [open, googleScriptLoaded])\n\n    return(\n        <SimpleDialog\n            open={open && !isPickerOpen}\n            onClose={onClose}\n            title=\"Import from Google Drive\"\n            actions={[\n                userSelectedItemsFromDrive && userSelectedItemsFromDrive.length > 0 && {\n                    \"text\": `Add ${userSelectedItemsFromDrive.length} Samples`,\n                    onClick: onAddSamplesClicked\n                }\n            ].filter(Boolean)}\n        >\n            <Button variant=\"outlined\" onClick={onLoadPicker}>\n                Reopen Google Drive Picker\n            </Button>\n            <ExplainText>\n                Make sure your Google Drive files are available via a link. <b>If you don't, the files will not appear when you're labeling!</b>\n            </ExplainText>\n            <GoogleDriveScreenshot src={\"https://s3.amazonaws.com/asset.workaround.online/google-share-screenshot.png\"} />\n        </SimpleDialog>\n    )\n}","// @flow weak\n\nimport React, { useState, useContext, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\"\nimport TextFieldsIcon from \"@material-ui/icons/TextFields\"\nimport PetsIcon from \"@material-ui/icons/Pets\"\nimport * as colors from \"@material-ui/core/colors\"\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\nimport ImportTextSnippetsDialog from \"../ImportTextSnippetsDialog\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useElectron from \"../../utils/use-electron\"\nimport classnames from \"classnames\"\nimport catImages from \"./cat-images.js\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport ImportFromGoogleDriveDialog from \"../ImportFromGoogleDriveDialog\"\nimport { FaGoogleDrive }  from \"react-icons/fa\"\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200]\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 48,\n    height: 48,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400]\n    }\n  }\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500]\n  }\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({ Icon, desktopOnly, isDesktop, children, dialog }) => {\n  const disabled = desktopOnly ? !isDesktop : false\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => onChangeDialog(dialog)}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              <Icon className={classnames(\"icon\", { disabled })} />\n              <div>{children}</div>\n              {desktopOnly && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  DESKTOP ONLY\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nconst convertToTaskDataObject = fp => {\n  const ext = fp\n    .split(\".\")\n    .slice(-1)[0]\n    .toLowerCase()\n  if ([\"png\", \"jpg\", \"jpeg\"].includes(ext)) {\n    return { imageUrl: `file://${fp}` }\n  }\n  if ([\"pdf\"].includes(ext)) {\n    return { pdfUrl: `file://${fp}` }\n  }\n  if ([\"mp4\", \"webm\", \"mkv\"].includes(ext)) {\n    return { videoUrl: `file://${fp}` }\n  }\n  return null\n}\n\nexport default ({ oha, onChangeOHA, isDesktop }) => {\n  const [selectedDialog, changeDialog] = useState()\n  const electron = useElectron()\n  const onChangeDialog = async dialog => {\n    switch (dialog) {\n      case \"upload-directory\": {\n        if (!electron) return\n        const {\n          canceled,\n          filePaths: dirPaths\n        } = await electron.remote.dialog.showOpenDialog({\n          title: \"Select Directory to Import Files\",\n          properties: [\"openDirectory\"]\n        })\n        if (canceled) return\n        const dirPath = dirPaths[0]\n        const fs = electron.remote.require(\"fs\")\n        const path = electron.remote.require(\"path\")\n        const importedFilePaths = (await fs.promises.readdir(dirPath))\n          .filter(fn => fn.includes(\".\"))\n          .map(fileName => path.join(dirPath, fileName))\n\n        onChangeOHA(\n          setIn(\n            oha,\n            [\"taskData\"],\n            (oha.taskData || []).concat(\n              importedFilePaths.map(convertToTaskDataObject).filter(Boolean)\n            )\n          ),\n          true\n        )\n        return\n      }\n      case \"import-cats\": {\n        onChangeOHA(\n          setIn(\n            oha,\n            [\"taskData\"],\n            (oha.taskData || []).concat(\n              catImages.map(imageUrl => ({ imageUrl }))\n            )\n          ),\n          true\n        )\n        return\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n  const closeDialog = () => changeDialog(null)\n  const onAddSamples = useEventCallback(samples => {\n    onChangeOHA(\n      setIn(oha, [\"taskData\"], (oha.taskData || []).concat(samples)),\n      true\n    )\n    closeDialog()\n  })\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"paste-image-urls\"\n          Icon={AssignmentReturnedIcon}\n        >\n          Paste URLs\n        </Button>\n        <Button\n          desktopOnly\n          isDesktop={isDesktop}\n          dialog=\"upload-directory\"\n          Icon={CreateNewFolderIcon}\n        >\n          Files from Directory\n        </Button>\n        <Button dialog=\"import-text-snippets\" Icon={TextFieldsIcon}>\n          Import Text Snippets\n        </Button>\n        <Button isDesktop={isDesktop} dialog=\"import-cats\" Icon={PetsIcon}>\n          Import Cat Images\n        </Button>\n        <Button\n          isDesktop={isDesktop}\n          dialog=\"google-drive-file-picker\"\n          Icon={FaGoogleDrive}\n        >\n          Import from Google Drive\n        </Button>\n        <ImportTextSnippetsDialog\n          open={selectedDialog === \"import-text-snippets\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <PasteUrlsDialog\n          open={selectedDialog === \"paste-image-urls\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n        <ImportFromGoogleDriveDialog\n          open={selectedDialog === \"google-drive-file-picker\"}\n          onClose={closeDialog}\n          onAddSamples={onAddSamples}\n        />\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport Box from \"@material-ui/core/Box\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport immutable, { setIn } from \"seamless-immutable\"\n\nconst Code = styled(\"pre\")({\n  fontSize: 8\n})\n\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  backgroundColor: colors.grey[100],\n  border: `1px solid ${colors.grey[500]}`,\n  marginTop: 16,\n  marginBottom: 16\n})\n\nconst StyledExpansionPanelSummary = styled(ExpansionPanelSummary)({\n  fontWeight: \"bold\"\n})\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Transform Video Keyframes\"\n      actions={[\n        {\n          text: \"Transform Video Keyframes\",\n          disabled: !oha.taskOutput,\n          onClick: () => {\n            const samples = oha.taskData.flatMap((item, index) => {\n              if (!item.videoUrl)\n                return { data: item, output: oha.taskOutput[index] }\n              if (item.videoUrl && !item.videoFrameAt) {\n                if (!oha.taskOutput[index]) return []\n                if (!oha.taskOutput[index].keyframes) return []\n                const { keyframes } = oha.taskOutput[index]\n                return Object.keys(keyframes).map(kf => ({\n                  data: {\n                    videoUrl: item.videoUrl,\n                    videoFrameAt: parseInt(kf)\n                  },\n                  output: keyframes[kf].regions || []\n                }))\n              }\n            })\n\n            onChangeOHA(\n              immutable(oha)\n                .setIn([\"taskData\"], samples.map(s => s.data))\n                .setIn([\"taskOutput\"], samples.map(s => s.output))\n                .setIn([\"interface\", \"type\"], \"image_segmentation\")\n            )\n          }\n        }\n      ]}\n    >\n      This operation will convert keyframes set on a video into individual image\n      segmentation frames. Your interface type will change from\n      \"video_segmentation\" into \"image_segmentation\". This is sometimes helpful\n      when preparing video data for a computer vision model.\n      {!oha.taskOutput && (\n        <b>\n          <br />\n          <br />\n          You need to label some keyframes to use this.\n        </b>\n      )}\n      <StyledExpansionPanel>\n        <StyledExpansionPanelSummary>Details</StyledExpansionPanelSummary>\n        <ExpansionPanelDetails>\n          <Box display=\"flex\">\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"video_segmentation\" },\n  taskData: [\n    {\n      videoUrl: \"https://example.com/video1.mp4\"\n    }\n  ],\n  taskOutput: [\n    {\n      keyframes: {\n        \"0\": { /* labels */ },\n        \"1000\": { /* labels */ },\n        \"2000\": { /* labels */ }\n      }\n    }\n  ]\n}`}\n              </Code>\n            </Box>\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n              <ArrowForwardIcon\n                style={{ color: colors.grey[500], width: 48, height: 48 }}\n              />\n            </Box>\n            <Box>\n              <Code>\n                {`{\n  \"interface\": { \"type\": \"image_segmentation\" },\n  taskData: [\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 0\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 1000\n    },\n    {\n      videoUrl: \"https://example.com/vid1.mp4\",\n      videoFrameAt: 2000\n    }\n  ],\n  taskOutput: [\n    { /* labels */ },\n    { /* labels */ },\n    { /* labels */ }\n  ]\n}`}\n              </Code>\n            </Box>\n          </Box>\n        </ExpansionPanelDetails>\n      </StyledExpansionPanel>\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  height: 36,\n  width: \"100%\",\n  boxSizing: \"border-box\",\n  position: \"relative\",\n  marginTop: 8,\n  marginBottom: 8,\n  backgroundColor: colors.blue[50]\n})\nconst Text = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0,\n  paddingTop: 4,\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\"\n})\nconst Bar = styled(\"div\")({\n  position: \"absolute\",\n  left: 0,\n  bottom: 0,\n  top: 0,\n  backgroundColor: colors.blue[300]\n})\n\nexport default ({ progress }) => {\n  return (\n    <Container>\n      <Bar style={{ right: 100 - progress + \"%\" }} />\n      <Text>{Math.floor(progress)}%</Text>\n    </Container>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport md5 from \"js-md5\"\nimport path from \"path\"\nimport { setIn } from \"seamless-immutable\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11\n})\n\nfunction downloadFile(urlToDownload, directoryPath, remote) {\n  const fileName = `sample_${md5(urlToDownload).slice(0, 6)}__${urlToDownload\n    .split(\"/\")\n    .slice(-1)[0]\n    .replace(/[^a-zA-Z0-9_\\-\\.]/g, \"\")}`\n  const downloadPath = path.join(directoryPath, fileName)\n  if (remote.require(\"fs\").existsSync(downloadPath)) return downloadPath\n  return new Promise((resolve, reject) => {\n    remote.require(\"download-file\")(\n      urlToDownload,\n      {\n        directory: directoryPath,\n        filename: fileName\n      },\n      err => {\n        if (err) return reject(err)\n        return resolve(downloadPath)\n      }\n    )\n  })\n}\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Download URLs\"\n      actions={[\n        {\n          text: \"Download URLs\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            const {\n              cancelled,\n              filePaths: [directoryPath] = [null]\n            } = await remote.dialog.showOpenDialog({\n              title: \"Directory to download files to\",\n              buttonLabel: \"Download Files Here\",\n              properties: [\"createDirectory\", \"openDirectory\", \"promptToCreate\"]\n            })\n            if (cancelled || !directoryPath) {\n              changeProgress(null)\n              return\n            }\n\n            const newTaskData = [...oha.taskData]\n            let errors = \"\"\n\n            // Iterate over each task datum and download the url, then convert\n            // the path to a filesystem path\n            for (let i = 0; i < oha.taskData.length; i++) {\n              const td = oha.taskData[i]\n              let urlKey\n              if (td.imageUrl) urlKey = \"imageUrl\"\n              if (td.videoUrl) urlKey = \"videoUrl\"\n              if (!urlKey || !td[urlKey].startsWith(\"http\")) continue\n              const urlToDownload = td[urlKey]\n              try {\n                const pathToFile = await downloadFile(\n                  urlToDownload,\n                  directoryPath,\n                  remote\n                )\n                newTaskData[i] = {\n                  ...td,\n                  [urlKey]: `file://${pathToFile}`\n                }\n              } catch (e) {\n                errors += `Skipping sample, error downloading taskData[${i}] (${urlToDownload}): ${e.toString()} \\n`\n              }\n              changeProgress((i / oha.taskData.length) * 100)\n            }\n\n            onChangeOHA(setIn(oha, [\"taskData\"], newTaskData))\n\n            changeErrors(errors)\n            changeProgress(100)\n          }\n        }\n      ]}\n    >\n      This transformation will download all the urls from your samples to your\n      computer, and change the paths to filenames. This is usually not a good\n      idea if you're collaborating with others, but is very useful if you're\n      about to build a model.\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState } from \"react\"\nimport SimpleDialog from \"../SimpleDialog\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useElectron from \"../../utils/use-electron\"\nimport ProgressBar from \"../ProgressBar\"\nimport md5 from \"js-md5\"\nimport path from \"path\"\nimport { setIn, without } from \"seamless-immutable\"\n\nconst ErrorBox = styled(\"pre\")({\n  color: \"red\",\n  whiteSpace: \"prewrap\",\n  fontSize: 11\n})\n\nconst getFfmpegTimeCode = ms => {\n  const cs = Math.floor(ms / 10) % 100\n  const ss = Math.floor(ms / 1000) % 60\n  const mn = Math.floor(ms / 1000 / 60) % 60\n  const hr = Math.floor(ms / 1000 / 60 / 60)\n  return [hr, \":\", mn, \":\", ss, \".\", cs]\n    .map(n => (typeof n === \"number\" ? n.toString().padStart(2, \"0\") : n))\n    .join(\"\")\n}\n\nexport default ({ open, onChangeOHA, onClose, oha }) => {\n  const { remote } = useElectron() || {}\n  const [progress, changeProgress] = useState(null)\n  const [errors, changeErrors] = useState(\"\")\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title=\"Convert Video Frames to Images\"\n      actions={[\n        {\n          text: \"Convert Video Frames to Images\",\n          disabled: progress !== null,\n          onClick: async () => {\n            changeProgress(0)\n            let errors = \"\"\n            const pathToFfmpeg = remote.require(\"ffmpeg-static\")\n            if (!pathToFfmpeg) {\n              changeErrors(\n                \"There was an issue using ffmpeg. Please create an issue on the github repository.\"\n              )\n            }\n\n            const shell = remote.require(\"any-shell-escape\")\n            const { exec } = remote.require(\"child_process\")\n            const newTaskData = [...oha.taskData]\n            let transformsPerformed = 0\n\n            for (let i = 0; i < oha.taskData.length; i++) {\n              const td = oha.taskData[i]\n              if (td.videoUrl && td.videoFrameAt !== undefined) {\n                if (td.videoUrl.startsWith(\"http\")) {\n                  errors += `Sample ${i} has a url to a video, videos must be downloaded before extracting frames.`\n                  continue\n                }\n                transformsPerformed++\n\n                const videoPath = td.videoUrl.replace(/^file:\\/\\//, \"\")\n                const imageOutputPath =\n                  videoPath + \"__frameat__\" + td.videoFrameAt + \".jpg\"\n                const ffmpegCommand = shell([\n                  pathToFfmpeg,\n                  \"-y\",\n                  \"-ss\",\n                  getFfmpegTimeCode(td.videoFrameAt),\n                  \"-i\",\n                  videoPath,\n                  \"-frames:v\",\n                  1,\n                  imageOutputPath\n                ])\n                console.log(\"running:\", ffmpegCommand)\n                await new Promise((resolve, reject) => {\n                  exec(ffmpegCommand, { timeout: 5000 }, err => {\n                    if (err) return reject(err)\n                    resolve()\n                  })\n                })\n                newTaskData[i] = {\n                  ...without(\n                    without(oha.taskData[i], \"videoUrl\"),\n                    \"videoFrameAt\"\n                  ),\n                  imageUrl: `file://${imageOutputPath}`\n                }\n              }\n              changeProgress((i / oha.taskData.length) * 100)\n            }\n\n            if (transformsPerformed === 0) {\n              errors +=\n                \"No transforms were performed, do all of your video samples have frames specified? You may need to convert the keyframes to samples.\"\n            }\n\n            onChangeOHA(setIn(oha, [\"taskData\"], newTaskData))\n\n            changeErrors(errors)\n            changeProgress(100)\n          }\n        }\n      ]}\n    >\n      This transformation will convert samples that reference a video frame into\n      an image. This is a useful step before creating a model. You can only\n      convert videos that are downloaded on your computer. Note: This can take a\n      little while.\n      <ProgressBar progress={progress || 0} />\n      {errors && <ErrorBox>{errors}</ErrorBox>}\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React, { useState, useContext, createContext } from \"react\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\"\nimport ImageIcon from \"@material-ui/icons/Image\"\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\"\nimport TextFieldsIcon from \"@material-ui/icons/TextFields\"\nimport PetsIcon from \"@material-ui/icons/Pets\"\nimport * as colors from \"@material-ui/core/colors\"\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\nimport ImportTextSnippetsDialog from \"../ImportTextSnippetsDialog\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\nimport useElectron from \"../../utils/use-electron\"\nimport classnames from \"classnames\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\nimport TransformVideoKeyframesDialog from \"../TransformVideoKeyframesDialog\"\nimport DownloadURLsDialog from \"../DownloadURLsDialog\"\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\nimport CollectionsIcon from \"@material-ui/icons/Collections\"\nimport TransformVideoFramesToImagesDialog from \"../TransformVideoFramesToImagesDialog\"\n\nconst ButtonBase = styled(MuiButton)({\n  width: 240,\n  height: 140,\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  \"&.disabled\": {\n    backgroundColor: colors.grey[200]\n  },\n  margin: 8,\n  \"& .icon\": {\n    width: 36,\n    height: 36,\n    color: colors.grey[600],\n    \"&.disabled\": {\n      color: colors.grey[400]\n    }\n  }\n})\n\nconst DesktopOnlyText = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  \"&.disabled\": {\n    color: colors.grey[500]\n  }\n})\n\nconst SelectDialogContext = createContext()\n\nconst Button = ({ Icon1, Icon2, desktopOnly, children, dialog, disabled }) => {\n  const isDesktop = useIsDesktop()\n  disabled =\n    disabled === undefined ? (desktopOnly ? !isDesktop : false) : disabled\n  return (\n    <SelectDialogContext.Consumer>\n      {({ onChangeDialog }) => {\n        return (\n          <ButtonBase\n            onClick={() => onChangeDialog(dialog)}\n            className={classnames({ disabled })}\n            variant=\"outlined\"\n            disabled={disabled}\n          >\n            <div>\n              {Icon1 && Icon2 ? (\n                <>\n                  <Icon1 className={classnames(\"icon\", { disabled })} />\n                  <ArrowForwardIcon\n                    className={classnames(\"icon\", { disabled })}\n                  />\n                  <Icon2 className={classnames(\"icon\", { disabled })} />\n                </>\n              ) : (\n                <Icon1 className={classnames(\"icon\", { disabled })} />\n              )}\n              <div>{children}</div>\n              {desktopOnly && (\n                <DesktopOnlyText className={classnames({ disabled })}>\n                  DESKTOP ONLY\n                </DesktopOnlyText>\n              )}\n            </div>\n          </ButtonBase>\n        )\n      }}\n    </SelectDialogContext.Consumer>\n  )\n}\n\nexport default ({ oha, onChangeOHA }) => {\n  const [selectedDialog, changeDialog] = useState()\n  const electron = useElectron()\n  const onChangeDialog = async dialog => {\n    switch (dialog) {\n      case \"convert-keyframes-to-samples\": {\n      }\n      default: {\n        return changeDialog(dialog)\n      }\n    }\n  }\n  const closeDialog = () => changeDialog(null)\n  return (\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\n      <div>\n        <Button\n          disabled={oha.interface.type !== \"video_segmentation\"}\n          dialog=\"convert-keyframes-to-samples\"\n          Icon1={OndemandVideoIcon}\n          Icon2={CollectionsIcon}\n        >\n          Convert Video Keyframes to Samples\n        </Button>\n        <Button desktopOnly dialog=\"download-urls\" Icon1={GetAppIcon}>\n          Download URLs\n        </Button>\n        <Button\n          desktopOnly\n          dialog=\"convert-video-frames-to-images\"\n          Icon1={OndemandVideoIcon}\n          Icon2={ImageIcon}\n        >\n          Convert Video Frames to Images\n        </Button>\n        <TransformVideoKeyframesDialog\n          open={selectedDialog === \"convert-keyframes-to-samples\"}\n          onClose={closeDialog}\n          oha={oha}\n          onChangeOHA={(...args) => {\n            onChangeOHA(...args)\n            closeDialog()\n          }}\n        />\n        <DownloadURLsDialog\n          open={selectedDialog === \"download-urls\"}\n          onClose={closeDialog}\n          oha={oha}\n          desktopOnly\n          onChangeOHA={onChangeOHA}\n        ></DownloadURLsDialog>\n        <TransformVideoFramesToImagesDialog\n          open={selectedDialog === \"convert-video-frames-to-images\"}\n          onClose={closeDialog}\n          oha={oha}\n          desktopOnly\n          onChangeOHA={onChangeOHA}\n        ></TransformVideoFramesToImagesDialog>\n      </div>\n    </SelectDialogContext.Provider>\n  )\n}\n","// @flow weak\n\nimport React, { useMemo, useState } from \"react\"\nimport DataTable from \"react-data-table-component\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport SampleGrid from \"../SampleGrid\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport AppsIcon from \"@material-ui/icons/Apps\"\nimport SlideshowIcon from \"@material-ui/icons/Slideshow\"\nimport TableChartIcon from \"@material-ui/icons/TableChart\"\nimport Box from \"@material-ui/core/Box\"\nimport ImportIcon from \"@material-ui/icons/Publish\"\nimport ImportPage from \"../ImportPage\"\nimport TransformPage from \"../TransformPage\"\nimport useIsDesktop from \"../../utils/use-is-desktop.js\"\n\nconst Container = styled(\"div\")({\n  padding: 16\n})\n\nconst ExpandedRowContainer = styled(\"div\")({\n  padding: 8,\n  border: \"#888 solid 1px\",\n  borderTop: \"none\",\n  borderRadius: 4,\n  borderTopLeftRadius: 0,\n  borderTopRightRadius: 0,\n  boxShadow: \"inset 0 3px 3px rgba(0,0,0,0.2)\"\n})\nconst ExpandedRowTitle = styled(\"div\")({\n  fontSize: 11,\n  fontWeight: \"bold\"\n})\nconst ExpandedRowCode = styled(\"pre\")({ whiteSpace: \"pre-wrap\", fontSize: 11 })\n\nconst ExpandedRow = ({ data }) => {\n  const { _output, ...input } = data\n\n  return (\n    <ExpandedRowContainer>\n      <Grid spacing={2} container>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>taskData[{data.index}]:</ExpandedRowTitle>\n          <ExpandedRowCode>{JSON.stringify(input, null, \"  \")}</ExpandedRowCode>\n        </Grid>\n        <Grid item xs={6}>\n          <ExpandedRowTitle>taskOutput[{data.index}]:</ExpandedRowTitle>\n          <ExpandedRowCode>\n            {JSON.stringify(_output, null, \"  \")}\n          </ExpandedRowCode>\n        </Grid>\n      </Grid>\n    </ExpandedRowContainer>\n  )\n}\n\nexport default ({\n  oha,\n  openSampleInputEditor,\n  openSampleLabelEditor,\n  deleteSample,\n  onChangeOHA\n}) => {\n  const isDesktop = useIsDesktop()\n  const [currentTab, changeTabState] = useState(\n    (oha.taskData || []).length === 0\n      ? \"import\"\n      : window.localStorage.lastSampleTab || \"grid\"\n  )\n  const changeTab = tab => {\n    changeTabState(tab)\n    window.localStorage.lastSampleTab = tab\n  }\n  const columns = useMemo(() => {\n    if (!oha.taskData) return []\n    const columns = [\n      {\n        name: \"Index\",\n        selector: \"index\",\n        sortable: true\n      }\n    ]\n    const knownKeys = new Set()\n    for (const td of oha.taskData) {\n      for (const key in td) {\n        if (!knownKeys.has(key)) {\n          columns.push({\n            name: key,\n            selector: key\n          })\n          knownKeys.add(key)\n        }\n      }\n    }\n    columns.push({\n      name: \"Edit\",\n      button: true,\n      cell: row => (\n        <IconButton raised onClick={() => openSampleInputEditor(row.index)}>\n          <EditIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      )\n    })\n    columns.push({\n      name: \"Label\",\n      button: true,\n      cell: row => (\n        <IconButton raised onClick={() => openSampleLabelEditor(row.index)}>\n          <BorderColorIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      )\n    })\n    columns.push({\n      name: \"Delete\",\n      button: true,\n      cell: row => (\n        <IconButton raised primary onClick={() => deleteSample(row.index)}>\n          <DeleteIcon style={{ width: 20, height: 20 }} />\n        </IconButton>\n      )\n    })\n    return columns\n  }, [oha.taskData, oha.taskOutput])\n\n  const data = useMemo(() => {\n    if (!oha.taskData) return []\n    return oha.taskData.map((td, i) => ({\n      ...td,\n      _output: oha.taskOutput && oha.taskOutput[i] ? oha.taskOutput[i] : {},\n      index: i\n    }))\n  }, [oha.taskData, oha.taskOutput])\n  return (\n    <Container>\n      <Tabs value={currentTab} onChange={(e, newTab) => changeTab(newTab)}>\n        <Tab icon={<ImportIcon />} label=\"Import\" value=\"import\" />\n        <Tab icon={<SlideshowIcon />} label=\"Transform\" value=\"transform\" />\n        <Tab icon={<AppsIcon />} label=\"Grid\" value=\"grid\" />\n        <Tab icon={<TableChartIcon />} label=\"Table\" value=\"table\" />\n      </Tabs>\n      <Box paddingTop={2} />\n      {currentTab === \"import\" && (\n        <ImportPage\n          isDesktop={isDesktop}\n          onChangeOHA={(newOHA, shouldViewChange) => {\n            onChangeOHA(newOHA)\n            if (shouldViewChange) {\n              changeTab(\"grid\")\n            }\n          }}\n          oha={oha}\n        />\n      )}\n      {currentTab === \"transform\" && (\n        <TransformPage\n          isDesktop={isDesktop}\n          oha={oha}\n          onChangeOHA={(oha, shouldViewChange) => {\n            onChangeOHA(oha)\n            if (shouldViewChange) {\n              changeTab(\"grid\")\n            }\n          }}\n        />\n      )}\n      {currentTab === \"grid\" && (\n        <SampleGrid\n          count={(oha.taskData || []).length}\n          completed={(oha.taskOutput || []).map(Boolean)}\n          onClick={sampleIndex => {\n            openSampleLabelEditor(sampleIndex)\n          }}\n        />\n      )}\n      {currentTab === \"table\" && (\n        <DataTable\n          title=\"Samples\"\n          expandableRowsComponent={<ExpandedRow />}\n          expandableRows\n          dense\n          columns={columns}\n          data={data}\n          pagination\n          paginationPerPage={10}\n          paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\n        />\n      )}\n    </Container>\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"]\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\"\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\"\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an image, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\"\n        }\n      ]\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multipleRegions: Boolean(\n        iface.multipleRegions || iface.multipleRegions === undefined\n      ),\n      multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n      regionTypesAllowed: iface.regionTypesAllowed,\n      availableLabels:\n        (iface.availableLabels || []).map(a =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || []\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue ))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"allowMultiple\",\n      title: \"Allow multiple classifications per image?\",\n      type: \"boolean\"\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\"\n        }\n      ]\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      allowMultiple: false,\n      availableLabels:\n        (iface.availableLabels || []).map(a =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || []\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"multiple\",\n      title: \"Allow Multiple Classifications\",\n      type: \"boolean\"\n    },\n    {\n      name: \"labels\",\n      title: \"Labels\",\n      description: \"Classifications or tags to be labeled.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        { cellType: \"text\", name: \"displayName\", title: \"Display Name\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\"\n        }\n      ]\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multiple: false,\n      labels:\n        (iface.labels || []).map(a =>\n          typeof a === \"string\" ? { id: a, displayName: a, description: a } : a\n        ) || []\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow\n\nimport { styled } from \"@material-ui/core/styles\"\n\nexport const PaperContainer = styled(\"div\")({\n  margin: 16,\n  padding: 16,\n  border: \"1px solid #ccc\",\n  borderRadius: 4,\n  boxShadow: \"0px 2px 2px rgba(0,0,0,0.1)\"\n})\n\nexport default PaperContainer\n","import React from \"react\"\nimport Survey from \"material-survey/components/Survey\"\n\n// https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2021620\nconst languages = [\n  { value: \"ab\", text: \"Abkhazian\" },\n  { value: \"aa\", text: \"Afar\" },\n  { value: \"af\", text: \"Afrikaans\" },\n  { value: \"ak\", text: \"Akan\" },\n  { value: \"sq\", text: \"Albanian\" },\n  { value: \"am\", text: \"Amharic\" },\n  { value: \"ar\", text: \"Arabic\" },\n  { value: \"an\", text: \"Aragonese\" },\n  { value: \"hy\", text: \"Armenian\" },\n  { value: \"as\", text: \"Assamese\" },\n  { value: \"av\", text: \"Avaric\" },\n  { value: \"ae\", text: \"Avestan\" },\n  { value: \"ay\", text: \"Aymara\" },\n  { value: \"az\", text: \"Azerbaijani\" },\n  { value: \"bm\", text: \"Bambara\" },\n  { value: \"ba\", text: \"Bashkir\" },\n  { value: \"eu\", text: \"Basque\" },\n  { value: \"be\", text: \"Belarusian\" },\n  { value: \"bn\", text: \"Bengali\" },\n  { value: \"bh\", text: \"Bihari languages\" },\n  { value: \"bi\", text: \"Bislama\" },\n  { value: \"bs\", text: \"Bosnian\" },\n  { value: \"br\", text: \"Breton\" },\n  { value: \"bg\", text: \"Bulgarian\" },\n  { value: \"my\", text: \"Burmese\" },\n  { value: \"ca\", text: \"Catalan, Valencian\" },\n  { value: \"km\", text: \"Central Khmer\" },\n  { value: \"ch\", text: \"Chamorro\" },\n  { value: \"ce\", text: \"Chechen\" },\n  { value: \"ny\", text: \"Chichewa, Chewa, Nyanja\" },\n  { value: \"zh\", text: \"Chinese\" },\n  { value: \"cu\", text: \"Church Slavonic, Old Bulgarian, Old Church Slavonic\" },\n  { value: \"cv\", text: \"Chuvash\" },\n  { value: \"kw\", text: \"Cornish\" },\n  { value: \"co\", text: \"Corsican\" },\n  { value: \"cr\", text: \"Cree\" },\n  { value: \"hr\", text: \"Croatian\" },\n  { value: \"cs\", text: \"Czech\" },\n  { value: \"da\", text: \"Danish\" },\n  { value: \"dv\", text: \"Divehi, Dhivehi, Maldivian\" },\n  { value: \"nl\", text: \"Dutch, Flemish\" },\n  { value: \"dz\", text: \"Dzongkha\" },\n  { value: \"en\", text: \"English\" },\n  { value: \"eo\", text: \"Esperanto\" },\n  { value: \"et\", text: \"Estonian\" },\n  { value: \"ee\", text: \"Ewe\" },\n  { value: \"fo\", text: \"Faroese\" },\n  { value: \"fj\", text: \"Fijian\" },\n  { value: \"fi\", text: \"Finnish\" },\n  { value: \"fr\", text: \"French\" },\n  { value: \"ff\", text: \"Fulah\" },\n  { value: \"gd\", text: \"Gaelic, Scottish Gaelic\" },\n  { value: \"gl\", text: \"Galician\" },\n  { value: \"lg\", text: \"Ganda\" },\n  { value: \"ka\", text: \"Georgian\" },\n  { value: \"de\", text: \"German\" },\n  { value: \"ki\", text: \"Gikuyu, Kikuyu\" },\n  { value: \"el\", text: \"Greek (Modern)\" },\n  { value: \"kl\", text: \"Greenlandic, Kalaallisut\" },\n  { value: \"gn\", text: \"Guarani\" },\n  { value: \"gu\", text: \"Gujarati\" },\n  { value: \"ht\", text: \"Haitian, Haitian Creole\" },\n  { value: \"ha\", text: \"Hausa\" },\n  { value: \"he\", text: \"Hebrew\" },\n  { value: \"hz\", text: \"Herero\" },\n  { value: \"hi\", text: \"Hindi\" },\n  { value: \"ho\", text: \"Hiri Motu\" },\n  { value: \"hu\", text: \"Hungarian\" },\n  { value: \"is\", text: \"Icelandic\" },\n  { value: \"io\", text: \"Ido\" },\n  { value: \"ig\", text: \"Igbo\" },\n  { value: \"id\", text: \"Indonesian\" },\n  {\n    value: \"ia\",\n    text: \"Interlingua (International Auxiliary Language Association)\"\n  },\n  { value: \"ie\", text: \"Interlingue\" },\n  { value: \"iu\", text: \"Inuktitut\" },\n  { value: \"ik\", text: \"Inupiaq\" },\n  { value: \"ga\", text: \"Irish\" },\n  { value: \"it\", text: \"Italian\" },\n  { value: \"ja\", text: \"Japanese\" },\n  { value: \"jv\", text: \"Javanese\" },\n  { value: \"kn\", text: \"Kannada\" },\n  { value: \"kr\", text: \"Kanuri\" },\n  { value: \"ks\", text: \"Kashmiri\" },\n  { value: \"kk\", text: \"Kazakh\" },\n  { value: \"rw\", text: \"Kinyarwanda\" },\n  { value: \"kv\", text: \"Komi\" },\n  { value: \"kg\", text: \"Kongo\" },\n  { value: \"ko\", text: \"Korean\" },\n  { value: \"kj\", text: \"Kwanyama, Kuanyama\" },\n  { value: \"ku\", text: \"Kurdish\" },\n  { value: \"ky\", text: \"Kyrgyz\" },\n  { value: \"lo\", text: \"Lao\" },\n  { value: \"la\", text: \"Latin\" },\n  { value: \"lv\", text: \"Latvian\" },\n  { value: \"lb\", text: \"Letzeburgesch, Luxembourgish\" },\n  { value: \"li\", text: \"Limburgish, Limburgan, Limburger\" },\n  { value: \"ln\", text: \"Lingala\" },\n  { value: \"lt\", text: \"Lithuanian\" },\n  { value: \"lu\", text: \"Luba-Katanga\" },\n  { value: \"mk\", text: \"Macedonian\" },\n  { value: \"mg\", text: \"Malagasy\" },\n  { value: \"ms\", text: \"Malay\" },\n  { value: \"ml\", text: \"Malayalam\" },\n  { value: \"mt\", text: \"Maltese\" },\n  { value: \"gv\", text: \"Manx\" },\n  { value: \"mi\", text: \"Maori\" },\n  { value: \"mr\", text: \"Marathi\" },\n  { value: \"mh\", text: \"Marshallese\" },\n  { value: \"ro\", text: \"Moldovan, Moldavian, Romanian\" },\n  { value: \"mn\", text: \"Mongolian\" },\n  { value: \"na\", text: \"Nauru\" },\n  { value: \"nv\", text: \"Navajo, Navaho\" },\n  { value: \"nd\", text: \"Northern Ndebele\" },\n  { value: \"ng\", text: \"Ndonga\" },\n  { value: \"ne\", text: \"Nepali\" },\n  { value: \"se\", text: \"Northern Sami\" },\n  { value: \"no\", text: \"Norwegian\" },\n  { value: \"nb\", text: \"Norwegian Bokml\" },\n  { value: \"nn\", text: \"Norwegian Nynorsk\" },\n  { value: \"ii\", text: \"Nuosu, Sichuan Yi\" },\n  { value: \"oc\", text: \"Occitan (post 1500)\" },\n  { value: \"oj\", text: \"Ojibwa\" },\n  { value: \"or\", text: \"Oriya\" },\n  { value: \"om\", text: \"Oromo\" },\n  { value: \"os\", text: \"Ossetian, Ossetic\" },\n  { value: \"pi\", text: \"Pali\" },\n  { value: \"pa\", text: \"Panjabi, Punjabi\" },\n  { value: \"ps\", text: \"Pashto, Pushto\" },\n  { value: \"fa\", text: \"Persian\" },\n  { value: \"pl\", text: \"Polish\" },\n  { value: \"pt\", text: \"Portuguese\" },\n  { value: \"qu\", text: \"Quechua\" },\n  { value: \"rm\", text: \"Romansh\" },\n  { value: \"rn\", text: \"Rundi\" },\n  { value: \"ru\", text: \"Russian\" },\n  { value: \"sm\", text: \"Samoan\" },\n  { value: \"sg\", text: \"Sango\" },\n  { value: \"sa\", text: \"Sanskrit\" },\n  { value: \"sc\", text: \"Sardinian\" },\n  { value: \"sr\", text: \"Serbian\" },\n  { value: \"sn\", text: \"Shona\" },\n  { value: \"sd\", text: \"Sindhi\" },\n  { value: \"si\", text: \"Sinhala, Sinhalese\" },\n  { value: \"sk\", text: \"Slovak\" },\n  { value: \"sl\", text: \"Slovenian\" },\n  { value: \"so\", text: \"Somali\" },\n  { value: \"st\", text: \"Sotho, Southern\" },\n  { value: \"nr\", text: \"South Ndebele\" },\n  { value: \"es\", text: \"Spanish, Castilian\" },\n  { value: \"su\", text: \"Sundanese\" },\n  { value: \"sw\", text: \"Swahili\" },\n  { value: \"ss\", text: \"Swati\" },\n  { value: \"sv\", text: \"Swedish\" },\n  { value: \"tl\", text: \"Tagalog\" },\n  { value: \"ty\", text: \"Tahitian\" },\n  { value: \"tg\", text: \"Tajik\" },\n  { value: \"ta\", text: \"Tamil\" },\n  { value: \"tt\", text: \"Tatar\" },\n  { value: \"te\", text: \"Telugu\" },\n  { value: \"th\", text: \"Thai\" },\n  { value: \"bo\", text: \"Tibetan\" },\n  { value: \"ti\", text: \"Tigrinya\" },\n  { value: \"to\", text: \"Tonga (Tonga Islands)\" },\n  { value: \"ts\", text: \"Tsonga\" },\n  { value: \"tn\", text: \"Tswana\" },\n  { value: \"tr\", text: \"Turkish\" },\n  { value: \"tk\", text: \"Turkmen\" },\n  { value: \"tw\", text: \"Twi\" },\n  { value: \"ug\", text: \"Uighur, Uyghur\" },\n  { value: \"uk\", text: \"Ukrainian\" },\n  { value: \"ur\", text: \"Urdu\" },\n  { value: \"uz\", text: \"Uzbek\" },\n  { value: \"ve\", text: \"Venda\" },\n  { value: \"vi\", text: \"Vietnamese\" },\n  { value: \"vo\", text: \"Volap_k\" },\n  { value: \"wa\", text: \"Walloon\" },\n  { value: \"cy\", text: \"Welsh\" },\n  { value: \"fy\", text: \"Western Frisian\" },\n  { value: \"wo\", text: \"Wolof\" },\n  { value: \"xh\", text: \"Xhosa\" },\n  { value: \"yi\", text: \"Yiddish\" },\n  { value: \"yo\", text: \"Yoruba\" },\n  { value: \"za\", text: \"Zhuang, Chuang\" },\n  { value: \"zu\", text: \"Zulu\" }\n]\n\nconst form = {\n  questions: [\n    {\n      name: \"transcriptionType\",\n      title: \"Transcription Type\",\n      type: \"dropdown\",\n      choices: [\"simple\", \"proper\"]\n    },\n    {\n      name: \"phraseBank\",\n      title: \"Phrase Bank\",\n      description: \"URL of single-column CSV or TXT file with allowed phrases\",\n      type: \"text\"\n    },\n    {\n      name: \"onlyUseWordsInPhraseBank\",\n      title: \"Only Use Words In Phrase Bank\",\n      type: \"boolean\"\n    },\n    {\n      name: \"language\",\n      title: \"Language\",\n      type: \"dropdown\",\n      // https://gist.github.com/DimazzzZ/4e2a5a6c8c6f67900091#gistcomment-2858621\n      choices: languages\n    },\n    {\n      name: \"description\",\n      title: \"Description\",\n      type: \"multiline-text\"\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      onQuestionChange={(questionId, newValue, answers) => {\n        if (newValue.value) {\n          onChange({ ...iface, [questionId]: newValue.value })\n        } else {\n          onChange({ ...iface, [questionId]: newValue })\n        }\n      }}\n      form={form}\n    />\n  )\n}\n","import React, {useMemo} from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n        name: \"description\",\n        title: \"Description\",\n        type: \"multiline-text\",\n    },\n    {\n        name: \"overlapAllowed\",\n        title: \"Overlap Allowed\",\n        type: \"boolean\"\n    },\n    {   \n        name: \"labels\",\n        title: \"Labels\",\n        type: \"matrixdynamic\",\n        hasOther: true,\n        columns: [\n            {\n                cellType: \"text\",\n                name: \"id\",\n                title: \"ID\"\n            },\n            {\n                cellType: \"text\",\n                name: \"displayName\",\n                title: \"Display Name\"\n            },\n            {\n                cellType: \"text\",\n                name: \"description\",\n                title: \"Description\"\n            },\n        ],\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n    const defaultAnswers = useMemo(\n        () =>({\n            description: iface.description,\n            overlapAllowed: Boolean(\n                iface.overlapAllowed || iface.overlapAllowed === undefined\n            ),\n            labels: (iface.labels || []).map(column =>\n                typeof column === \"string\" ? {\n                    id: column,\n                    displayName: column,\n                    description: column\n                } : column\n            )\n        }),\n    )\n    return(\n        <Survey\n            noActions\n            variant=\"flat\"\n            onQuestionChange={(questionId, newValue, answers) =>{\n                onChange(setIn(iface, [questionId], newValue))\n            }}\n            form={form}\n            defaultAnswers={defaultAnswers}\n        />\n    )\n}","// @flow\n\nimport React, { useRef, useState } from \"react\"\nimport * as colors from \"@material-ui/core/colors\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\"\nimport CancelIcon from \"@material-ui/icons/Cancel\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Survey from \"material-survey/components/Survey\"\nimport Grid from \"@material-ui/core/Grid\"\nimport { setIn } from \"seamless-immutable\"\n\nconst ButtonsContainer = styled(\"div\")({\n  textAlign: \"right\"\n})\nconst NoQuestions = styled(\"div\")({\n  fontSize: 18,\n  color: colors.grey[500],\n  fontWeight: \"bold\",\n  textAlign: \"center\",\n  padding: 16\n})\n\nconst Question = styled(\"div\")({\n  position: \"relative\",\n  padding: 16,\n  margin: 16,\n  borderLeft: `4px solid ${colors.blue[400]}`,\n  // backgroundColor: colors.grey[50],\n  borderRadius: 4,\n  paddingRight: 64,\n  \"& .quitButton\": {\n    position: \"absolute\",\n    right: 4,\n    top: 4\n  },\n  \"& > *\": {\n    margin: 8\n  }\n})\nconst PreviewHeader = styled(\"div\")({\n  fontSize: 12,\n  fontWeight: \"bold\",\n  color: colors.grey[600],\n  textTransform: \"uppercase\",\n  margin: 16,\n  marginBottom: 32\n})\n\nconst StyledButton = styled(Button)({\n  position: \"relative\",\n  \"& .icon\": {\n    marginRight: 8,\n    opacity: 0.7\n  }\n})\n\nexport default ({ iface, onChange }) => {\n  const anchorEl = useRef()\n  const [menuOpen, changeMenuOpen] = useState(false)\n  const { questions = [] } = iface.surveyjs || {}\n  return (\n    <div>\n      {questions.length === 0 ? (\n        <NoQuestions>No Inputs, Click Add Input Below</NoQuestions>\n      ) : (\n        questions.map((q, i) => (\n          <Question key={i}>\n            <div style={{ display: \"flex\" }}>\n              <TextField\n                variant=\"outlined\"\n                label=\"Name / Identifier\"\n                value={q.name || \"\"}\n                onChange={e => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"name\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n              <TextField\n                style={{ marginLeft: 8, flexGrow: 1 }}\n                variant=\"outlined\"\n                label=\"Title / Instruction\"\n                value={q.title || \"\"}\n                onChange={e => {\n                  onChange(\n                    setIn(\n                      iface,\n                      [\"surveyjs\", \"questions\", i, \"title\"],\n                      e.target.value\n                    )\n                  )\n                }}\n              />\n            </div>\n            <Grid container>\n              <Grid item xs={6}>\n                {q.choices && (\n                  <TextField\n                    style={{\n                      marginTop: 8,\n                      paddingRight: 8,\n                      boxSizing: \"border-box\"\n                    }}\n                    variant=\"outlined\"\n                    fullWidth\n                    label=\"Choices (One per Line)\"\n                    defaultValue={q.choices.join(\"\\n\") || \"\"}\n                    onChange={e => {\n                      onChange(\n                        setIn(\n                          iface,\n                          [\"surveyjs\", \"questions\", i, \"choices\"],\n                          e.target.value.split(\"\\n\")\n                        )\n                      )\n                    }}\n                    multiline\n                    rows={6}\n                  />\n                )}\n              </Grid>\n              <Grid item xs={6}>\n                <PreviewHeader>Preview</PreviewHeader>\n                <Survey\n                  noActions\n                  variant=\"flat\"\n                  key={q}\n                  form={{ questions: [q] }}\n                />\n              </Grid>\n            </Grid>\n            <IconButton\n              className=\"quitButton\"\n              onClick={() => {\n                onChange(\n                  setIn(\n                    iface,\n                    [\"surveyjs\", \"questions\"],\n                    [...questions.slice(0, i), ...questions.slice(i + 1)]\n                  )\n                )\n              }}\n            >\n              <CancelIcon />\n            </IconButton>\n          </Question>\n        ))\n      )}\n      <ButtonsContainer>\n        <StyledButton onClick={e => changeMenuOpen(true)} ref={anchorEl}>\n          <AddCircleIcon className=\"icon\" />\n          Add Input\n        </StyledButton>\n      </ButtonsContainer>\n      <Menu\n        anchorEl={anchorEl && anchorEl.current}\n        open={menuOpen}\n        onClose={() => changeMenuOpen(false)}\n      >\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(setIn(\n              iface,\n              [\"surveyjs\", \"questions\"],\n              iface.surveyjs.questions.concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"text\",\n                    title: \"New Text Input\"\n                  }\n              ])\n            ))\n          }}\n        >\n          Text Input\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(iface, \n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat(\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"radiogroup\",\n                    title: \"New Exclusive Choice Input\",\n                    choices: [\"Yes\", \"Maybe\", \"No\"]\n                  }\n                )\n              )\n            )\n          }}\n        >\n          Exclusive Choice\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.surveyjs.questions || []).concat(\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"checkbox\",\n                    title: \"New Checkbox Input\",\n                    choices: [\"A\", \"B\", \"C\"]\n                  }\n                )\n              )\n            )\n          }}\n        >\n          Checkboxes\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat(\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"boolean\",\n                    title: \"New Boolean Input\"\n                  }\n                )\n              )\n            )\n          }}\n        >\n          Boolean\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                (iface.questions || []).concat(\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"dropdown\",\n                    title: \"New Dropdown Input\",\n                    choices: [\"A\", \"B\", \"C\"]\n                  }\n                )\n              )\n            )\n          }}\n        >\n          Dropdown / Autocomplete\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            changeMenuOpen(false)\n            onChange(\n              setIn(\n                iface,\n                [\"surveyjs\", \"questions\"],\n                iface.surveyjs.questions.concat([\n                  {\n                    name: \"input\" + questions.length,\n                    type: \"multiple-dropdown\",\n                    title: \"New Multiple Dropdown Input\",\n                    choices: [\"A\", \"B\", \"C\"]\n                  }\n                ])\n              )\n            )\n          }}\n        >\n          Multiple Item Dropdown / Autocomplete\n        </MenuItem>\n      </Menu>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from \"react\"\nimport ConfigureInterface from \"../ConfigureInterface\"\nimport { styled } from \"@material-ui/core/styles\"\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\"\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\"\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\"\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { setIn } from \"seamless-immutable\"\n\nconst Fields = styled(\"div\")({})\nconst StyledExpansionPanel = styled(ExpansionPanel)({\n  marginTop: 16,\n  border: \"2px solid #000\"\n})\nconst StyledButton = styled(Button)({\n  width: \"100%\",\n  margin: 16,\n  marginLeft: 0\n})\n\nexport default ({ iface, onChange }) => {\n  return (\n    <React.Fragment>\n      <Fields>\n        {(iface.fields || []).map((f, fieldIndex) => (\n          <StyledExpansionPanel key={fieldIndex}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n              {f.fieldName}\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              <Box display=\"flex\" flexDirection=\"column\">\n                <TextField\n                  label=\"Field Name\"\n                  value={f.fieldName}\n                  onChange={e => {\n                    onChange(\n                      setIn(\n                        [\"fields\", fieldIndex, \"fieldName\"],\n                        e.target.value,\n                        iface\n                      )\n                    )\n                  }}\n                />\n                <ConfigureInterface\n                  iface={f.interface}\n                  onChange={newFieldInterface => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.map(field =>\n                        field.fieldName === f.fieldName\n                          ? { ...f, interface: newFieldInterface }\n                          : field\n                      )\n                    })\n                  }}\n                />\n                <Button\n                  onClick={() => {\n                    onChange({\n                      ...iface,\n                      fields: iface.fields.filter(\n                        ({ fieldName }) => fieldName !== f.fieldName\n                      )\n                    })\n                  }}\n                >\n                  Remove Field\n                </Button>\n              </Box>\n            </ExpansionPanelDetails>\n          </StyledExpansionPanel>\n        ))}\n        <StyledButton\n          onClick={() => {\n            onChange(\n              setIn(\n                iface,\n                [\"fields\"], \n                (iface.fields || []).concat(\n                  {\n                    fieldOrder: (iface.fields || []).length,\n                    fieldName: \"New Field\",\n                    interface: {\n                      type: \"empty\"\n                    }\n                  }\n                )\n              )\n            )\n          }}\n        >\n          Add New Field\n        </StyledButton>\n      </Fields>\n    </React.Fragment>\n  )\n}\n","import React from 'react';\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\n\nconst ExplanationTextHeader = styled(\"div\")({\n    textAlign: \"center\",\n    paddingTop: 30,\n    paddingBottom: 50,\n    userSelect: \"none\"\n})\n\n\nconst ExplanationText = styled(\"h3\")({\n    fontWeight: \"bold\",\n    color: colors.grey[500],\n})\n\nconst GithubLink = styled(\"a\")({\n    color: colors.blue[500]\n})\n\nconst Configure3D = () => {\n    return (\n        <ExplanationTextHeader>\n            <ExplanationText>\n                Hey, this isn't currently available, but if you'd like this functionality please let us know by leaving a thumbs up on <GithubLink target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/UniversalDataTool/universal-data-tool/issues/20\">this</GithubLink> github issue.\n            </ExplanationText>\n        </ExplanationTextHeader>\n    );\n}\n\nexport default Configure3D;\n","// @flow\nimport React, { useMemo } from \"react\"\nimport Survey from \"material-survey/components/Survey\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { setIn } from \"seamless-immutable\"\n\nconst form = {\n  questions: [\n    {\n      name: \"regionTypesAllowed\",\n      title: \"Region Types Allowed\",\n      description: \"What types of regions can be drawn on the image.\",\n      type: \"multiple-dropdown\",\n      choices: [\"bounding-box\", \"polygon\", \"point\"]\n    },\n    {\n      name: \"multipleRegions\",\n      title: \"Can multiple regions be created?\",\n      type: \"boolean\"\n    },\n    {\n      name: \"multipleRegionLabels\",\n      title: \"Multiple Region Labels Allowed?\",\n      type: \"boolean\"\n    },\n    {\n      name: \"availableLabels\",\n      title: \"Available Labels\",\n      description:\n        \"If you're labeling regions on an video frames, these are the allowed classifications or tags.\",\n      type: \"matrixdynamic\",\n      columns: [\n        { cellType: \"text\", name: \"id\", title: \"id\" },\n        {\n          cellType: \"text\",\n          name: \"description\",\n          title: \"Description (optional)\"\n        }\n      ]\n    }\n  ]\n}\n\nexport default ({ iface, onChange }) => {\n  const defaultAnswers = useMemo(\n    () => ({\n      multipleRegions: Boolean(\n        iface.multipleRegions || iface.multipleRegions === undefined\n      ),\n      multipleRegionLabels: Boolean(iface.multipleRegionLabels),\n      regionTypesAllowed: iface.regionTypesAllowed,\n      availableLabels:\n        (iface.availableLabels || []).map(a =>\n          typeof a === \"string\" ? { id: a, description: a } : a\n        ) || []\n    }),\n    []\n  )\n  return (\n    <Survey\n      noActions\n      variant=\"flat\"\n      defaultAnswers={defaultAnswers}\n      onQuestionChange={(questionId, newValue, answers) => {\n        onChange(setIn(iface, [questionId], newValue))\n      }}\n      form={form}\n    />\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport templates from \"../StartingPage/templates\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\nimport * as colors from \"@material-ui/core/colors\"\nimport ConfigureImageSegmentation from \"../ConfigureImageSegmentation\"\nimport ConfigureImageClassification from \"../ConfigureImageClassification\"\nimport ConfigureTextClassification from \"../ConfigureTextClassification\"\nimport PaperContainer from \"../PaperContainer\"\nimport ConfigureAudioTranscription from \"../ConfigureAudioTranscription\"\nimport ConfigureNLP from \"../ConfigureNLP\"\nimport ConfigureDataEntry from \"../ConfigureDataEntry\"\nimport ConfigureComposite from \"../ConfigureComposite\"\nimport Configure3D from \"../Configure3D\"\nimport ConfigureVideoSegmentation from \"../ConfigureVideoSegmentation\"\nimport { setIn } from \"seamless-immutable\"\n\nconst NoOptions = styled(\"div\")({\n  fontSize: 18,\n  textAlign: \"center\",\n  fontWeight: \"bold\",\n  color: colors.grey[500],\n  paddingTop: 30,\n  paddingBottom: 50\n})\n\nconst TypeButton = styled(Button)({\n  margin: 8,\n  \"& .icon\": {\n    marginRight: 8,\n    color: \"#888\"\n  },\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  \"&.selected\": {\n    backgroundColor: colors.blue[500],\n    color: \"#fff\",\n    \"& .icon\": {\n      color: \"#fff\"\n    }\n  }\n})\n\nexport const Heading = styled(\"div\")({\n  fontWeight: \"bold\",\n  textTransform: \"uppercase\",\n  fontSize: 12,\n  paddingLeft: 8,\n  marginBottom: 8,\n  marginTop: 16,\n  color: colors.grey[700]\n})\n\nconst SelectType = ({ currentlySelected, onChange }) => {\n  return templates.map(t => (\n    <TypeButton\n      key={t.oha.interface.type || \"empty\"}\n      className={currentlySelected === t.oha.interface.type ? \"selected\" : \"\"}\n      variant=\"outlined\"\n      onClick={() => {\n        if (currentlySelected !== t.oha.interface.type) {\n          onChange(t.oha.interface.type)\n        }\n      }}\n    >\n      <t.Icon className=\"icon\" />\n      {t.name}\n    </TypeButton>\n  ))\n}\n\nexport const ConfigureInterface = ({\n  iface = {},\n  onChange,\n  onClickEditJSON\n}) => {\n  return (\n    <PaperContainer>\n      <SelectType\n        currentlySelected={iface.type}\n        onChange={type => {\n          onChange(setIn(iface, [\"type\"], type))\n        }}\n      />\n      <Heading>Options</Heading>\n      <Box paddingTop={2} />\n      {!iface.type && <NoOptions>Select a Type</NoOptions>}\n      {iface.type === \"image_segmentation\" && (\n        <ConfigureImageSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"image_classification\" && (\n        <ConfigureImageClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"composite\" && (\n        <ConfigureComposite iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"data_entry\" && (\n        <ConfigureDataEntry iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"audio_transcription\" && (\n        <ConfigureAudioTranscription iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_entity_recognition\" && (\n        <ConfigureNLP iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"text_classification\" && (\n        <ConfigureTextClassification iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"video_segmentation\" && (\n        <ConfigureVideoSegmentation iface={iface} onChange={onChange} />\n      )}\n      {iface.type === \"3d_bounding_box\" && (\n        <Configure3D iface={iface} onChange={onChange} />\n      )}\n    </PaperContainer>\n  )\n}\n\nexport default ConfigureInterface\n","// @flow weak\n\nimport React from \"react\"\nimport ConfigureInterface, { Heading } from \"../ConfigureInterface\"\nimport { useUpdate } from \"react-use\"\nimport usePosthog from \"../../utils/use-posthog\"\nimport PaperContainer from \"../PaperContainer\"\nimport Box from \"@material-ui/core/Box\"\nimport Paper from \"@material-ui/core/Paper\"\nimport MuiButton from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useIsDesktop from \"../../utils/use-is-desktop\"\n\nconst Button = styled(MuiButton)({\n  margin: 8\n})\n\nexport default ({ oha, onChange, onClickEditJSON, onClearLabelData }) => {\n  const { interface: iface } = oha\n  const posthog = usePosthog()\n  const forceUpdate = useUpdate()\n  const isDesktop = useIsDesktop()\n\n  return (\n    <div>\n      <ConfigureInterface\n        iface={iface}\n        onChange={onChange}\n        onClickEditJSON={onClickEditJSON}\n      />\n      <PaperContainer>\n        <Heading>Advanced</Heading>\n        <Box padding={2}>\n          <Button onClick={onClickEditJSON} variant=\"outlined\">\n            Edit JSON\n          </Button>\n          <Button\n            onClick={() => {\n              if (\n                window.confirm(\n                  \"Are you sure you want to delete all your label data? Click OK to delete.\"\n                )\n              ) {\n                onClearLabelData()\n              }\n            }}\n            variant=\"outlined\"\n          >\n            Clear All Labels\n          </Button>\n          <Button\n            onClick={onClickEditJSON}\n            variant=\"outlined\"\n            onClick={() => {\n              if (posthog.has_opted_out_captureing()) {\n                posthog.opt_in_captureing()\n              } else {\n                posthog.opt_out_captureing()\n              }\n              forceUpdate()\n            }}\n          >\n            {posthog.has_opted_out_captureing() ? \"Enable\" : \"Disable\"}{\" \"}\n            Telemetry\n          </Button>\n        </Box>\n      </PaperContainer>\n    </div>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect } from \"react\"\nimport Box from \"@material-ui/core/Box\"\nimport AceEditor from \"react-ace\"\nimport SimpleDialog from \"../SimpleDialog\"\n\nexport default ({ open, sampleIndex, sampleInput, onChange, onClose }) => {\n  const [text, changeText] = useState()\n  const [error, changeError] = useState()\n  useEffect(() => {\n    const newText = JSON.stringify(sampleInput, null, \"  \")\n    if (newText !== text) {\n      changeText(newText)\n      changeError(null)\n    }\n  }, [sampleIndex])\n\n  return (\n    <SimpleDialog\n      open={open}\n      onClose={onClose}\n      title={`taskData[${sampleIndex}]`}\n    >\n      <AceEditor\n        theme=\"github\"\n        mode=\"javascript\"\n        width=\"100%\"\n        value={text}\n        editorProps={{ $blockScrolling: Infinity }}\n        onChange={t => {\n          changeText(t)\n          changeError(null)\n          try {\n            onChange(JSON.parse(t))\n          } catch (e) {\n            changeError(e.toString())\n          }\n        }}\n      />\n      <Box color=\"red\">{error}</Box>\n    </SimpleDialog>\n  )\n}\n","// @flow weak\n\nimport React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({})\nconst Stat = styled(\"div\")({\n  display: \"inline-flex\",\n  flexDirection: \"column\",\n  margin: 16\n})\nconst Label = styled(\"div\")({\n  fontSize: 14,\n  fontWeight: \"bold\",\n  color: colors.grey[700]\n})\nconst Value = styled(\"div\")({\n  fontSize: 32,\n  marginTop: 8\n})\n\nexport default ({ stats }) => {\n  return (\n    <Container>\n      {stats.map(s => (\n        <Stat key={s.name}>\n          <Label>{s.name}</Label>\n          <Value>{s.value}</Value>\n        </Stat>\n      ))}\n    </Container>\n  )\n}\n","// @flow\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useReducer\n} from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport * as colors from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\nimport classNames from \"classnames\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"flex-start\",\n    pointerEvents: \"none\"\n  },\n  msgBox: {\n    display: \"flex\",\n    backgroundColor: colors.blue[700],\n    fontSize: 12,\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4,\n    boxShadow: \"0px 3px 8px rgba(0,0,0,0.5)\",\n    \"&.warning\": {\n      backgroundColor: colors.orange[700]\n    },\n    \"&.error\": {\n      backgroundColor: colors.red[700]\n    }\n  }\n})\n\nconst REFRESH_INTERVAL = 100\n\nconst ToastContext = createContext()\n\nexport const useToasts = () => {\n  const { addToast } = useContext(ToastContext)\n\n  return { addToast }\n}\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, changeToasts] = useReducer((state = [], action) => {\n    if (action.type === \"add\") {\n      const fullLife =\n        action.messageType === \"info\"\n          ? 2000\n          : action.messageType === \"warning\"\n          ? 5000\n          : 5000\n\n      return state.concat([\n        {\n          id: Math.random()\n            .toString()\n            .split(\".\")[1],\n          message: action.message,\n          type: action.messageType,\n          life: fullLife,\n          fullLife\n        }\n      ])\n    } else if (action.type === \"tick\") {\n      return state\n        .map(msg => ({\n          ...msg,\n          life: msg.life - REFRESH_INTERVAL\n        }))\n        .filter(msg => msg.life > 0)\n    }\n    return state\n  }, [])\n  const c = useStyles()\n\n  useEffect(() => {\n    if (toasts.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeToasts({ type: \"tick\" })\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [toasts])\n\n  const addToast = (message: string, messageType: string = \"info\") =>\n    changeToasts({ type: \"add\", message, messageType })\n\n  return (\n    <>\n      <ToastContext.Provider value={{ toasts, addToast }}>\n        {children}\n      </ToastContext.Provider>\n      <div className={c.root}>\n        {toasts.map(msg => (\n          <Collapse key={msg.id} in={msg.life < msg.fullLife}>\n            <Fade in={msg.life > 600}>\n              <div className={classNames(c.msgBox, msg.type)}>\n                {msg.message}\n              </div>\n            </Fade>\n          </Collapse>\n        ))}\n      </div>\n    </>\n  )\n}\n","// @flow\n\nimport React, { useState, useEffect, useReducer } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nimport Grid from \"@material-ui/core/Grid\"\nimport Button from \"@material-ui/core/Button\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Typography from \"@material-ui/core/Typography\"\nimport GithubIcon from \"../Header/GithubIcon.js\"\nimport Header from \"../Header\"\nimport brace from \"brace\"\nimport AceEditor from \"react-ace\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport SaveIcon from \"@material-ui/icons/Save\"\nimport defaultOHAObject from \"./default-oha-object\"\nimport UniversalDataViewer from \"../UniversalDataViewer\"\nimport EditableTitleText from \"./EditableTitleText.js\"\nimport SamplesView from \"../SamplesView\"\nimport InterfacePage from \"../InterfacePage\"\nimport EditSampleDialog from \"../EditSampleDialog\"\nimport SampleGrid from \"../SampleGrid\"\nimport PaperContainer from \"../PaperContainer\"\nimport Stats from \"../Stats\"\nimport useElectron from \"../../utils/use-electron\"\nimport moment from \"moment\"\nimport duration from \"duration\"\nimport useTimeToCompleteSample from \"../../utils/use-time-to-complete-sample.js\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { useToasts } from \"../Toasts\"\nimport { setIn, without } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\n\nimport \"brace/mode/javascript\"\nimport \"brace/theme/github\"\n\nconst useStyles = makeStyles({\n  headerButton: {\n    color: \"#fff\"\n  },\n  saveIcon: {\n    marginRight: 4\n  },\n  editIcon: {\n    marginLeft: 4\n  },\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"100vw\",\n    height: \"100vh\"\n  }\n})\n\nconst headerTabs = [\"Settings\", \"Samples\", \"Label\"]\n\nexport default ({\n  datasetName = \"Universal Data Tool\",\n  oha,\n  content,\n  inSession,\n  url,\n  fileName = \"unnamed\",\n  onChangeFileName,\n  onChangeOHA = () => null,\n  onFileDrop,\n  initialMode = \"settings\" //= \"samples\"\n}) => {\n  const c = useStyles()\n  const { addToast } = useToasts()\n  const [mode, changeMode] = useState(initialMode)\n  const [singleSampleOHA, changeSingleSampleOHA] = useState()\n  const [sampleInputEditor, changeSampleInputEditor] = useState({})\n  const [jsonText, changeJSONText] = useState()\n  const { remote, ipcRenderer } = useElectron() || {}\n\n  const [\n    timeToCompleteSample,\n    changeSampleTimeToComplete\n  ] = useTimeToCompleteSample()\n\n  useEffect(() => {\n    if (!ipcRenderer) return\n    const onOpenSettingsPage = () => changeMode(\"settings\")\n    const onOpenSamplesPage = () => changeMode(\"samples\")\n    const onOpenLabelPage = () => changeMode(\"label\")\n    ipcRenderer.on(\"open-settings-page\", onOpenSettingsPage)\n    ipcRenderer.on(\"open-samples-page\", onOpenSamplesPage)\n    ipcRenderer.on(\"open-label-page\", onOpenLabelPage)\n    return () => {\n      ipcRenderer.removeListener(\"open-settings-page\", onOpenSettingsPage)\n      ipcRenderer.removeListener(\"open-samples-page\", onOpenSamplesPage)\n      ipcRenderer.removeListener(\"open-label-page\", onOpenLabelPage)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (mode === \"json\") {\n      changeJSONText(JSON.stringify(oha, null, \"  \"))\n    }\n  }, [mode])\n\n  useEffect(() => {\n    if (!jsonText || mode !== \"json\") return\n    try {\n      // TODO schema validation etc.\n      onChangeOHA(JSON.parse(jsonText))\n    } catch (e) {}\n  }, [jsonText])\n\n  const onChangeTab = useEventCallback(tab => changeMode(tab.toLowerCase()))\n\n  let percentComplete = 0\n  if (\n    oha.taskOutput &&\n    oha.taskOutput.length > 0 &&\n    oha.taskData &&\n    oha.taskData.length > 0\n  ) {\n    percentComplete =\n      oha.taskOutput.filter(Boolean).length / oha.taskData.length\n  }\n\n  return (\n    <div className={c.container}>\n      <Header\n        title={\n          inSession ? (\n            <TextField\n              label=\"Share Link\"\n              value={url}\n              variant=\"outlined\"\n              size=\"small\"\n            />\n          ) : (\n            <EditableTitleText\n              label=\"File Name\"\n              onChange={onChangeFileName}\n              value={fileName || \"\"}\n            />\n          )\n        }\n        onChangeTab={onChangeTab}\n        currentTab={mode}\n        tabs={headerTabs}\n      />\n      <div style={{ overflowY: \"scroll\" }}>\n        {mode === \"json\" && (\n          <AceEditor\n            theme=\"github\"\n            mode=\"javascript\"\n            width=\"100%\"\n            value={jsonText || \"\"}\n            editorProps={{ $blockScrolling: Infinity }}\n            onChange={t => changeJSONText(t)}\n          />\n        )}\n        {mode === \"settings\" && (\n          <InterfacePage\n            onClickEditJSON={() => changeMode(\"json\")}\n            oha={oha}\n            onClearLabelData={() => {\n              onChangeOHA(without(oha, \"taskOutput\"))\n            }}\n            onChange={iface => {\n              if (\n                iface.type !== oha.interface.type &&\n                oha.interface.type !== \"empty\" &&\n                oha.taskOutput &&\n                oha.taskOutput.some(Boolean)\n              ) {\n                addToast(\n                  \"Warning: Changing label types can cause label data issues. You might want to clear all label data.\",\n                  \"error\"\n                )\n              }\n              onChangeOHA({\n                ...oha,\n                interface: iface\n              })\n            }}\n          />\n        )}\n        {mode === \"samples\" && (\n          <SamplesView\n            oha={oha}\n            openSampleLabelEditor={sampleIndex => {\n              changeSingleSampleOHA({\n                ...oha,\n                taskData: [oha.taskData[sampleIndex]],\n                taskOutput: [(oha.taskOutput || [])[sampleIndex]],\n                sampleIndex,\n                annotationStartTime: Date.now()\n              })\n              changeMode(\"label\")\n            }}\n            openSampleInputEditor={sampleIndex => {\n              changeSampleInputEditor({ open: true, sampleIndex })\n            }}\n            deleteSample={sampleIndex => {\n              const newTaskData = [...oha.taskData]\n              const newTaskOutput = oha.taskOutput\n                ? [...oha.taskOutput]\n                : undefined\n              newTaskData.splice(sampleIndex, 1)\n              if (newTaskOutput) {\n                newTaskOutput.splice(sampleIndex, 1)\n              }\n              onChangeOHA({\n                ...oha,\n                taskData: newTaskData,\n                taskOutput: newTaskOutput\n              })\n            }}\n            onChangeOHA={onChangeOHA}\n          />\n        )}\n        {mode === \"label\" && singleSampleOHA ? (\n          <UniversalDataViewer\n            datasetName={`Sample ${singleSampleOHA.sampleIndex}`}\n            onSaveTaskOutputItem={(relativeIndex, output) => {\n              let newOHA = oha\n              if (!newOHA.taskOutput) {\n                newOHA = setIn(\n                  newOHA,\n                  [\"taskOutput\"],\n                  (newOHA.taskData || []).map(td => null)\n                )\n              }\n              if (\n                newOHA.taskOutput.length < newOHA.taskData.length ||\n                newOHA.taskOutput.includes(undefined)\n              ) {\n                newOHA = setIn(\n                  newOHA,\n                  [\"taskOutput\"],\n                  newOHA.taskData.map((td, tdi) =>\n                    newOHA.taskOutput[tdi] === undefined\n                      ? null\n                      : newOHA.taskOutput[tdi]\n                  )\n                )\n              }\n              newOHA = setIn(\n                newOHA,\n                [\"taskOutput\", singleSampleOHA.sampleIndex],\n                output\n              )\n              changeSingleSampleOHA(\n                setIn(singleSampleOHA, [\"taskOutput\", relativeIndex], output)\n              )\n              onChangeOHA(newOHA)\n            }}\n            onExit={(nextAction = \"nothing\") => {\n              if (singleSampleOHA.startTime) {\n                changeSampleTimeToComplete(\n                  Date.now() - singleSampleOHA.startTime\n                )\n              }\n              const { sampleIndex } = singleSampleOHA\n              switch (nextAction) {\n                case \"go-to-next\":\n                  if (sampleIndex !== oha.taskData.length - 1) {\n                    changeSingleSampleOHA({\n                      ...oha,\n                      taskData: [oha.taskData[sampleIndex + 1]],\n                      taskOutput: [(oha.taskOutput || [])[sampleIndex + 1]],\n                      sampleIndex: sampleIndex + 1,\n                      startTime: Date.now()\n                    })\n                    return\n                  }\n                  break\n                case \"go-to-previous\":\n                  if (sampleIndex !== 0) {\n                    changeSingleSampleOHA({\n                      ...oha,\n                      taskData: [oha.taskData[sampleIndex - 1]],\n                      taskOutput: [(oha.taskOutput || [])[sampleIndex - 1]],\n                      sampleIndex: sampleIndex - 1,\n                      startTime: Date.now()\n                    })\n                    return\n                  }\n                  break\n              }\n              changeSingleSampleOHA(null)\n            }}\n            oha={singleSampleOHA}\n          />\n        ) : (\n          mode === \"label\" && (\n            <PaperContainer>\n              <Stats\n                stats={[\n                  {\n                    name: \"Percent Complete\",\n                    value: Math.floor(percentComplete * 100) + \"%\"\n                  },\n                  {\n                    name: \"Time per Sample\",\n                    value: duration(\n                      new Date(Date.now() - timeToCompleteSample)\n                    ).toString(1, 1)\n                  },\n                  {\n                    name: \"Estimated Remaining\",\n                    value: duration(\n                      new Date(\n                        Date.now() -\n                          timeToCompleteSample *\n                            (1 - percentComplete) *\n                            (oha.taskData || []).length\n                      )\n                    ).toString(1, 2)\n                  }\n                ]}\n              />\n              <SampleGrid\n                count={(oha.taskData || []).length}\n                completed={(oha.taskOutput || []).map(Boolean)}\n                onClick={sampleIndex => {\n                  changeSingleSampleOHA({\n                    ...oha,\n                    taskData: [oha.taskData[sampleIndex]],\n                    taskOutput: [(oha.taskOutput || [])[sampleIndex]],\n                    sampleIndex,\n                    startTime: Date.now()\n                  })\n                }}\n              />\n            </PaperContainer>\n          )\n        )}\n      </div>\n      <EditSampleDialog\n        {...sampleInputEditor}\n        sampleInput={\n          sampleInputEditor.sampleIndex !== undefined\n            ? oha.taskData[sampleInputEditor.sampleIndex]\n            : null\n        }\n        onClose={() => {\n          changeSampleInputEditor({ open: false })\n        }}\n        onChange={newInput => {\n          onChangeOHA(\n            setIn(oha, [\"taskData\", sampleInputEditor.sampleIndex], newInput)\n          )\n        }}\n      />\n    </div>\n  )\n}\n","import { useReducer } from \"react\"\n\nexport default () => {\n  const [{ timeToCompleteSample }, changeSampleTimeToComplete] = useReducer(\n    (state, newTimeToComplete) => {\n      const newSamplesInWindow = state.samplesInWindow\n        .slice(-10)\n        .concat([newTimeToComplete])\n      return {\n        timeToCompleteSample:\n          newSamplesInWindow.reduce((acc, a) => acc + a, 0) /\n          newSamplesInWindow.length,\n        samplesInWindow: newSamplesInWindow\n      }\n    },\n    { timeToCompleteSample: 0, samplesInWindow: [] }\n  )\n  return [timeToCompleteSample, changeSampleTimeToComplete]\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { red } from \"@material-ui/core/colors\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport Fade from \"@material-ui/core/Fade\"\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    alignItems: \"center\",\n    pointerEvents: \"none\"\n  },\n  errorBox: {\n    display: \"flex\",\n    backgroundColor: red[700],\n    color: \"#fff\",\n    padding: 4,\n    marginBottom: 4\n  }\n})\n\nexport default ({ errors }) => {\n  const c = useStyles()\n  return (\n    <div className={c.root}>\n      {errors.map(err => (\n        <Collapse key={err.id} in={err.life < 5000}>\n          <Fade in={err.life > 500}>\n            <div className={c.errorBox}>{err.message}</div>\n          </Fade>\n        </Collapse>\n      ))}\n    </div>\n  )\n}\n","// @flow\n\nimport { useState, useEffect } from \"react\"\n\nconst REFRESH_INTERVAL = 100\n\nexport default () => {\n  const [errors, changeErrors] = useState([])\n  useEffect(() => {\n    if (errors.length === 0) return () => {}\n    let interval = setInterval(() => {\n      changeErrors(\n        errors\n          .map(err => ({\n            ...err,\n            life: err.life - REFRESH_INTERVAL\n          }))\n          .filter(err => err.life > 0)\n      )\n    }, REFRESH_INTERVAL)\n    return () => clearInterval(interval)\n  }, [errors])\n\n  function addError(message: string) {\n    changeErrors(\n      errors.concat([\n        {\n          id: Math.random()\n            .toString()\n            .split(\".\")[1],\n          message,\n          life: 5000\n        }\n      ])\n    )\n  }\n\n  return [errors, addError]\n}\n","/*\nThis doesn't handle a fair number of edge cases, for the full specification\nfor what it should implement, see https://tools.ietf.org/html/rfc6902\n\nWhen applySeamlessPatch is called, it usually is accompanied by a object hash\ncheck to make sure that the patch applied correctly, and if not, perform\na download of the latest version. Because of this, we can safely ignore the\ntricky edge cases.\n*/\n\nimport { setIn, getIn, updateIn, without } from \"seamless-immutable\"\n\nfunction addToArray(a, newValue) {\n  return a.concat([newValue])\n}\n\nfunction withoutIn(obj, path) {\n  if (path.length === 0) return without(obj, path[0])\n  const parentPath = path.slice(0, -1)\n  const key = path[path.length - 1]\n  const parentObj = getIn(obj, parentPath)\n  if (Array.isArray(parentObj)) {\n    const index = parseInt(key)\n    return setIn(obj, parentPath, [\n      ...parentObj.slice(0, index),\n      ...parentObj.slice(index + 1)\n    ])\n  } else {\n    return setIn(obj, parentPath, without(parentObj, key))\n  }\n}\n\nexport default (object, patches) => {\n  for (const patch of patches) {\n    let { op, path } = patch\n    path = path.split(\"/\").filter(Boolean)\n    if (path.length === 0) {\n      // this operation is on the root object, special handling should apply\n      if (op === \"replace\") {\n        object = patch.value\n        continue\n      }\n      throw new Error(\"Operation on root object not supported\")\n    }\n    switch (op) {\n      case \"replace\": {\n        object = setIn(object, path, patch.value)\n        continue\n      }\n      case \"copy\": {\n        object = setIn(object, path, getIn(object, patch.from.split(\"/\")))\n        continue\n      }\n      case \"add\": {\n        if (!isNaN(parseInt(path.slice(-1)[0]))) {\n          object = setIn(object, path, patch.value)\n        } else {\n          const arrayAtPath = Array.isArray(getIn(object, path))\n          if (arrayAtPath) {\n            object = updateIn(object, path, addToArray, patch.value)\n          } else {\n            object = setIn(object, path, patch.value)\n          }\n        }\n        continue\n      }\n      case \"move\": {\n        const from = patch.from.split(\"/\")\n        object = setIn(object, path, getIn(object, from))\n        object = withoutIn(object, from)\n        continue\n      }\n      case \"remove\": {\n        object = withoutIn(object, path)\n        continue\n      }\n    }\n  }\n  return object\n}\n","// @flow\n\nimport { useState, useEffect } from \"react\"\nimport bent from \"bent\"\nimport moment from \"moment\"\nimport * as rfc6902 from \"rfc6902\"\nimport objectHash from \"object-hash\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport isEqual from \"lodash/isEqual\"\nimport { useToasts } from \"../../../components/Toasts\"\nimport makeImmutable, { setIn } from \"seamless-immutable\"\nimport applySeamlessPatch from \"./apply-seamless-patch\"\n\nconst serverUrl = window.localStorage.useLocalCollaborationServer\n  ? \"http://localhost:3000\"\n  : \"https://udt-collaboration.workaround.now.sh\"\n\nconst getJSON = bent(\"json\", \"GET\", serverUrl)\nconst postJSON = bent(\"json\", \"POST\", serverUrl)\nconst patchJSON = bent(\"json\", \"PATCH\", serverUrl)\n\nconst hash = o => objectHash(JSON.parse(JSON.stringify(o)))\n\nexport const getLatestState = async sessionId => {\n  try {\n    const res = await getJSON(`/api/session/${encodeURIComponent(sessionId)}`)\n    return {\n      state: res.udt_json,\n      version: res.version\n    }\n  } catch (e) {\n    console.log(`error getting session \"${sessionId}\"`)\n    return { state: null, version: null }\n  }\n}\n\nexport const convertToCollaborativeFile = async file => {\n  const response = await postJSON(\"/api/session\", { udt: file.content })\n  return {\n    id: response.short_id,\n    sessionId: response.short_id,\n    url: `${window.location.origin}?s=${response.short_id}`,\n    content: file.content,\n    lastSyncedVersion: response.version,\n    lastSyncedState: cloneDeep(file.content),\n    mode: \"server\"\n  }\n}\n\nexport default (file, changeFile) => {\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n\n    const checkForLatestPatch = async () => {\n      let patch, hashOfLatestState, latestVersion, changeLog\n      try {\n        ;({\n          patch,\n          hashOfLatestState,\n          latestVersion,\n          changeLog\n        } = await getJSON(\n          `/api/session/${encodeURIComponent(file.sessionId)}/diffs?since=${\n            file.lastSyncedVersion\n          }`\n        ))\n      } catch (e) {\n        addToast(\n          \"There was an issue connecting to the server. Refresh to retry.\",\n          \"error\"\n        )\n        return\n      }\n      if (!timeout) return\n      for (const { userName, op, path } of changeLog) {\n        if (path.startsWith(\"/interface\")) {\n          addToast(`${userName} changed the project settings`, \"warning\")\n        } else if (path.startsWith(\"/taskOutput\")) {\n          const sampleMatch = path.match(/\\/taskOutput\\/([^\\/]+)/)\n          if (sampleMatch) {\n            addToast(`${userName} labeled sample ${sampleMatch[1]}`)\n          } else {\n            addToast(`${userName} changed many samples`, \"warning\")\n          }\n        } else if (path.startsWith(\"/taskData\")) {\n          addToast(`${userName} changed the sample data`, \"warning\")\n        } else {\n          addToast(`${userName} did a ${op} at ${path}`)\n        }\n      }\n      if (patch.length > 0) {\n        let patchFailed = false,\n          newFileContent\n        // try {\n        // Apply update (note: this violates immutability, but prevents rerenders\n        // so should be kept)\n        newFileContent = applySeamlessPatch(file.content, patch)\n        // patchResult = jsonpatch.applyPatch(file.content, patch, false, true)\n        // file.content = patchResult.newDocument\n        // } catch (e) {\n        //   patchFailed = true\n        // }\n        if (patchFailed || hash(newFileContent) !== hashOfLatestState) {\n          if (!patchFailed) {\n            console.log(\n              \"when getting diffs, hashes were not equal! getting latest version from server...\"\n            )\n          } else {\n            console.log(\n              \"when getting diffs, the patch failed! getting latest version from server...\"\n            )\n          }\n          const { state: latest, version } = await getLatestState(\n            file.sessionId\n          )\n          changeFile(\n            makeImmutable({\n              ...file,\n              content: latest,\n              lastSyncedState: latest,\n              lastSyncedVersion: version\n            })\n          )\n        } else {\n          changeFile(\n            makeImmutable({\n              ...file,\n              content: newFileContent,\n              lastSyncedState: newFileContent,\n              lastSyncedVersion: latestVersion\n            })\n          )\n        }\n      }\n      if (!timeout) return\n      timeout = setTimeout(checkForLatestPatch, 500)\n    }\n\n    let timeout = setTimeout(checkForLatestPatch, 500)\n\n    return () => {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }, [file])\n\n  // Update the Server State by Sending Patches\n  useEffect(() => {\n    if (!file || file.mode !== \"server\") return\n    async function sendPatchIfChanges() {\n      const patch = rfc6902.createPatch(file.lastSyncedState, file.content)\n      if (patch.length === 0) return\n      let userName = \"anonymous\"\n      try {\n        userName = JSON.parse(window.localStorage.userName)\n      } catch (e) {}\n\n      const { hashOfLatestState, latestVersion } = await patchJSON(\n        `/api/session/${encodeURIComponent(file.sessionId)}`,\n        { patch, userName }\n      )\n\n      if (hash(file.content) !== hashOfLatestState) {\n        console.log(\n          \"after patch, hashes were not equal! getting latest version from server...\"\n        )\n        const { state: latest, version } = await getLatestState(file.sessionId)\n        changeFile(\n          makeImmutable({\n            ...file,\n            content: latest,\n            lastSyncedState: latest,\n            lastSyncedVersion: version\n          })\n        )\n      } else {\n        changeFile(\n          setIn(\n            setIn(file, [\"lastSyncedVersion\"], latestVersion),\n            [\"lastSyncedState\"],\n            file.content\n          )\n        )\n      }\n    }\n    sendPatchIfChanges()\n  }, [file && file.content])\n}\n","// @flow\n\nimport { useEffect } from \"react\"\nimport useEventCallback from \"use-event-callback\"\nimport useElectron from \"../use-electron.js\"\nimport { useToasts } from \"../../components/Toasts\"\nimport templates from \"../../components/StartingPage/templates.js\"\nimport { setIn } from \"seamless-immutable\"\nimport useIsDesktop from \"../use-is-desktop\"\n\nconst webReturn = { saveFile: () => null }\n\nexport default (file, changeFile) => {\n  const isDesktop = useIsDesktop()\n  if (!isDesktop) return webReturn\n  const { addToast } = useToasts()\n  const { remote, ipcRenderer } = useElectron()\n  const saveFile = useEventCallback(({ saveAs = false } = {}) => {\n    if (!file) return\n    async function saveFileAsync() {\n      let filePath = file.filePath\n      if (!file.filePath || saveAs) {\n        const {\n          cancelled,\n          filePath: newFilePath\n        } = await remote.dialog.showSaveDialog({\n          filters: [{ name: \".udt.json\", extensions: [\"udt.json\"] }]\n        })\n        filePath =\n          !newFilePath || newFilePath.endsWith(\".json\")\n            ? newFilePath\n            : `${newFilePath}.udt.json`\n        if (cancelled || !filePath) {\n          addToast(\"Could not save\")\n          return\n        }\n        changeFile({\n          ...file,\n          filePath,\n          fileName: filePath.split(\"/\").slice(-1)[0]\n        })\n      }\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(filePath, JSON.stringify(file.content, null, \"  \"))\n      addToast(\"File Saved!\")\n    }\n    saveFileAsync()\n  })\n\n  useEffect(() => {\n    if (!file || !file.filePath) return\n    if (file.fileName !== file.filePath.split(\"/\").slice(-1)[0]) {\n      changeFile(\n        setIn(\n          file,\n          [\"filePath\"],\n          file.filePath\n            .split(\"/\")\n            .slice(0, -1)\n            .concat([\n              file.fileName +\n                (file.fileName.endsWith(\".json\") ? \"\" : \".oha.json\")\n            ])\n            .join(\"/\")\n        )\n      )\n    }\n  }, [file && file.fileName, file && file.fileName])\n\n  return { saveFile }\n}\n","// @flow weak\n\nimport { useEffect } from \"react\"\nimport usePosthog from \"../../utils/use-posthog\"\nconst posthog = usePosthog()\n\nexport default udt => {\n  useEffect(() => {\n    if (!udt || !udt.interface) return\n    posthog.capture(\"interface_type\", { interface_type: udt.interface.type })\n    posthog.people.set({ last_used_interface_type: udt.interface.type })\n  }, [udt && udt.interface && udt.interface.type])\n  useEffect(() => {\n    if (!udt || !udt.taskData) return\n    posthog.capture(\"dataset_size\", {\n      dataset_size: (udt.taskData || []).length\n    })\n  }, [udt && (udt.taskData || []).length])\n  useEffect(() => {\n    if (!udt || !udt.taskOutput) return\n    const numCompleted = udt.taskOutput.filter(Boolean).length\n    posthog.capture(\"sample_completion\", {\n      dataset_size: (udt.taskData || []).length,\n      samples_completed: numCompleted,\n      percent_completed: numCompleted / (udt.taskData || []).length\n    })\n  }, [\n    udt && (udt.taskData || []).length,\n    udt && udt.taskOutput && udt.taskOutput.filter(Boolean).length\n  ])\n}\n","// @flow\n\nimport { useState, useMemo, useCallback, useEffect } from \"react\"\nimport useServer, {\n  getLatestState,\n  convertToCollaborativeFile\n} from \"./use-server\"\nimport useFilesystem from \"./use-filesystem\"\nimport useLocalStorage from \"./use-local-storage\"\nimport { useToasts } from \"../../components/Toasts\"\nimport moment from \"moment\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport fromUDTCSV from \"../from-udt-csv.js\"\nimport useEventCallback from \"use-event-callback\"\nimport useFileTelemetry from \"./use-file-telemetry\"\n\nexport default () => {\n  const [file, changeFile] = useState()\n  const { addToast } = useToasts()\n\n  const { saveFile } = useFilesystem(file, changeFile)\n  const { recentItems } = useLocalStorage(file, changeFile)\n  useServer(file, changeFile)\n\n  // Telemetry\n  useFileTelemetry(file && file.content)\n\n  const openFile = useEventCallback(fsFile => {\n    const { name: fileName, path: filePath } = fsFile\n\n    function handleLoadedFile(content) {\n      try {\n        let oha\n        if (fileName.endsWith(\"csv\")) {\n          oha = fromUDTCSV(content)\n        } else {\n          oha = JSON.parse(content)\n        }\n        // TODO validate OHA and prompt to open anyway if invalid\n        changeFile({\n          fileName,\n          filePath,\n          mode: filePath ? \"filesystem\" : \"local-storage\",\n          content: oha,\n          id: filePath\n        })\n      } catch (e) {\n        console.log(e.toString())\n        addToast(\"Couldn't read file, see console for details\", \"error\")\n        // addError(`Could not read file \"${fsFile.name}\"`)\n      }\n    }\n\n    if (fsFile.content) {\n      handleLoadedFile(fsFile.content)\n    } else {\n      const reader = new FileReader()\n      reader.onload = e => {\n        const content = e.target.result\n        handleLoadedFile(content)\n      }\n      reader.readAsText(fsFile)\n    }\n  })\n\n  const openUrl = useEventCallback(async url => {\n    const sessionId = decodeURIComponent(url.match(/[\\?&]s=([^&]+)/)[1])\n    if (!sessionId) return\n    const { state, version } = await getLatestState(sessionId)\n    if (!state) return\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/?s=${encodeURIComponent(sessionId)}`\n    )\n    changeFile({\n      url,\n      sessionId,\n      mode: \"server\",\n      id: sessionId,\n      content: state,\n      lastSyncedState: cloneDeep(state),\n      lastSyncedVersion: version\n    })\n  })\n\n  useEffect(() => {\n    if (!file) return\n    if (file.mode === \"server\") return\n    window.history.replaceState({}, window.document.title, `/`)\n  }, [file && file.mode])\n\n  useEffect(() => {\n    if (window.location.search.match(/[\\?&]s=([a-zA-Z0-9]+)/)) {\n      openUrl(window.location.href)\n    }\n  }, [])\n\n  const makeSession = useEventCallback(async () => {\n    const newFile = await convertToCollaborativeFile(file)\n    changeFile(newFile)\n    window.history.replaceState(\n      {},\n      window.document.title,\n      `/?s=${encodeURIComponent(newFile.sessionId)}`\n    )\n  })\n\n  return useMemo(\n    () => ({\n      file,\n      changeFile,\n      openFile,\n      openUrl,\n      makeSession,\n      saveFile,\n      recentItems\n    }),\n    [file, changeFile, openFile, makeSession, recentItems]\n  )\n}\n","// @flow\n\nimport { useLocalStorage } from \"react-use\"\nimport { useEffect } from \"react\"\n\nexport default (file, changeFile) => {\n  let [recentItems, changeRecentItems] = useLocalStorage(\"recentItems\", [])\n  if (!recentItems) recentItems = []\n\n  useEffect(() => {\n    if (!file) return\n    if (!file.fileName || file.fileName === \"unnamed\") return\n    if (file.mode !== \"local-storage\" && file.mode !== \"filesystem\") return\n    if (recentItems.map(item => item.id).includes(file.id)) {\n      changeRecentItems(recentItems.map(ri => (ri.id === file.id ? file : ri)))\n    } else {\n      changeRecentItems([file].concat(recentItems).slice(0, 3))\n    }\n  }, [file])\n\n  return { recentItems }\n}\n","import JAC from \"jac-format\"\n\nexport default csv => {\n  const json = JAC.fromCSV(csv)\n  return {\n    interface: json.interface,\n    taskOutput: json.samples.map(sample => sample.output),\n    taskData: json.samples.map(sample => {\n      delete sample.output\n      return sample\n    })\n  }\n}\n","import JAC from \"jac-format\"\nimport range from \"lodash/range\"\nimport { flatten } from \"flat\"\n\nexport default obj => {\n  const samplesObj = {}\n\n  // Convert to single samples array\n  samplesObj.interface = obj.interface\n  samplesObj.samples = obj.taskData.map((td, i) => ({\n    ...td,\n    output: (obj.taskOutput || [])[i]\n  }))\n\n  // Find all possible sample keys\n  let sampleKeys = new Set()\n  for (const sample of samplesObj.samples) {\n    Object.keys(flatten(sample)).forEach(k => sampleKeys.add(k))\n  }\n  sampleKeys = Array.from(sampleKeys).sort(\n    (a, b) => a.split(\".\").length - b.split(\".\").length\n  )\n\n  if (sampleKeys.some(k => k.includes(\"output.keyframes\"))) {\n    sampleKeys = sampleKeys.filter(k => k.includes(\"output.keyframes\"))\n    sampleKeys.push(\"output.keyframes\")\n  }\n\n  const options = {\n    rows: [\n      \"interface\",\n      ...range(samplesObj.samples.length).map(i => `samples.${i}`)\n    ],\n    columns: [\".\", ...sampleKeys]\n  }\n\n  return JAC.toCSV(samplesObj, options)\n}\n","// @flow\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport OHAEditor from \"../OHAEditor\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useLocalStorage from \"../../utils/use-local-storage.js\"\nimport useFileHandler from \"../../utils/file-handlers\"\nimport download from \"in-browser-download\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\nimport { setIn } from \"seamless-immutable\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles({\n  empty: {\n    textAlign: \"center\",\n    padding: 100,\n    color: \"#666\",\n    fontSize: 28\n  }\n})\n\nconst randomId = () =>\n  Math.random()\n    .toString()\n    .split(\".\")[1]\n\nexport default () => {\n  const c = useStyles()\n  const {\n    file,\n    changeFile,\n    openFile,\n    openUrl,\n    makeSession,\n    recentItems\n  } = useFileHandler()\n  const [errors, addError] = useErrors()\n\n  const onCreateTemplate = useEventCallback(template => {\n    changeFile({\n      fileName: \"unnamed\",\n      content: template.oha,\n      id: randomId(),\n      mode: \"local-storage\"\n    })\n  })\n\n  const openRecentItem = useEventCallback(item => changeFile(item))\n  const onClickHome = useEventCallback(() => changeFile(null))\n  const onDownload = useEventCallback(format => {\n    if (!file) return\n    const outputName = (file.sessionId || file.fileName) + \".udt.\" + format\n    if (format === \"json\") {\n      download(JSON.stringify(file.content), outputName)\n    } else if (format === \"csv\") {\n      download(toUDTCSV(file.content), outputName)\n    }\n  })\n\n  const inSession = file && file.mode === \"server\"\n  const [sessionBoxOpen, changeSessionBoxOpen] = useState(false)\n\n  const onJoinSession = useCallback(async sessionName => {\n    await openUrl(sessionName)\n  }, [])\n\n  const onLeaveSession = useEventCallback(() =>\n    changeFile({\n      ...file,\n      mode: \"local-storage\",\n      id: randomId(),\n      fileName: \"unnamed\"\n    })\n  )\n\n  return (\n    <>\n      <HeaderContext.Provider\n        value={{\n          title: file\n            ? file.mode === \"local-storage\"\n              ? file.fileName\n              : file.url\n            : \"unnamed\",\n          recentItems,\n          onClickTemplate: onCreateTemplate,\n          onClickHome,\n          onOpenFile: openFile,\n          onOpenRecentItem: openRecentItem,\n          inSession,\n          sessionBoxOpen,\n          changeSessionBoxOpen,\n          onJoinSession,\n          onLeaveSession,\n          onCreateSession: makeSession,\n          fileOpen: Boolean(file),\n          onDownload\n        }}\n      >\n        {!file ? (\n          <StartingPage\n            onFileDrop={openFile}\n            onOpenTemplate={onCreateTemplate}\n            recentItems={recentItems}\n            onOpenRecentItem={openRecentItem}\n            onClickOpenSession={() => changeSessionBoxOpen(true)}\n          />\n        ) : (\n          <OHAEditor\n            key={file.id}\n            {...file}\n            inSession={inSession}\n            oha={file.content}\n            onChangeFileName={newName => {\n              changeFile(setIn(file, [\"fileName\"], newName))\n            }}\n            onChangeOHA={newOHA => {\n              changeFile(setIn(file, [\"content\"], newOHA))\n            }}\n          />\n        )}\n      </HeaderContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","// @flow\nimport React, { useState, useMemo, useEffect } from \"react\"\nimport { HeaderContext } from \"../Header\"\nimport StartingPage from \"../StartingPage\"\nimport OHAEditor from \"../OHAEditor\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport ErrorToasts from \"../ErrorToasts\"\nimport { useToasts } from \"../Toasts\"\nimport useErrors from \"../../utils/use-errors.js\"\nimport useLocalStorage from \"../../utils/use-local-storage.js\"\nimport useElectron from \"../../utils/use-electron.js\"\nimport templates from \"../StartingPage/templates\"\nimport useEventCallback from \"use-event-callback\"\nimport { setIn } from \"seamless-immutable\"\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\n\nimport useFileHandler from \"../../utils/file-handlers\"\n\nconst useStyles = makeStyles({\n  empty: {\n    textAlign: \"center\",\n    padding: 100,\n    color: \"#666\",\n    fontSize: 28\n  }\n})\n\nconst randomId = () =>\n  Math.random()\n    .toString()\n    .split(\".\")[1]\n\nexport default () => {\n  const c = useStyles()\n  const {\n    file,\n    changeFile,\n    openFile,\n    openUrl,\n    makeSession,\n    saveFile,\n    recentItems\n  } = useFileHandler()\n\n  const [oha, changeOHA] = useState()\n  const [errors, addError] = useErrors()\n  const { addToast } = useToasts()\n\n  const { remote, ipcRenderer } = useElectron()\n\n  const onCreateTemplate = useEventCallback(template => {\n    changeFile({\n      fileName: \"unnamed\",\n      content: template.oha,\n      id: randomId(),\n      mode: \"filesystem\"\n    })\n  })\n\n  const openRecentItem = useEventCallback(item => changeFile(item))\n  const onClickHome = useEventCallback(() => changeFile(null))\n\n  useEffect(() => {\n    const onOpenWelcomePage = () => changeFile(null)\n    const onNewFile = (arg0, { templateName } = {}) => {\n      onCreateTemplate(\n        templates.find(t => t.name === templateName) || templates[0]\n      )\n    }\n    const saveFileAs = () => saveFile({ saveAs: true })\n    const exportToCSV = async () => {\n      if (!file) return\n      let { cancelled, filePath } = await remote.dialog.showSaveDialog({\n        filters: [{ name: \".udt.csv\", extensions: [\"udt.csv\"] }]\n      })\n      filePath =\n        !filePath || filePath.endsWith(\".csv\")\n          ? filePath\n          : `${filePath}.udt.csv`\n\n      await remote\n        .require(\"fs\")\n        .promises.writeFile(filePath, toUDTCSV(file.content))\n    }\n    const onOpenFileFromToolbar = (e, file) => (\n      console.log(file), openFile(file)\n    )\n\n    ipcRenderer.on(\"open-welcome-page\", onOpenWelcomePage)\n    ipcRenderer.on(\"new-file\", onNewFile)\n    ipcRenderer.on(\"open-file\", onOpenFileFromToolbar)\n    ipcRenderer.on(\"save-file\", saveFile)\n    ipcRenderer.on(\"save-file-as\", saveFileAs)\n    ipcRenderer.on(\"export-to-csv\", exportToCSV)\n    return () => {\n      ipcRenderer.removeListener(\"open-welcome-page\", onOpenWelcomePage)\n      ipcRenderer.removeListener(\"new-file\", onNewFile)\n      ipcRenderer.removeListener(\"open-file\", onOpenFileFromToolbar)\n      ipcRenderer.removeListener(\"save-file\", saveFile)\n      ipcRenderer.removeListener(\"save-file-as\", saveFileAs)\n      ipcRenderer.removeListener(\"export-to-csv\", exportToCSV)\n    }\n  }, [file])\n\n  return (\n    <>\n      <HeaderContext.Provider\n        value={{\n          recentItems,\n          onClickTemplate: onCreateTemplate,\n          onClickHome,\n          title: file ? file.fileName : null,\n          fileOpen: Boolean(file),\n          onOpenRecentItem: openRecentItem,\n          isDesktop: true,\n          onOpenFile: openFile\n        }}\n      >\n        {!file ? (\n          <StartingPage\n            showDownloadLink={false}\n            onFileDrop={openFile}\n            onOpenTemplate={onCreateTemplate}\n            recentItems={recentItems}\n            onOpenRecentItem={openRecentItem}\n          />\n        ) : (\n          <OHAEditor\n            key={file.id}\n            {...file}\n            oha={file.content}\n            onChangeFileName={newName => {\n              changeFile(setIn(file, [\"fileName\"], newName))\n            }}\n            onChangeOHA={newOHA => {\n              changeFile(setIn(file, [\"content\"], newOHA))\n            }}\n          />\n        )}\n      </HeaderContext.Provider>\n      <ErrorToasts errors={errors} />\n    </>\n  )\n}\n","import React from \"react\"\nimport Theme from \"./components/Theme\"\nimport LocalStorageApp from \"./components/LocalStorageApp\"\nimport DesktopApp from \"./components/DesktopApp\"\nimport { ToastProvider } from \"./components/Toasts\"\nimport useElectron from \"./utils/use-electron.js\"\n\nexport const App = () => {\n  const electron = useElectron()\n  return (\n    <Theme>\n      <ToastProvider>\n        {Boolean(electron) ? <DesktopApp /> : <LocalStorageApp />}\n      </ToastProvider>\n    </Theme>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}